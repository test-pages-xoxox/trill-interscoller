!function(){"use strict";function e(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{s(i.next(e))}catch(e){o(e)}}function c(e){try{s(i.throw(e))}catch(e){o(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,c)}s((i=i.apply(e,t||[])).next())}))}let t;const n=n=>e(void 0,void 0,void 0,(function*(){if(t)return Promise.resolve(t);const e=yield(e=>(e=>e.top!==e.self)(e)?Promise.resolve(e):new Promise((t=>{try{const n=e.document.createElement("iframe");n.src="about:blank",n.style.display="none";const i=()=>{e.document.body.appendChild(n),t(n.contentWindow)};"interactive"===document.readyState||"complete"===document.readyState?i():document.addEventListener("DOMContentLoaded",(()=>{i()}))}catch(e){t(null)}})))(n);if(!e)return Promise.reject("iframe window for datadog is null");return new Promise(((n,i)=>{const r=window.frameElement&&window.top?window.top.document:document,o=e.document.createElement("script");o.async=!0,o.src="https://www.datadoghq-browser-agent.com/datadog-logs-v4.js",o.onload=()=>{(e=>"DD_LOGS"in e)(e)?e.DD_LOGS.onReady((()=>{e.DD_LOGS.init({clientToken:"pubf9159ed47a5e0d4d8ca1f19377f88a35",site:"datadoghq.com",service:"fluct-one",forwardErrorsToLogs:!1,version:"06b79a4",env:"prod",beforeSend:e=>(e.view.url=r.location.href,e.view.referrer=r.referrer,!0)}),t=e.DD_LOGS,n(t)})):i("DD_LOGS is not found in iframe window")},o.onerror=()=>{i("error occurred while loading datadog script")},e.document.head.appendChild(o)}))}));function i(e){return{message:e.message,name:e.name,description:e.description,number:e.number,fileName:e.fileName||e.sourceURL,lineNumber:e.lineNumber||e.line,columnNumber:e.columnNumber,stack:e.stack}}const r=new class{constructor(){this.isDebugMode=!1,this.context={}}setDebugMode(e){this.isDebugMode=e}setContextProperty(e,t){this.context=Object.assign(Object.assign({},this.context),{[e]:t})}error(e,t,n=100){this.log("error",e,t,n)}warn(e,t,n=100){this.log("warn",e,t,n)}info(e,t,n=100){this.log("info",e,t,n)}debug(e,t,n=100){this.log("debug",e,t,n)}log(e,t,n,r){let o=n instanceof Error?i(n):n;o=Object.assign(Object.assign({},this.context),o);const a=r;this.sendToConsole(e,t,o),100*Math.random()<a&&this.sendToDatadog(e,t,o)}logWithError(e,t,n,r,o=100){e instanceof Error?this.log(t,n,Object.assign(Object.assign({},r),i(e)),o):this.log(t,n+"Unknown Error Occured.",Object.assign({},r),o)}sendToDatadog(e,t,i){n(window).then((n=>{n.logger.log(t,i,e)})).catch((e=>{console.error("Failed to send logs to Datadog:",e)}))}sendToConsole(e,t,n){("error"===e||this.isDebugMode)&&console[e]("%c [fluct-one]:","background-color: lightblue; color: black;",t,n)}},o=function(e,t){if("regexp"===e.type)try{const n=new RegExp(e.value);return null!==t.match(n)}catch(t){return r.logWithError(t,"error",`Invalid regexp pattern: ${e.value}.`,{pattern:e}),!1}return t.includes(e.value)};class a{constructor(e,t){this.params=e,this.url=t}check(){if(0===this.params.patterns.length)return!0;return!!this.params.patterns.find((e=>o(e,this.url)))}}class c{constructor(e,t){this.params=e,this.url=t}check(){if(0===this.params.patterns.length)return!0;return!this.params.patterns.find((e=>o(e,this.url)))}}class s{constructor(e,t){this.params=e,this.referrer=t}check(){if(0===this.params.patterns.length)return!0;return!!this.params.patterns.find((e=>o(e,this.referrer)))}}class d{constructor(e,t){this.params=e,this.referrer=t}check(){if(0===this.params.patterns.length)return!0;return!this.params.patterns.find((e=>o(e,this.referrer)))}}const l="android",p="ios";class u{constructor(e,t){this.params=e,this.ua=t}check(){let e="unknown";return/android/i.test(this.ua)&&(e=l),/iP(hone|(o|a)d)/.test(this.ua)&&(e=p),"unknown"!==e&&((e!==l||this.params.kind===l)&&(e!==p||this.params.kind===p))}}class f{constructor(e,t){this.params=e,this.ua=t}check(){const e=!!this.ua.match(/iPhone|Android.+Mobile/);return(!e||"pc"!==this.params.kind)&&!(!e&&"sp"===this.params.kind)}}class g{constructor(e,t,n,i){this.params=e,this.referrer=t,this.url=n,this.host=i}check(){var e;return this.params.displayable===function(e,t,n,i){if(!t.match(i))return!1;if(e.find((e=>o(e,n))))return!1;return!0}(null!==(e=this.params.excludePatterns)&&void 0!==e?e:[],this.referrer,this.url,this.host)}}class m{constructor(e){this.params=e}check(){const e=this.params.funcitonText,t=this.stringToFunction(e);if(!t)return!1;try{const n=t();return"boolean"!=typeof n?(r.error("customFunction: Function must return boolean",{functionText:e}),!1):n}catch(e){throw new Error(`customFunction: Failed to execute function. Error occurred. ${e}`)}}stringToFunction(e){try{const t=Function("return ("+e+")")();return"function"!=typeof t?(r.error("customFunction: Failed to convert string to function. not",{functionString:e}),null):t}catch(e){throw new Error(`customFunction: Failed to convert string to function. Error occurred. ${e}`)}}}function v(e,t={referrer:document.referrer,url:location.href,host:location.host,ua:navigator.userAgent}){const n=function(e,t){const n=[];return e.url&&n.push(new a(e.url,t.url)),e.excludeUrl&&n.push(new c(e.excludeUrl,t.url)),e.referrer&&n.push(new s(e.referrer,t.referrer)),e.excludeReferrer&&n.push(new d(e.excludeReferrer,t.referrer)),e.os&&n.push(new u(e.os,t.ua)),e.device&&n.push(new f(e.device,t.ua)),e.yda&&n.push(new g(e.yda,t.referrer,t.url,t.host)),e.customFunction&&n.push(new m(e.customFunction)),n}(e,t);for(const i of n)try{if(!i.check())return!1}catch(n){return r.logWithError(n,"error","error occurred in trigger checker",{condition:e,context:t}),!1}return!0}function _(e){const t=e.components,n=function(e){const t=e.reduce(((e,t)=>e+t),0);let n=Math.random()*t;for(let t=0;t<e.length;t++)if(n-=e[t],n<0)return t;return null}(t.map((e=>e.weight)));return null!==n?t[n]:null}function h(t,n=document){b(n)?document.write(t):function(t,n){e(this,void 0,void 0,(function*(){var e,i,r,o;void 0===n&&(n=null!==(e=document.body)&&void 0!==e?e:document.head);const a=(new DOMParser).parseFromString(t,"text/html"),c=null===(i=a.head)||void 0===i?void 0:i.children,s=null===(r=a.body)||void 0===r?void 0:r.children,d=new Uint32Array(1),l="boot-target-script-"+window.crypto.getRandomValues(d)[0];Array.prototype.forEach.call(a.getElementsByTagName("script"),(e=>{e.className=l}));const p=n;if(Array.prototype.forEach.call(c,(e=>{var t;const i=e.cloneNode(!0);null===(t=n.parentNode)||void 0===t||t.insertBefore(i,n.nextSibling),n=i})),n=p,Array.prototype.forEach.call(s,(e=>{var t;const i=e.cloneNode(!0);null===(t=n.parentNode)||void 0===t||t.insertBefore(i,n.nextSibling),n=i})),null==(null==n?void 0:n.parentNode))try{const e=10,t=100;yield function(e,t,n){return new Promise(((i,r)=>{let o=0;const a=setInterval((()=>{null!=(null==e?void 0:e.parentNode)?(clearInterval(a),i()):++o>=t&&(clearInterval(a),r(new Error("targetDOM.parentNode is null.")))}),n)}))}(n,e,t)}catch(e){throw e instanceof Error?new Error(`${e.message} targetDOM: ${n} scriptClassName: ${l}`):new Error(`error ${e}. targetDOM: ${n} scriptClassName: ${l}`)}const u=Array.prototype.slice.call(null===(o=n.parentNode)||void 0===o?void 0:o.getElementsByClassName(l)),f=[];u.forEach((e=>{const t=self.document.createElement("script");for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n];t.setAttribute(i.name,i.value)}e.getAttribute("src")||(t.innerHTML=e.innerHTML),t.async=!1,f.push({s:t,original:e})})),f.forEach((e=>{var t;const n=e.s,i=e.original;null===(t=i.parentNode)||void 0===t||t.replaceChild(n,i)}))}))}(t,n.currentScript)}function b(e){const t=!e.currentScript.async,n=!!e.write.prototype;return r.setContextProperty("bootType",t||n?"documentWrite":"AsyncBoot"),t||n}function y(e){const t=new URL(document.location.href);return t.searchParams?t.searchParams.get(e):null}const x={site:{id:"bab11486-68a5-4260-9c36-f4e831c10294",name:"dely｜trill（bodyタグ内に設置する）",siteCode:"trilltrill",triggers:[{id:"cc789d83-6701-4ce0-8b61-21ed57d9ecf0",title:"SP_Android_interstitial",condition:{excludeUrl:{patterns:[{value:"/terms",type:"regexp"},{value:"/sitemap",type:"regexp"},{type:"regexp",value:"/search"},{type:"string",value:"/games/"}]},referrer:{patterns:[{value:"https://trilltrill-dev.jp",type:"string"},{value:"https://trilltrill-stg.jp",type:"string"},{value:"https://trilltrill.jp",type:"string"}]},device:{kind:"sp"},os:{kind:"android"},customFunction:{funcitonText:'function () {\n    function frequency() {\n        var freq_cookie_name = "adingo_fluct_frequency";\n\n        var cookie_pos = document.cookie.indexOf(freq_cookie_name + "=");\n        if (cookie_pos !== -1) {\n            var cookie_value_start_pos = cookie_pos + freq_cookie_name.length + 1;\n            var cookie_value_end_pos = document.cookie.indexOf(";", cookie_value_start_pos);\n            if (cookie_value_end_pos === -1) {\n                cookie_value_end_pos = document.cookie.length;\n            }\n            var cookie_value = decodeURIComponent(document.cookie.substring(cookie_value_start_pos, cookie_value_end_pos));\n            if (cookie_value === "true") { // "true"以外の値は想定されていない。その場合はcookieが存在しないのと同じ処理をする\n                return false;\n            }\n       }\n       return true;\n    }\n\n    function isNotSponsoredContent() {\n      const element = document.querySelectorAll("meta[property=\'article:tag\']").item(0);\n      return !(element && element.content === "スポンサード・コンテンツ");\n    }\n\n    function isAdxInstNotDisplayed() {\n        var ADX_INST_DISPLAYED_KEY = "isAdxInstDisplayed";\n        try {\n            var isAdxInstDisplayed = sessionStorage.getItem(ADX_INST_DISPLAYED_KEY) === "true";\n            return !isAdxInstDisplayed;\n        } catch (e) {\n            if (e.name !== "SecurityError") throw e;\n            return false;\n        }\n    }\n    return frequency() && isNotSponsoredContent() && isAdxInstNotDisplayed()\n}'}},weightedParents:[{id:"4404edb2-04e1-4b72-9b59-2b526988fe2b",title:"未設定",components:[{id:"2f6aeaa7-9eed-411d-9b9d-db1d3bbe7090",title:"GMO_INST",tagText:'<script async src="https://cdn.gmossp-sp.jp/js/async/g937199/gc.js"><\/script>\r\n<div class="gmossp_core_g937199">\r\n  <script>\r\n    window.Gmossp=window.Gmossp||{};window.Gmossp.events=window.Gmossp.events||[];\r\n    window.Gmossp.events.push({\r\n      sid: "g937199",\r\n    });\r\n  <\/script>\r\n</div>',weight:60},{id:"f6a5453f-865f-40ea-8fa5-7c9dbfc78787",title:"アイモバイル",tagText:'<div id="im-1d5daa5c5f1843dd979b0923f1d12580">\r\n  <script async src="//imp-adedge.i-mobile.co.jp/script/v1/spot.js?20220104"><\/script>\r\n  <script>(window.adsbyimobile=window.adsbyimobile||[]).push({pid:71224,mid:512545,asid:1859088,type:"banner",display:"interstitial",elementid:"im-1d5daa5c5f1843dd979b0923f1d12580"})<\/script>\r\n</div>',weight:5},{id:"5bd763a5-0fdc-4736-b717-61a7e5cd854b",title:"fluct",tagText:'\x3c!--  下記タグ群を広告を挿入したい位置に記載してください  --\x3e\n<link rel="preload" as="script" href="https://pdn.adingo.jp/p.js">\n<link rel="preconnect" href="https://sh.adingo.jp" crossorigin="use-credentials">\n\n\x3c!--      fluct ユニット名「fluct-unit-1000281287-1」     --\x3e\n<div class="fluct-unit-1000281287-1"></div>\n\n\x3c!--      fluct グループ名「TRILL（インターステイシャル2）（スマホ）_300x250_Web_インタースティシャル_インタースティシャルNEW＿AND」      --\x3e\n<script type="text/javascript" src="https://pdn.adingo.jp/p.js" async><\/script>\n<script type="text/javascript">\n  var fluctAdScript = fluctAdScript || {};\n  fluctAdScript.cmd = fluctAdScript.cmd || [];\n  fluctAdScript.cmd.push(function (cmd) {\n    cmd.setGamTargetingMap(\'%%PATTERN:TARGETINGMAP%%\');\n    cmd.requestAdByGroup("1000176874")\n      .display(".fluct-unit-1000281287-1", "1000281287");\n  });\n<\/script>',weight:5},{id:"7b736ab5-c4ae-4aab-8f61-9f8f3008fbfd",title:"ジーニー",tagText:'<style>#gn_interstitial_close_icon {visibility: hidden;}</style>\n<script src="https://works.gsspcln.jp/w/ad_format/deliveryRestrict.js"><\/script>\n<script>\n\t(function (window, document) {\n\t\tvar isTopPage = location.pathname === "/";\n\t\tfunction isInterstitialRestricted() {\n\t\t\treturn window.isAdxInstJustShown() || isTopPage || !window.isMobile();\n\t\t}\n\t\tif (!isInterstitialRestricted()) {\n\t\t\tdocument.write(\'<script type="text/javascript" src="https://js.gsspcln.jp/t/558/040/a1558040.js"></sc\'+\'ript>\');\n\t\t}\n\t})(window, document);\n<\/script>',weight:0},{id:"d5c658ff-c7dc-43a0-b847-f65bb8866fef",title:"タグ名（仮）",tagText:"",weight:0},{id:"81a420e0-e874-402c-9b16-0d192dd46b10",title:"SP_FLUCT_INST",tagText:'<link rel="preload" as="script" href="https://pdn.adingo.jp/p.js">\r\n<link rel="preconnect" href="https://sh.adingo.jp" crossorigin="use-credentials">\r\n\r\n\x3c!--      fluct ユニット名「TRILL（インターステイシャル2）（スマホ）_300x250_Web_Android_オーバーレイ_インタースティシャルAND」     --\x3e\r\n<div class="fluct-unit-1000246117"></div>\r\n\r\n\x3c!--      fluct グループ名「TRILL（インターステイシャル2）（スマホ）_300x250_Web_オーバーレイ_インタースティシャルAND」      --\x3e\r\n<script type="text/javascript" src="https://pdn.adingo.jp/p.js" async><\/script>\r\n<script type="text/javascript">\r\n  var fluctAdScript = fluctAdScript || {};\r\n  fluctAdScript.cmd = fluctAdScript.cmd || [];\r\n  fluctAdScript.cmd.push(function (cmd) {\r\n    cmd.setGamTargetingMap(\'%%PATTERN:TARGETINGMAP%%\');\r\n    cmd.requestAdByGroup("1000150014")\r\n      .display(".fluct-unit-1000246117", "1000246117")\r\n  });\r\n<\/script>',weight:0},{id:"9c1fb174-fb6f-474d-9583-3e5bcba86907",title:"profitX",tagText:'<script data-ca-profitx-pageid="34876" src="https://cdn.caprofitx.com/media/4947/pfx.js" type="text/javascript" charset="utf-8" data-ca-profitx-js async><\/script>\r\n<div class="ca_profitx_ad_container ca_profitx_mediaid_4947 ca_profitx_pageid_34876">\r\n  <div class="ca_profitx_ad" data-ca-profitx-ad data-ca-profitx-tagid="34804" data-ca-profitx-spotid="pfxad_34804" data-ca-profitx-pageid="34876"></div>\r\n  <div class="ca_profitx_ad" data-ca-profitx-ad data-ca-profitx-tagid="34805" data-ca-profitx-spotid="pfxad_34805" data-ca-profitx-pageid="34876"></div>\r\n  <script data-ca-profitx-pageid="34876" src="https://cdn.caprofitx.com/media/4947/pfx.js" type="text/javascript" charset="utf-8" data-ca-profitx-js async><\/script>\r\n</div>\r\n',weight:30}]},{id:"f2fce0a4-e517-45ed-a02b-dd134ddd6e95",title:"未設定",components:[{id:"4b0de652-8477-40d3-9184-a13b040d7447",title:"フリークエンシー制御用",tagText:'<script type="text/javascript">\n(function() {\n    var freq_cookie_name = "adingo_fluct_frequency";\n    var freq_interval_sec = 60 * 60;\n\n    var cookie_pos = document.cookie.indexOf(freq_cookie_name + "=");\n    if (cookie_pos !== -1) {\n        var cookie_value_start_pos = cookie_pos + freq_cookie_name.length + 1;\n        var cookie_value_end_pos = document.cookie.indexOf(";", cookie_value_start_pos);\n        if (cookie_value_end_pos === -1) {\n            cookie_value_end_pos = document.cookie.length;\n        }\n        var cookie_value = decodeURIComponent(document.cookie.substring(cookie_value_start_pos, cookie_value_end_pos));\n        if (cookie_value === "true") { // "true"以外の値は想定されていない。その場合はcookieが存在しないのと同じ処理をする\n            return false;\n        }\n    }\n\n    var expire = new Date();\n    expire.setTime(expire.getTime() + freq_interval_sec * 1000);\n    document.cookie = `${freq_cookie_name}=${encodeURIComponent("true")}; path=/; expires=${expire.toUTCString()}`;\n})();\n<\/script>',weight:1}]}],triggerEnabled:null},{id:"16310d17-8305-4dc9-9989-d369460ffa0f",title:"SP_ios_ブラウザバックインステ",condition:{excludeUrl:{patterns:[{value:"/terms",type:"regexp"},{value:"/sitemap",type:"regexp"},{value:"/search",type:"regexp"}]},excludeReferrer:{patterns:[{value:"trilltrill\\.jp",type:"regexp"},{value:"yahoo\\.co\\.jp",type:"regexp"}]},device:{kind:"sp"},os:{kind:"ios"},customFunction:{funcitonText:'function() {\n    function frequency() {\n        const freq_cookie_name = "fluct-adingo-historyback-interstial";\n\n        const cookie_pos = document.cookie.indexOf(freq_cookie_name + "=");\n        if (cookie_pos !== -1) {\n            const cookie_value_start_pos = cookie_pos + freq_cookie_name.length + 1;\n            let cookie_value_end_pos = document.cookie.indexOf(";", cookie_value_start_pos);\n            if (cookie_value_end_pos === -1) {\n                cookie_value_end_pos = document.cookie.length;\n            }\n            const cookie_value = decodeURIComponent(document.cookie.substring(cookie_value_start_pos, cookie_value_end_pos));\n            if (cookie_value === "true") { // "true"以外の値は想定されていない。その場合はcookieが存在しないのと同じ処理をする\n                return false;\n            }\n        }\n        return true;\n    }\n\n    function isNotSponsoredContent() {\n        const element = document.querySelectorAll("meta[property=\'article:tag\']").item(0);\n        return !(element && element.content === "スポンサード・コンテンツ");\n    }\n\nfunction isNotNotFromYahooApp() {\n    const userAgent = navigator.userAgent;\n    return !(userAgent.includes(\'YJApp\'));\n}\n\n\n    return frequency() && isNotSponsoredContent() && isNotNotFromYahooApp();\n}'}},weightedParents:[{id:"2efd566d-6324-40df-87d9-bde912894b4a",title:"未設定",components:[{id:"9749df23-383e-41f6-b556-fe4dd8cc9f48",title:"UZOU",tagText:'<div class="uz-trilltrill-44_sp uz-ny" data-uz-url="%%PATTERN:url%%"></div>\r\n<script async type="text/javascript" src="https://speee-ad.akamaized.net/tag/trilltrill-44_sp/js/outer-frame.min.js" charset="utf-8"><\/script>\r\n\r\n\x3c!--<div class="gsm-gcm-ad" style="margin: 0 auto; padding: 0; position: relative;">--\x3e\r\n\x3c!--  <script type="text/javascript" src="https://gcmadv-cdn.goldspotmedia.com/delivery/ad/0e8c3ca1-662d-4d88-a67a-bee788bf9bf5?gi=gcmInfo_0e8c3ca1662d4d88a67abee788bf9bf5" async><\/script>--\x3e\r\n\x3c!--  <script type="text/javascript" src="https://gcmast-cdn.goldspotmedia.com/libs/gcm-player/1.10.1/gcm-player.min.js?tg=gcmInfo_0e8c3ca1662d4d88a67abee788bf9bf5&tm=gcmMediaInfo_0e8c3ca1662d4d88a67abee788bf9bf5" async><\/script>--\x3e\r\n\x3c!--</div>--\x3e\r\n',weight:50},{id:"4ed9266b-cc0e-4406-8ca9-6042c2db4528",title:"OUTBRAIN",tagText:'<div class="OUTBRAIN" data-src="DROP_PERMALINK_HERE" data-widget-id="MB_30"></div>\r\n<script type="text/javascript" async="async" src="//widgets.outbrain.com/outbrain.js"><\/script>\r\n\r\n\x3c!--<div class="gsm-gcm-ad" style="margin: 0 auto; padding: 0; position: relative;">--\x3e\r\n\x3c!--  <script type="text/javascript" src="https://gcmadv-cdn.goldspotmedia.com/delivery/ad/5fbeb08b-3513-471b-a2a7-72e6e84d57da?gi=gcmInfo_5fbeb08b3513471ba2a772e6e84d57da" async><\/script>--\x3e\r\n\x3c!--  <script type="text/javascript" src="https://gcmast-cdn.goldspotmedia.com/libs/gcm-player/1.10.1/gcm-player.min.js?tg=gcmInfo_5fbeb08b3513471ba2a772e6e84d57da&tm=gcmMediaInfo_5fbeb08b3513471ba2a772e6e84d57da" async><\/script>--\x3e\r\n\x3c!--</div>--\x3e\r\n',weight:50}]},{id:"142ff71d-4e01-4a18-820f-19a68095b565",title:"フリークエンシー制御用(ブラウザバックインステ): 100%",components:[{id:"82d003c7-7f4d-4c4e-bc0b-7cabb4a9c8e6",title:"フリークエンシー制御用のクッキー書き込みタグ",tagText:'<script type="text/javascript">\n(function() {\n    var freq_cookie_name = "fluct-adingo-historyback-interstial";\n    var freq_interval_sec = 60 * 60;\n\n    var cookie_pos = document.cookie.indexOf(freq_cookie_name + "=");\n    if (cookie_pos !== -1) {\n        var cookie_value_start_pos = cookie_pos + freq_cookie_name.length + 1;\n        var cookie_value_end_pos = document.cookie.indexOf(";", cookie_value_start_pos);\n        if (cookie_value_end_pos === -1) {\n            cookie_value_end_pos = document.cookie.length;\n        }\n        var cookie_value = decodeURIComponent(document.cookie.substring(cookie_value_start_pos, cookie_value_end_pos));\n        if (cookie_value === "true") { // "true"以外の値は想定されていない。その場合はcookieが存在しないのと同じ処理をする\n            return false;\n        }\n    }\n\n    var expire = new Date();\n    expire.setTime(expire.getTime() + freq_interval_sec * 1000);\n    document.cookie = `${freq_cookie_name}=${encodeURIComponent("true")}; path=/; expires=${expire.toUTCString()}`;\n})();\n<\/script>',weight:1}]}],triggerEnabled:!0},{id:"9831a524-8b13-4b19-bc85-f87ef4dd88a3",title:"PC_interstitial",condition:{excludeUrl:{patterns:[{value:"/terms",type:"regexp"},{value:"search(?=.*keyword=)(?!.*page=)",type:"regexp"},{value:"search(?=.*keyword=)(?=.*page=1$)",type:"regexp"}]},referrer:{patterns:[{value:"https://trilltrill.jp/",type:"string"},{value:"https://trilltrill-stg.jp",type:"string"},{value:"https://trilltrill-dev.jp",type:"string"}]},device:{kind:"pc"},customFunction:{funcitonText:'function () {\n    function frequency() {\n        var freq_cookie_name = "adingo_fluct_frequency";\n\n        var cookie_pos = document.cookie.indexOf(freq_cookie_name + "=");\n        if (cookie_pos !== -1) {\n            var cookie_value_start_pos = cookie_pos + freq_cookie_name.length + 1;\n            var cookie_value_end_pos = document.cookie.indexOf(";", cookie_value_start_pos);\n            if (cookie_value_end_pos === -1) {\n                cookie_value_end_pos = document.cookie.length;\n            }\n            var cookie_value = decodeURIComponent(document.cookie.substring(cookie_value_start_pos, cookie_value_end_pos));\n            if (cookie_value === "true") { // "true"以外の値は想定されていない。その場合はcookieが存在しないのと同じ処理をする\n                return false;\n            }\n       }\n       return true;\n    }\n\n    function isNotSponsoredContent() {\n      const element = document.querySelectorAll("meta[property=\'article:tag\']").item(0);\n      return !(element && element.content === "スポンサード・コンテンツ");\n    }\n\n    function isAdxInstNotDisplayed() {\n        var ADX_INST_DISPLAYED_KEY = "isAdxInstDisplayed";\n        try {\n            var isAdxInstDisplayed = sessionStorage.getItem(ADX_INST_DISPLAYED_KEY) === "true";\n            return !isAdxInstDisplayed;\n        } catch (e) {\n            if (e.name !== "SecurityError") throw e;\n            return false;\n        }\n    }\n    return frequency() && isNotSponsoredContent() && isAdxInstNotDisplayed()\n}'}},weightedParents:[{id:"86b00dc5-9107-4804-ab64-8565533bcd3b",title:"未設定",components:[{id:"b102e1e0-0a03-45fb-82b8-872543d85dbf",title:"アイモバイル",tagText:'<div id="im-ec8ebdc10f1c4afba3a3dc839313bcf1">\r\n  <script async src="//imp-adedge.i-mobile.co.jp/script/v1/spot.js?20220104"><\/script>\r\n  <script>(window.adsbyimobile=window.adsbyimobile||[]).push({pid:71224,mid:512544,asid:1892826,type:"banner",display:"interstitial",elementid:"im-ec8ebdc10f1c4afba3a3dc839313bcf1"})<\/script>\r\n</div>',weight:5},{id:"fa163c58-3429-4c8e-915d-fb8d8052af8b",title:"タグ名（仮）",tagText:"",weight:50},{id:"8fca7277-2078-4a49-a436-58a51997fe19",title:"GMO_INST&フリークエンシー制御用",tagText:'<script async src="https://cdn.gmossp-sp.jp/js/async/g938315/gc.js"><\/script>\r\n<div class="gmossp_core_g938315">\r\n  <script>\r\n    window.Gmossp=window.Gmossp||{};window.Gmossp.events=window.Gmossp.events||[];\r\n    window.Gmossp.events.push({\r\n      sid: "g938315",\r\n    });\r\n  <\/script>\r\n</div>\r\n\r\n<script type="text/javascript">\r\n(function() {\r\n    var freq_cookie_name = "adingo_fluct_frequency";\r\n    var freq_interval_sec = 60 * 60;\r\n\r\n    var cookie_pos = document.cookie.indexOf(freq_cookie_name + "=");\r\n    if (cookie_pos !== -1) {\r\n        var cookie_value_start_pos = cookie_pos + freq_cookie_name.length + 1;\r\n        var cookie_value_end_pos = document.cookie.indexOf(";", cookie_value_start_pos);\r\n        if (cookie_value_end_pos === -1) {\r\n            cookie_value_end_pos = document.cookie.length;\r\n        }\r\n        var cookie_value = decodeURIComponent(document.cookie.substring(cookie_value_start_pos, cookie_value_end_pos));\r\n        if (cookie_value === "true") { // "true"以外の値は想定されていない。その場合はcookieが存在しないのと同じ処理をする\r\n            return false;\r\n        }\r\n    }\r\n\r\n    var expire = new Date();\r\n    expire.setTime(expire.getTime() + freq_interval_sec * 1000);\r\n    document.cookie = `${freq_cookie_name}=${encodeURIComponent("true")}; path=/; expires=${expire.toUTCString()}`;\r\n})();\r\n<\/script>',weight:40},{id:"570b1b59-0648-4041-ac4f-8702b29c614d",title:"profitX",tagText:'\x3c!-- 以下はProfitX提供の広告タグ --\x3e\n<div class="ca_profitx_ad_container ca_profitx_mediaid_4947 ca_profitx_pageid_36091">\n    <div class="ca_profitx_ad" data-ca-profitx-ad data-ca-profitx-tagid="40134" data-ca-profitx-spotid="pfxad_40134"\n        data-ca-profitx-pageid="36091"></div>\n    <div class="ca_profitx_ad" data-ca-profitx-ad data-ca-profitx-tagid="40135" data-ca-profitx-spotid="pfxad_40135"\n        data-ca-profitx-pageid="36091"></div>\n    <script data-ca-profitx-pageid="36091" src="https://cdn.caprofitx.com/media/4947/pfx.js" type="text/javascript"\n        charset="utf-8" data-ca-profitx-js async><\/script>\n</div>\n\x3c!-- 以下はフリコン用 --\x3e\n<script type="text/javascript">\n    (function () {\n        const freq_cookie_name = "adingo_fluct_frequency";\n        const freq_interval_sec = 60 * 60;\n\n        const expire = new Date();\n        expire.setTime(expire.getTime() + freq_interval_sec * 1000);\n        document.cookie = `${freq_cookie_name}=${encodeURIComponent("true")}; path=/; expires=${expire.toUTCString()}`;\n    })();\n<\/script>',weight:5}]}],triggerEnabled:null},{id:"5466293b-7e1f-4969-a9b6-bd004cd0d89a",title:"SP_ios_interstitial",condition:{excludeUrl:{patterns:[{value:"/terms",type:"regexp"},{value:"/sitemap",type:"regexp"},{value:"/search",type:"regexp"},{type:"string",value:"/games/"}]},referrer:{patterns:[{value:"https://trilltrill-dev.jp",type:"string"},{value:"https://trilltrill-stg.jp",type:"string"},{value:"https://trilltrill.jp",type:"string"}]},device:{kind:"sp"},os:{kind:"ios"},customFunction:{funcitonText:'function () {\n    function frequency() {\n        var freq_cookie_name = "adingo_fluct_frequency";\n\n        var cookie_pos = document.cookie.indexOf(freq_cookie_name + "=");\n        if (cookie_pos !== -1) {\n            var cookie_value_start_pos = cookie_pos + freq_cookie_name.length + 1;\n            var cookie_value_end_pos = document.cookie.indexOf(";", cookie_value_start_pos);\n            if (cookie_value_end_pos === -1) {\n                cookie_value_end_pos = document.cookie.length;\n            }\n            var cookie_value = decodeURIComponent(document.cookie.substring(cookie_value_start_pos, cookie_value_end_pos));\n            if (cookie_value === "true") { // "true"以外の値は想定されていない。その場合はcookieが存在しないのと同じ処理をする\n                return false;\n            }\n       }\n       return true;\n    }\n\n    function isNotSponsoredContent() {\n      const element = document.querySelectorAll("meta[property=\'article:tag\']").item(0);\n      return !(element && element.content === "スポンサード・コンテンツ");\n    }\n\n    function isAdxInstNotDisplayed() {\n        var ADX_INST_DISPLAYED_KEY = "isAdxInstDisplayed";\n        try {\n            var isAdxInstDisplayed = sessionStorage.getItem(ADX_INST_DISPLAYED_KEY) === "true";\n            return !isAdxInstDisplayed;\n        } catch (e) {\n            if (e.name !== "SecurityError") throw e;\n            return false;\n        }\n    }\n    return frequency() && isNotSponsoredContent() && isAdxInstNotDisplayed()\n}'}},weightedParents:[{id:"e7c427ff-5d5c-49a0-bd9d-fec14684f377",title:"未設定",components:[{id:"4af1240a-285d-4205-9c2b-064f807ec08c",title:"fluct",tagText:'\x3c!--  下記タグ群を広告を挿入したい位置に記載してください  --\x3e\n<link rel="preload" as="script" href="https://pdn.adingo.jp/p.js">\n<link rel="preconnect" href="https://sh.adingo.jp" crossorigin="use-credentials">\n\n\x3c!--      fluct ユニット名「fluct-unit-1000281286-1」     --\x3e\n<div class="fluct-unit-1000281286-1"></div>\n\n\x3c!--      fluct グループ名「TRILL（インターステイシャル2）（スマホ）_300x250_Web_インタースティシャル_インタースティシャルNEW＿IOS」      --\x3e\n<script type="text/javascript" src="https://pdn.adingo.jp/p.js" async><\/script>\n<script type="text/javascript">\n  var fluctAdScript = fluctAdScript || {};\n  fluctAdScript.cmd = fluctAdScript.cmd || [];\n  fluctAdScript.cmd.push(function (cmd) {\n    cmd.setGamTargetingMap(\'%%PATTERN:TARGETINGMAP%%\');\n    cmd.requestAdByGroup("1000176873")\n      .display(".fluct-unit-1000281286-1", "1000281286");\n  });\n<\/script>',weight:5},{id:"af93b45e-510c-4a18-a9f1-ab87f6482504",title:"profitX",tagText:'<script data-ca-profitx-pageid="34874" src="https://cdn.caprofitx.com/media/4947/pfx.js" type="text/javascript" charset="utf-8" data-ca-profitx-js async><\/script>\r\n<div class="ca_profitx_ad_container ca_profitx_mediaid_4947 ca_profitx_pageid_34874">\r\n  <div class="ca_profitx_ad" data-ca-profitx-ad data-ca-profitx-tagid="34796" data-ca-profitx-spotid="pfxad_34796" data-ca-profitx-pageid="34874"></div>\r\n  <div class="ca_profitx_ad" data-ca-profitx-ad data-ca-profitx-tagid="34797" data-ca-profitx-spotid="pfxad_34797" data-ca-profitx-pageid="34874"></div>\r\n  <script data-ca-profitx-pageid="34874" src="https://cdn.caprofitx.com/media/4947/pfx.js" type="text/javascript" charset="utf-8" data-ca-profitx-js async><\/script>\r\n</div>',weight:5},{id:"f8c6b11d-7094-454c-b506-a8c7502c5090",title:"GMO_INST",tagText:'<script async src="https://cdn.gmossp-sp.jp/js/async/g937198/gc.js"><\/script>\r\n<div class="gmossp_core_g937198">\r\n  <script>\r\n    window.Gmossp=window.Gmossp||{};window.Gmossp.events=window.Gmossp.events||[];\r\n    window.Gmossp.events.push({\r\n      sid: "g937198",\r\n    });\r\n  <\/script>\r\n</div>',weight:20},{id:"a758efc7-96f4-43d4-84d8-81549cf07eec",title:"YDN（TRILLさんのテスト）",tagText:'<!DOCTYPE html>\n<html lang="ja">\n<head>\n  <meta charset="UTF-8">\n  <meta name="viewport" content="width=device-width, initial-scale=1.0">\n  <meta http-equiv="X-UA-Compatible" content="ie=edge">\n</head>\n<body style="overFlow:hidden;background-color:rgba(0,0,0,0.5);z-index:1000000000000" id="interstitial_bg">\n    \x3c!--広告位置の記述です--\x3e\n      <div style="width:100%;height:100%;position:fixed;top:140px;left:0" id="interstitial_area">\n        <div style="top:140px;bottom:0;left:0;right:0;margin:auto;position:absolute;">\n          \x3c!--↓バツボタンの記述↓--\x3e\n            <img src="https://〇〇.png" width="44" height="44" id="interstitial_close_icon" style="height: 44px; width: 44px; display: block; position: absolute; top: -169px;">\n        </div>\n\x3c!--↓広告タグを貼り付けてください↓--\x3e\n        <div>\n          <script type="text/javascript" language="JavaScript">\n            yads_ad_ds = \'92071_771634\';\n          <\/script>\n          <script type="text/javascript" language="JavaScript" src="//yads.c.yimg.jp/js/yads.js"><\/script>\n        </div>\n    </div>\n  </div>\n  <script>\n    (function(window, document) {\n        var a = document.getElementById("interstitial_close_icon");\n        var b = document.getElementById("interstitial_area");\n        var body = document.body;\n        a.onclick = function() {\n            b.style.display = "none";\n            body.style.overflow = "scroll";\n            body.style = "hide";\n        };\n    })(window, document);\n  <\/script>\n</body>\n</html>',weight:0},{id:"62ebcedc-505b-48bc-a1bc-e9a9160e8e0e",title:"ジーニー",tagText:'<style>#gn_interstitial_close_icon {visibility: hidden;}</style>\n<script src="https://works.gsspcln.jp/w/ad_format/deliveryRestrict.js"><\/script>\n<script>\n\t(function (window, document) {\n\t\tvar isTopPage = location.pathname === "/";\n\t\tfunction isInterstitialRestricted() {\n\t\t\treturn window.isAdxInstJustShown() || isTopPage || !window.isMobile();\n\t\t}\n\t\tif (!isInterstitialRestricted()) {\n\t\t\tdocument.write(\'<script type="text/javascript" src="https://js.gsspcln.jp/t/558/037/a1558037.js"></sc\'+\'ript>\');\n\t\t}\n\t})(window, document);\n<\/script>',weight:0},{id:"186987dd-24ac-4a04-a53e-a36ce9e613c6",title:"アイモバイル",tagText:'<div id="im-d3fb4c466bcd40e996570d1d66e66939">\r\n  <script async src="//imp-adedge.i-mobile.co.jp/script/v1/spot.js?20220104"><\/script>\r\n  <script>(window.adsbyimobile=window.adsbyimobile||[]).push({pid:71224,mid:512545,asid:1855756,type:"banner",display:"interstitial",elementid:"im-d3fb4c466bcd40e996570d1d66e66939"})<\/script>\r\n</div>',weight:70},{id:"b1894210-2384-412b-9df0-8db58acd6179",title:"compass",tagText:"\x3c!-- Rise Tag --\x3e\r\n    <div id=\"ads-ADU-DL3HC54F\"></div>\r\n    <script>(function(w,d,s,i){w.adunitlength?w.adunitlength.push('ADU-DL3HC54F'):w.adunitlength=['ADU-DL3HC54F'];var f=d.getElementsByTagName(s)[0],j=d.createElement(s);\r\n    j.async=true;j.src='https://rise.enhance.co.jp/adu.js?id='+i + '&matwName=matw_uuid' + '&clientTime=' + (new Date()).getTime();\r\n    f.parentNode.insertBefore(j,f);})(window,document,'script','ADU-DL3HC54F');<\/script>\r\n    \x3c!-- End Rise Tag --\x3e",weight:0}]},{id:"41daa808-c207-4bae-a58a-f46002b6c147",title:"未設定",components:[{id:"23378e49-44e2-435f-b4ec-14919afd296b",title:"フリークエンシー制御用",tagText:'<script type="text/javascript">\n(function() {\n    var freq_cookie_name = "adingo_fluct_frequency";\n    var freq_interval_sec = 60 * 60;\n\n    var cookie_pos = document.cookie.indexOf(freq_cookie_name + "=");\n    if (cookie_pos !== -1) {\n        var cookie_value_start_pos = cookie_pos + freq_cookie_name.length + 1;\n        var cookie_value_end_pos = document.cookie.indexOf(";", cookie_value_start_pos);\n        if (cookie_value_end_pos === -1) {\n            cookie_value_end_pos = document.cookie.length;\n        }\n        var cookie_value = decodeURIComponent(document.cookie.substring(cookie_value_start_pos, cookie_value_end_pos));\n        if (cookie_value === "true") { // "true"以外の値は想定されていない。その場合はcookieが存在しないのと同じ処理をする\n            return false;\n        }\n    }\n\n    var expire = new Date();\n    expire.setTime(expire.getTime() + freq_interval_sec * 1000);\n    document.cookie = `${freq_cookie_name}=${encodeURIComponent("true")}; path=/; expires=${expire.toUTCString()}`;\n})();\n<\/script>',weight:1}]}],triggerEnabled:null},{id:"bc4db0ba-8721-4549-8d66-67b6536a89a0",title:"常に表示",condition:{excludeUrl:{patterns:[{type:"string",value:"trilltrill-dev.jp"}]}},weightedParents:[{id:"0ddf7a61-e5e4-4815-8be8-a02e6b944087",title:"アンカーとSPオーバーレイの出し分け用",components:[{id:"2806fb52-af7a-40c0-b3da-6774f961649b",title:"特定のクリエイティブIDかつオーバーレイユニットのときにヘッダーオーバーレイを出さないようにする",tagText:"<script>\nfunction isHeaderOverlayAllowed(event) {\n    const deniedOverlayUnitPath = '/21763395206/overlay/SP_overlay_c1';\n    const deniedCreativeIds = [\n        138428980535, // fluct: 使用していない\n        138428980799, // fluct: 使用している(DA_iOS)\n        138451825645, // fluct: 使用している(DFL)\n        138484202287, // fluct: 使用している(DA_And)\n        138509838492, // fluct: 使用している(DA_And)\n        138429304932, // GMO: 使用している\n        138429955819, // GMO: 使用していない\n        138451221812, // GMO: 使用している\n        138474903492, // GMO: 使用していない\n        138482650378, // i-mobile: 使用していない\n        138490409052, // geniee: 使用していない\n        138490637762, // geniee: 使用していない\n        // 上記4つはfluctのタグのクリエイティブID。追加のGMOのタグのクリエイティブIDをここに足していく。足すときは上の書き方を真似して後ろにカンマを付けてください \n    ];\n    \n    /* \n    下記2点どちらもを満たす場合にtrueが返り、上部アンカーがメディアHTML上から呼び出される\n\n    1. 下部overlayを埋めたGAMクリエイティブのIDが上記'deniedCreativeIds'に含まれて「いない」\n    2. 下部overlayのAdUnitPathが'/21763395206/overlay/SP_overlay_c1'「ではない」\n\n    ... つまり「AdXないしはHB(またはOB)」が「'/21763395206/overlay/SP_overlay'から配信される」場合にのみ、上部アンカーは表示される *2024/11/06現在\n    */ \n\n    return !deniedCreativeIds.includes(event.creativeId) && event.slot.getAdUnitPath() !== deniedOverlayUnitPath ;\n}\n<\/script>",weight:1}]},{id:"7daf5626-44fd-4bf5-bec0-b7c2fe9c412c",components:[{id:"44e10d69-3973-4a60-b207-62596e3d34a0",title:"AdXインステ共存用",tagText:' <script>\r\n  var ADX_INST_DISPLAYED_KEY = "isAdxInstDisplayed";\r\n  var isAdxInstDisplayed = sessionStorage.getItem(ADX_INST_DISPLAYED_KEY) === "true";\r\n  \r\n  document.addEventListener("DOMContentLoaded", (event) => {\r\n    if (isAdxInstDisplayed) {\r\n      sessionStorage.removeItem(ADX_INST_DISPLAYED_KEY);\r\n    };\r\n  });\r\n  \r\n  window.addEventListener("hashchange", () => {\r\n      if ("#google_vignette" !== location.hash) {\r\n          return;\r\n      }\r\n      sessionStorage.setItem(ADX_INST_DISPLAYED_KEY, "true");\r\n  });\r\n<\/script>',weight:1}]},{id:"3ee42f61-10da-4aab-9723-79d26e2bb5be",components:[{id:"a9db16ba-8d5e-47a5-96ae-c0f7b30108d9",title:"Media.netはschain nodeを追加しない",tagText:'<script>\r\n  window.bsttag = window.bsttag || { cmd: [] };\r\n  window.bsttag.cmd.push(function () {\r\n    // @ts-ignore\r\n    window.pbjsFluct.setBidderConfig({\r\n      bidders: ["medianet"],\r\n      config: {\r\n        schain: {},\r\n      },\r\n    });\r\n  });\r\n<\/script>',weight:1}]},{id:"d8d21b6b-affa-4f83-9aa8-10eda5a98b08",title:"新しい比率出し分け親",components:[{id:"b65a47fd-c8fd-45d5-b061-373b3b9f075c",title:"GMOSSPオーバーレイ(body内の必要記述)",tagText:'\x3c!--常にHTML body内に下記のdivは吐き出される、head内に設置されているもう1つのonetagからGMOSSPオーバーレイが呼ばれた場合に、下記divを対象にオーバーレイ広告が表示される--\x3e\n<div class="gmossp_core_g944770"></div>',weight:1}]},{id:"163103c8-39b4-4547-945e-f42dd2d80117",title:"新しい比率出し分け親",components:[{id:"b06a4ead-4350-4a5f-8ce1-126ca64e2b40",title:"genieeeSSPオーバーレイ(body内の必要記述)",tagText:'<div id="gn-overlay"></div>',weight:1}]},{id:"324b3239-3b75-445e-a40b-76d153595791",title:"3rdparty",components:[{id:"1824bfda-9023-40ea-915e-30fa2684a0a9",title:"3rdpartyKV",tagText:'<script>\n    function validate(label) {\n        if (!label) return \'\';\n        if (/^(fake_)?(control|treatment|label_only)_\\d+(\\.\\d+)?$/.test(label)) {\n            return label;\n        }\n\n        return \'\';\n    }\n\n    function is3pcAvailable(label) {\n        // NOTE. Mode Aの人々はラベルがついてても3pcが使える\n        if (label.includes("label_only")) {\n            return true;\n        }\n\n        if (label.includes("control_1")) {\n            return true;\n        }\n\n        return label === "";\n    }\n\n    if (\'cookieDeprecationLabel\' in navigator) {\n        navigator.cookieDeprecationLabel.getValue().then((label) => {\n            /**\n             * 例: fake_treatment_1.1, control_2, label_only_2, treatment_1.1\n             *\n             * Mode A (3rd Party Cookieが無効であるかのように振る舞ったりしましょうという取り決めをしている群):\n             *   control_1: CMAが決めた検証用の群。例えばPS R&M API (Privacy Sandbox Relevant and Measurement API) を使いつつも3rd Party Cookieは使わないなど\n             *   label_only: 各プラットフォームが検証に使う群\n             *\n             * Mode B (3rd Party Cookieが無効である群):\n             *   treatment: PS R&M APIが有効\n             *   control_2: PS R&M APIも無効\n             *\n             * fake_接頭辞はブラウザで検証用に各群を指定した場合につく\n             *\n             */\n            // NOTE: このラベルにはサーバー側から任意の値をセットできるので意図した値以外は送らない\n            const v = validate(label);\n            googletag.cmd.push(function () {\n                googletag.pubads().setTargeting("3pc_available", is3pcAvailable(v).toString());\n            });\n        });\n    } else {\n        googletag.cmd.push(function () {\n            googletag.pubads().setTargeting("3pc_available", "true");\n        });\n    }\n<\/script>\n',weight:1}]}],triggerEnabled:!0},{id:"168792b7-39a6-4bb5-a302-9f5aa0c457b8",title:"レコメンド（画像ページ専用）",condition:{url:{patterns:[{type:"string",value:"/photos/"}]},device:{kind:"sp"}},weightedParents:[{id:"abb8d818-b01b-49e3-b36a-7b7cd69b22df",title:"新しい比率出し分け親",components:[{id:"c22f0bd8-a326-483b-a6b1-990a66c75038",title:"アウトブレイン",tagText:'<script>\n// 挿入したいタグを記述\n// scriptタグは終了タグを分割して記述することに注意。\nconst tagsToBeSepareted = `\n//-----Scriptタグ（共通）-----//\n<script type="text/javascript" async="async" src="//widgets.outbrain.com/outbrain.js"></scr` + `ipt>\n//-----Scriptここまで-----//\n//-----divここから直貼り（Mobile gallery:MB_10）----//\n<div class="OUTBRAIN" data-src="DROP_PERMALINK_HERE" data-widget-id="MB_10"></div>\n`;\n\nfunction bootTagAsWritten(htmlString, targetDOM) {\n  const domFromHtmlString = new DOMParser().parseFromString(htmlString, "text/html");\n  const headChildren = domFromHtmlString.head?.children;\n  const bodyChildren = domFromHtmlString.body?.children;\n\n  const scriptClassName = `boottag-target-script-${new Date().getTime()}`;\n  Array.prototype.forEach.call(domFromHtmlString.getElementsByTagName(\'script\'), (scriptTag) => {\n    scriptTag.className = scriptClassName;\n  });\n\n  Array.prototype.forEach.call(headChildren, (node) => {\n    targetDOM.appendChild(node.cloneNode(true));\n  });\n  Array.prototype.forEach.call(bodyChildren, (node) => {\n    targetDOM.appendChild(node.cloneNode(true));\n  })\n\n  const scripts = Array.prototype.slice.call(\n    targetDOM.getElementsByClassName(scriptClassName)\n  )\n\n  const alternativeScripts = [];\n\n  scripts.forEach((original) => {\n    const alternative = self.document.createElement(\'script\');\n    const src = original.getAttribute(\'src\');\n    alternative.type = original.type;\n    if (src) {\n      alternative.src = src;\n    } else {\n      alternative.innerHTML = original.innerHTML;\n    }\n    alternative.async = false;\n    alternativeScripts.push({ alternative: alternative, original: original });\n  });\n\n  alternativeScripts.forEach((pair) => {\n    const alternative = pair.alternative;\n    const original = pair.original;\n    original.parentNode?.replaceChild(alternative, original);\n  });\n}\n\nfunction insertAdNextToBrowsiRectangle() {\n  const adDiv = document.createElement(\'div\');\n\n  footerElement = document.querySelector(\'footer\');\n  footerElement.insertAdjacentElement(\'beforebegin\', adDiv);\n  bootTagAsWritten(tagsToBeSepareted, adDiv);\n}\n\nfunction waitInsertionBrowsiRectangle() {\n  const browsiDivSelector = \'header ~ div[id*="browsi_wrapper"]\';  // 「headerタグの兄弟で、idに "browsi_wrapper" という文字列を含むdivタグ」を示す\n  const observeTargetSelector = \'.contentsAll\';\n  const browsiDivIdincludes = \'browsi_wrapper\';\n\n  if (document.querySelector(browsiDivSelector) !== null) {\n    insertAdNextToBrowsiRectangle();\n    return;\n  }\n\n  const observeConfig = {\n    attributes: false,\n    childList: true,\n    subtree: false,\n  }\n  const observeCallback = (mutationsList, observer) => {\n    for (let m of mutationsList) {\n      if (m.type === \'childList\' && m.addedNodes.length !== 0) {\n        // addedNodes は NodeList なので map がない\n        // Array.fromで配列にしつつ map も実施する\n        const existBrowsiDiv = Array.from(m.addedNodes, node => node.id).some(domId => domId.includes(browsiDivIdincludes));\n        if (existBrowsiDiv) {\n          observer.disconnect();\n          insertAdNextToBrowsiRectangle();\n        }\n      }\n    }\n  };\n\n  const observeElement = document.querySelector(observeTargetSelector);\n  const observer = new MutationObserver(observeCallback);\n  observer.observe(observeElement, observeConfig);\n}\n\n// browsi枠の追加を監視する\nif (document.readyState == "loading") {\n  document.addEventListener("DOMContentLoaded", waitInsertionBrowsiRectangle, false);\n} else {\n  waitInsertionBrowsiRectangle();\n}\n<\/script>',weight:90},{id:"95d28fc5-ee02-416f-8821-990c163fe32f",title:"UZOU",tagText:"<script>\n// 挿入したいタグを記述\n// scriptタグは終了タグを分割して記述することに注意。\nconst tagsToBeSepareted = `\n<div class=\"uz-trilltrill-47_sp uz-ny\" data-uz-url=\"%%PATTERN:url%%\"></div>\n<script async type=\"text/javascript\" src=\"https://speee-ad.akamaized.net/tag/trilltrill-47_sp/js/outer-frame.min.js\" charset=\"utf-8\"></scr` + `ipt>\n`;\n\nfunction bootTagAsWritten(htmlString, targetDOM) {\n  const domFromHtmlString = new DOMParser().parseFromString(htmlString, \"text/html\");\n  const headChildren = domFromHtmlString.head?.children;\n  const bodyChildren = domFromHtmlString.body?.children;\n\n  const scriptClassName = `boottag-target-script-${new Date().getTime()}`;\n  Array.prototype.forEach.call(domFromHtmlString.getElementsByTagName('script'), (scriptTag) => {\n    scriptTag.className = scriptClassName;\n  });\n\n  Array.prototype.forEach.call(headChildren, (node) => {\n    targetDOM.appendChild(node.cloneNode(true));\n  });\n  Array.prototype.forEach.call(bodyChildren, (node) => {\n    targetDOM.appendChild(node.cloneNode(true));\n  })\n\n  const scripts = Array.prototype.slice.call(\n    targetDOM.getElementsByClassName(scriptClassName)\n  )\n\n  const alternativeScripts = [];\n\n  scripts.forEach((original) => {\n    const alternative = self.document.createElement('script');\n    const src = original.getAttribute('src');\n    alternative.type = original.type;\n    if (src) {\n      alternative.src = src;\n    } else {\n      alternative.innerHTML = original.innerHTML;\n    }\n    alternative.async = false;\n    alternativeScripts.push({ alternative: alternative, original: original });\n  });\n\n  alternativeScripts.forEach((pair) => {\n    const alternative = pair.alternative;\n    const original = pair.original;\n    original.parentNode?.replaceChild(alternative, original);\n  });\n}\n\nfunction insertAdNextToBrowsiRectangle() {\n  const adDiv = document.createElement('div');\n\n  footerElement = document.querySelector('footer');\n  footerElement.insertAdjacentElement('beforebegin', adDiv);\n  bootTagAsWritten(tagsToBeSepareted, adDiv);\n}\n\nfunction waitInsertionBrowsiRectangle() {\n  const browsiDivSelector = 'header ~ div[id*=\"browsi_wrapper\"]';  // 「headerタグの兄弟で、idに \"browsi_wrapper\" という文字列を含むdivタグ」を示す\n  const observeTargetSelector = '.contentsAll';\n  const browsiDivIdincludes = 'browsi_wrapper';\n\n  if (document.querySelector(browsiDivSelector) !== null) {\n    insertAdNextToBrowsiRectangle();\n    return;\n  }\n\n  const observeConfig = {\n    attributes: false,\n    childList: true,\n    subtree: false,\n  }\n  const observeCallback = (mutationsList, observer) => {\n    for (let m of mutationsList) {\n      if (m.type === 'childList' && m.addedNodes.length !== 0) {\n        // addedNodes は NodeList なので map がない\n        // Array.fromで配列にしつつ map も実施する\n        const existBrowsiDiv = Array.from(m.addedNodes, node => node.id).some(domId => domId.includes(browsiDivIdincludes));\n        if (existBrowsiDiv) {\n          observer.disconnect();\n          insertAdNextToBrowsiRectangle();\n        }\n      }\n    }\n  };\n\n  const observeElement = document.querySelector(observeTargetSelector);\n  const observer = new MutationObserver(observeCallback);\n  observer.observe(observeElement, observeConfig);\n}\n\n// browsi枠の追加を監視する\nif (document.readyState == \"loading\") {\n  document.addEventListener(\"DOMContentLoaded\", waitInsertionBrowsiRectangle, false);\n} else {\n  waitInsertionBrowsiRectangle();\n}\n<\/script>",weight:10}]}],triggerEnabled:null},{id:"af23101f-a0c7-48cb-8b39-edfd1b260671",title:"SP_Android_ブラウザバックインステ",condition:{excludeUrl:{patterns:[{value:"/terms",type:"regexp"},{value:"/sitemap",type:"regexp"},{value:"/search",type:"regexp"}]},excludeReferrer:{patterns:[{value:"yahoo\\.co\\.jp",type:"regexp"},{value:"trilltrill\\.jp",type:"regexp"}]},device:{kind:"sp"},os:{kind:"android"},customFunction:{funcitonText:'function() {\n    function frequency() {\n        const freq_cookie_name = "fluct-adingo-historyback-interstial";\n\n        const cookie_pos = document.cookie.indexOf(freq_cookie_name + "=");\n        if (cookie_pos !== -1) {\n            const cookie_value_start_pos = cookie_pos + freq_cookie_name.length + 1;\n            let cookie_value_end_pos = document.cookie.indexOf(";", cookie_value_start_pos);\n            if (cookie_value_end_pos === -1) {\n                cookie_value_end_pos = document.cookie.length;\n            }\n            const cookie_value = decodeURIComponent(document.cookie.substring(cookie_value_start_pos, cookie_value_end_pos));\n            if (cookie_value === "true") { // "true"以外の値は想定されていない。その場合はcookieが存在しないのと同じ処理をする\n                return false;\n            }\n        }\n        return true;\n    }\n\n    function isNotSponsoredContent() {\n        const element = document.querySelectorAll("meta[property=\'article:tag\']").item(0);\n        return !(element && element.content === "スポンサード・コンテンツ");\n    }\n\n\n    return frequency() && isNotSponsoredContent();\n}'}},weightedParents:[{id:"9fe96620-ebad-4d3f-b66c-7368d1f86d48",title:"未設定",components:[{id:"99a18470-48d5-4085-a7bf-78e890164e08",title:"フリークエンシー制御用(ブラウザバックインステ)",tagText:'<script type="text/javascript">\n(function() {\n    var freq_cookie_name = "fluct-adingo-historyback-interstial";\n    var freq_interval_sec = 60 * 60;\n\n    var cookie_pos = document.cookie.indexOf(freq_cookie_name + "=");\n    if (cookie_pos !== -1) {\n        var cookie_value_start_pos = cookie_pos + freq_cookie_name.length + 1;\n        var cookie_value_end_pos = document.cookie.indexOf(";", cookie_value_start_pos);\n        if (cookie_value_end_pos === -1) {\n            cookie_value_end_pos = document.cookie.length;\n        }\n        var cookie_value = decodeURIComponent(document.cookie.substring(cookie_value_start_pos, cookie_value_end_pos));\n        if (cookie_value === "true") { // "true"以外の値は想定されていない。その場合はcookieが存在しないのと同じ処理をする\n            return false;\n        }\n    }\n\n    var expire = new Date();\n    expire.setTime(expire.getTime() + freq_interval_sec * 1000);\n    document.cookie = `${freq_cookie_name}=${encodeURIComponent("true")}; path=/; expires=${expire.toUTCString()}`;\n})();\n<\/script>',weight:1}]},{id:"33ae64b4-9afa-4f4c-b969-fbd3026cf67a",title:"未設定",components:[{id:"14035f58-076d-40bc-b974-56b6c6e8605b",title:"FLUCT_BROWSER_BACK_INTERSTITIAL",tagText:"\x3c!--      fluct グループ名「TRILL（インタースティシャル）（スマホ）_300x250_Web_オーバーレイ_インステ（ブラウザバック）」      --\x3e\r\n<script type=\"text/javascript\" src=\"https://pdn.adingo.jp/p.js\" async><\/script>\r\n<script type=\"text/javascript\">\r\n  var fluctAdScript = fluctAdScript || {};\r\n  fluctAdScript.cmd = fluctAdScript.cmd || [];\r\n  (function() {\r\n    var groupId = '1000146739';\r\n    var unitId = '1000242755';\r\n    \r\n    if (performance.navigation.type === performance.navigation.TYPE_BACK_FORWARD) {\r\n        return; // 戻る・進む時は何もしない\r\n    }\r\n    \r\n    history.scrollRestoration = \"manual\";\r\n    if (performance.navigation.type !== performance.navigation.TYPE_RELOAD) {\r\n      // リロードの場合は積んであるはずなのでpushしない\r\n      history.pushState({fluctPushedState: true}, document.title, location.href);\r\n    }\r\n    \r\n    var initialPageUrl = location.href;\r\n    window.addEventListener('popstate', function(event) {\r\n      if (location.hash === \"#google_vignette\") return;\r\n      var isSamePage = (location.href !== initialPageUrl || (history.state && history.state.fluctPushedState));\r\n      if (isSamePage) {\r\n          return;\r\n      }\r\n      var wrapperElemId = \"fluct_async_wrapper\";\r\n      showInterstitial(wrapperElemId);\r\n    });\r\n\r\n    function showInterstitial(divId) {\r\n        var div = document.createElement('div');\r\n        div.id = divId;\r\n        document.body.appendChild(div);\r\n        fluctAdScript.cmd.push(function (cmd) {\r\n            function doBack() { history.back(); }\r\n            cmd.requestAdByGroup(groupId)\r\n                .display('#' + divId, unitId)\r\n                .onRendered(function(res) {\r\n                    res.container.parentNode.querySelector('img').addEventListener('click', doBack);\r\n                });\r\n        });\r\n    }\r\n})();\r\n<\/script>",weight:0},{id:"64e3171c-97e1-421f-94a9-95becf4b0315",title:"UZOU_0401",tagText:'<div class="uz-trilltrill-46_sp uz-ny" data-uz-url="%%PATTERN:url%%"></div>\n<script async type="text/javascript" src="https://speee-ad.akamaized.net/tag/trilltrill-46_sp/js/outer-frame.min.js" charset="utf-8"><\/script>\n\n\x3c!--<div class="gsm-gcm-ad" style="margin: 0 auto; padding: 0; position: relative;">--\x3e\n\x3c!--  <script type="text/javascript" src="https://gcmadv-cdn.goldspotmedia.com/delivery/ad/2f5638f0-5af4-4255-a10c-d3a46f13fae1?gi=gcmInfo_2f5638f05af44255a10cd3a46f13fae1" async><\/script>--\x3e\n\x3c!--  <script type="text/javascript" src="https://gcmast-cdn.goldspotmedia.com/libs/gcm-player/1.10.1/gcm-player.min.js?tg=gcmInfo_2f5638f05af44255a10cd3a46f13fae1&tm=gcmMediaInfo_2f5638f05af44255a10cd3a46f13fae1" async><\/script>--\x3e\n\x3c!--</div>--\x3e\n',weight:15},{id:"baca4c0a-212d-4550-be14-7b98f7a2e4ec",title:"OUTBRAIN",tagText:'<div class="OUTBRAIN" data-src="DROP_PERMALINK_HERE" data-widget-id="MB_31"></div>\n<script type="text/javascript" async="async" src="//widgets.outbrain.com/outbrain.js"><\/script>\n\n\x3c!--<div class="gsm-gcm-ad" style="margin: 0 auto; padding: 0; position: relative;">--\x3e\n\x3c!--  <script type="text/javascript" src="https://gcmadv-cdn.goldspotmedia.com/delivery/ad/cbfc441f-2230-4abe-b881-856d702fcfa6?gi=gcmInfo_cbfc441f22304abeb881856d702fcfa6" async><\/script>--\x3e\n\x3c!--  <script type="text/javascript" src="https://gcmast-cdn.goldspotmedia.com/libs/gcm-player/1.10.1/gcm-player.min.js?tg=gcmInfo_cbfc441f22304abeb881856d702fcfa6&tm=gcmMediaInfo_cbfc441f22304abeb881856d702fcfa6" async><\/script>--\x3e\n\x3c!--</div>--\x3e\n',weight:70},{id:"985ee222-832f-4c2c-a166-7d77024261a9",title:"UZOU",tagText:'<div class="uz-trilltrill-45_sp uz-ny" data-uz-url="%%PATTERN:url%%"></div>\n<script async type="text/javascript" src="https://speee-ad.akamaized.net/tag/trilltrill-45_sp/js/outer-frame.min.js" charset="utf-8"><\/script>\n\n\x3c!--<div class="gsm-gcm-ad" style="margin: 0 auto; padding: 0; position: relative;">--\x3e\n\x3c!--  <script type="text/javascript" src="https://gcmadv-cdn.goldspotmedia.com/delivery/ad/2f5638f0-5af4-4255-a10c-d3a46f13fae1?gi=gcmInfo_2f5638f05af44255a10cd3a46f13fae1" async><\/script>--\x3e\n\x3c!--  <script type="text/javascript" src="https://gcmast-cdn.goldspotmedia.com/libs/gcm-player/1.10.1/gcm-player.min.js?tg=gcmInfo_2f5638f05af44255a10cd3a46f13fae1&tm=gcmMediaInfo_2f5638f05af44255a10cd3a46f13fae1" async><\/script>--\x3e\n\x3c!--</div>--\x3e\n',weight:15}]}],triggerEnabled:!0},{id:"602c1359-9ece-4bdb-be55-35fe76a13f8c",title:"SP",condition:{device:{kind:"sp"}},weightedParents:[{id:"1bc8aee4-8dc4-4544-b3d5-fd3c530777e7",title:"新しい比率出し分け親",components:[{id:"46c1368c-2155-489e-affe-121b643ab799",title:"横幅いっぱい拡大純広告(非表示時div削除)2024/07/29~",tagText:"<script async src=\"https://securepubads.g.doubleclick.net/tag/js/gpt.js\"><\/script>\n<script>\n    function insertHouseAd() {\n        // 自社広告をいれる要素を生成する\n        const houseAdUnitDiv = document.createElement('div');\n        houseAdUnitDiv.id = 'div-gpt-ad-1721120139122-0';\n        houseAdUnitDiv.style.textAlign = 'center';\n\n        // 端末のブラウザ横幅に合わせて拡大するCSSを投入\n        const scaleFactor = document.body.clientWidth / 320;\n        houseAdUnitDiv.style.transform = `scale(${scaleFactor})`;\n        houseAdUnitDiv.style.transformOrigin = 'top';\n\n        // 拡大した結果、はみ出さないようにするため上位のdivを用意して領域を確保する\n        const wrapOfHouseAdUnitDiv = document.createElement('div');\n        wrapOfHouseAdUnitDiv.style.width = `${320 * scaleFactor}px`;\n        wrapOfHouseAdUnitDiv.style.height = `${100 * scaleFactor}px`;\n        wrapOfHouseAdUnitDiv.style.marginBottom = '10px';\n        wrapOfHouseAdUnitDiv.appendChild(houseAdUnitDiv);\n\n        const targetDivParent = targetDiv.parentNode;\n        targetDivParent.insertBefore(wrapOfHouseAdUnitDiv, targetDiv);\n\n        // 作った要素に広告を出す、kaiyu3で取得された広告が空だった場合には、上位で拡張用に確保した領域ごとDOMを削除\n        googletag.cmd.push(() => {\n            const kaiyu3Slot = googletag.defineSlot('/21763395206/sp_kaiyu4', [ [320, 100], [300, 50], [320,50] ], 'div-gpt-ad-1721120139122-0').addService(googletag.pubads());\n            googletag.pubads().setTargeting(\"Separate_fluct\", \"2\");\n\n            googletag.pubads().addEventListener('slotRenderEnded', (event) => {\n                if (event.slot === kaiyu3Slot && event.isEmpty === true){\n                    wrapOfHouseAdUnitDiv.remove();\n                }\n            })\n            googletag.display('div-gpt-ad-1721120139122-0');\n            googletag.pubads().refresh([kaiyu3Slot]);\n        });\n    }\n\n    const targetDiv = document.getElementById('div-gpt-ad-1674639221250-0');\n    const readMoreButton = document.getElementById('readmore');\n\n    if (targetDiv && readMoreButton) {\n        readMoreButton.addEventListener('click', () => {\n            insertHouseAd();\n        })\n    }\n<\/script>",weight:0},{id:"b602e6c4-45ff-421a-b2cf-a80b6d5cf660",title:"横幅いっぱい拡大純広告~2024/07/29",tagText:"<script async src=\"https://securepubads.g.doubleclick.net/tag/js/gpt.js\"><\/script>\n<script>\n    const targetDiv = document.getElementById('div-gpt-ad-1674639221250-0');\n    const readMoreButton = document.getElementById('readmore');\n\n    function insertHouseAd() {\n        // 自社広告をいれる要素を生成する\n        const houseAdUnitDiv = document.createElement('div');\n        houseAdUnitDiv.id = 'div-gpt-ad-1721120139122-0';\n        houseAdUnitDiv.style.textAlign = 'center';\n\n        // 端末のブラウザ横幅に合わせて拡大するCSSを投入\n        const scaleFactor = document.body.clientWidth / 320;\n        houseAdUnitDiv.style.transform = `scale(${scaleFactor})`;\n        houseAdUnitDiv.style.transformOrigin = 'top';\n        console.log(`clientWidth is ${document.body.clientWidth}, width and height have been multiplied by ${scaleFactor}.`);\n\n        // 拡大した結果、はみ出さないようにするため上位のdivを用意して領域を確保する\n        const wrapOfHouseAdUnitDiv = document.createElement('div');\n        wrapOfHouseAdUnitDiv.style.width = `${320 * scaleFactor}px`;\n        wrapOfHouseAdUnitDiv.style.height = `${100 * scaleFactor}px`;\n        wrapOfHouseAdUnitDiv.style.marginBottom = '10px';\n        wrapOfHouseAdUnitDiv.appendChild(houseAdUnitDiv);\n\n        const targetDivParent = targetDiv.parentNode;\n        targetDivParent.insertBefore(wrapOfHouseAdUnitDiv, targetDiv);\n\n        // 作った要素に広告を出す\n        googletag.cmd.push(() => {\n            const  kaiyu3Slot = googletag.defineSlot('/21763395206/sp_kaiyu3', [[300, 100], [320, 100], [300, 50]], 'div-gpt-ad-1721120139122-0').addService(googletag.pubads());\n            googletag.display('div-gpt-ad-1721120139122-0');\n            googletag.pubads().refresh([kaiyu3Slot]);\n        });\n    }\n\n    if (targetDiv && readMoreButton) {\n        readMoreButton.addEventListener('click',() => {\n            insertHouseAd();\n        })\n    }\n<\/script>",weight:0},{id:"52812493-c2f1-40fb-a4d3-954bf1bbe4ad",title:"【kaiyu4】複数サイズ対応&AdX除外純広告拡大処理(2024/11/29~)",tagText:"<script async src=\"https://securepubads.g.doubleclick.net/tag/js/gpt.js\"><\/script>\n<script type=\"text/javascript\">\n    window.googletag = window.googletag || { cmd: [] };\n<\/script>\n<script>\n    (() => {\n        const adUnitDiv = document.createElement('div');\n        adUnitDiv.id = 'div-gpt-ad-1721120139122-0';\n        adUnitDiv.style.textAlign = 'center';\n\n        const wrapOfAdUnitDiv = document.createElement('div');\n        wrapOfAdUnitDiv.style.marginBottom = '10px';\n        wrapOfAdUnitDiv.appendChild(adUnitDiv);\n\n        function expandAd(creativeWidth, creativeHeight) {\n            // 端末のブラウザ横幅に合わせて拡大\n            const scaleFactor = document.body.clientWidth / creativeWidth;\n            adUnitDiv.style.transform = `scale(${scaleFactor})`;\n            adUnitDiv.style.transformOrigin = 'top';\n\n            // 拡大した結果はみ出さないように、上位のdivも拡大\n            wrapOfAdUnitDiv.style.width = `${creativeWidth * scaleFactor}px`;\n            wrapOfAdUnitDiv.style.height = `${creativeHeight * scaleFactor}px`;\n            wrapOfAdUnitDiv.style.marginBottom = '10px';\n        }\n\n        function insertAd() {\n            const targetDivParent = targetDiv.parentNode;\n            targetDivParent.insertBefore(wrapOfAdUnitDiv, targetDiv);\n\n            googletag.cmd.push(() => {\n                const kaiyu4Slot = googletag.defineSlot('/21763395206/sp_kaiyu4', [[320, 100], [320, 50]], 'div-gpt-ad-1721120139122-0').addService(googletag.pubads());\n\n                googletag.pubads().addEventListener('slotRenderEnded', (event) => {\n                    if (event.slot === kaiyu4Slot) {\n                        if (event.isEmpty) {\n                            wrapOfAdUnitDiv.remove();\n                        } else {\n                            switch (event.lineItemId) {\n                                case 6850275261: //320x50バナーの純広告申込情報ID\n                                    expandAd(320, 50);\n                                    break;\n                                case 6853724555: //320x100バナーの純広告申込情報ID\n                                    expandAd(320, 100);\n                                    break;\n                            }\n                        }\n                    }\n                });\n                googletag.display('div-gpt-ad-1721120139122-0');\n                googletag.pubads().refresh([kaiyu4Slot]);\n            })\n        }\n\n        const targetDiv = document.getElementById('div-gpt-ad-1674639221250-0');\n        const readMoreButton = document.getElementById('readmore');\n\n        if (targetDiv && readMoreButton) {\n            readMoreButton.addEventListener('click', () => {\n                insertAd();\n            })\n        }\n\n    })();\n<\/script>\n",weight:0}]}],triggerEnabled:null},{id:"6c461029-295f-4c70-a1b3-f1ec9325bff0",title:"【テスト環境検証用】常に表示",condition:{url:{patterns:[{type:"string",value:"trilltrill-dev.jp"}]}},weightedParents:[{id:"a8d8b795-78a2-4f50-ad05-9a6afbda5536",title:"アンカーとSPオーバーレイの出し分け用",components:[{id:"2bf4efa3-0acb-4d6c-9f65-3b470ceaf576",title:"特定のクリエイティブIDかつオーバーレイユニットのときにヘッダーオーバーレイを出さないようにする",tagText:"<script>\nfunction isHeaderOverlayAllowed(event) {\n    const deniedOverlayUnitPath = '/21763395206/overlay/SP_overlay_c1';\n    const deniedCreativeIds = [\n        138428980535, // fluct: 使用していない\n        138428980799, // fluct: 使用している(DA_iOS)\n        138451825645, // fluct: 使用している(DFL)\n        138484202287, // fluct: 使用している(DA_And)\n        138429304932, // GMO: 使用している\n        138429955819, // GMO: 使用していない\n        138451221812, // GMO: 使用している\n        138474903492, // GMO: 使用していない\n        138482650378, // i-mobile: 使用していない\n        138490409052, // geniee: 使用していない\n        138490637762, // geniee: 使用していない\n        138501137575, //fluct: テスト環境用(c3_DA_And)\n        138501135964 //fluct: テスト環境用(c3_DA_iOS)\n    ];\n    \n    /* \n    下記2点どちらもを満たす場合にtrueが返り、上部アンカーがメディアHTML上から呼び出される\n\n    1. 下部overlayを埋めたGAMクリエイティブのIDが上記'deniedCreativeIds'に含まれて「いない」\n    2. 下部overlayのAdUnitPathが'/21763395206/overlay/SP_overlay_c1'「ではない」\n\n    ... つまり「AdXないしはHB(またはOB)」が「'/21763395206/overlay/SP_overlay'から配信される」場合にのみ、上部アンカーは表示される *2024/11/06現在\n      + テスト環境では「AdXないしはHB(またはOB)」が「'/21763395206/overlay/SP_overlay_c3'から配信される」場合にのみ、上部アンカーは表示される *2024/12/10現在\n    */ \n    \n    console.log('Check headerOverlay can be called.');\n    console.log(`Creative ID: ${event.creativeId}`)\n\n    return !deniedCreativeIds.includes(event.creativeId) && event.slot.getAdUnitPath() !== deniedOverlayUnitPath ;\n}\n<\/script>",weight:1}]}],triggerEnabled:!0}]}},w="fluct_one_debug";try{!function(){window.fluctOneScript=window.fluctOneScript||{},window.fluctOneScript.config=x,window.fluctOneScript.enableDebugMode=()=>{r.setDebugMode(!0),function(e,t){try{return localStorage.setItem(e,t)}catch(e){return}}(w,"true")};const e=y(w)||function(e){try{return localStorage.getItem(e)}catch(e){return null}}(w)||"false";r.setDebugMode("true"===e),r.setContextProperty("siteId",x.site.id),r.setContextProperty("siteCode",x.site.siteCode)}(),function(){const e=y("fluct_one_preview");!e||window.fluctOneScript.enablePreview?x.site.triggers.forEach((e=>{v(e.condition)&&e.weightedParents.forEach((t=>{const n=_(t);n&&(h(n.tagText),r.info(`trigger ${e.id} (${e.title}) fired, write tag component ${n.id} (${n.title}).`,{triggerId:e.id,triggerTitle:e.title,condition:e.condition,component:n},100))}))})):(window.fluctOneScript.enablePreview=!0,function(e,t=document){if(b(t))document.write(`<script src="${e}"><\/script>`);else{const t=document.createElement("script");t.src=e,t.async=!0,document.head.appendChild(t)}}(`${document.currentScript.src}?onePreview=${e}`))}()}catch(e){e instanceof Error?r.error(`${e.message}`,e):r.error("Unknown Error",{error:e})}}();
