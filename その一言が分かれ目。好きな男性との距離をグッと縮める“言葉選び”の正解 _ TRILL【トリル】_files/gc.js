/*! (c) 2024 GMO NIKKO Inc. */
((callback) => {"use strict";window.GMOSSP_DATA=window.GMOSSP_DATA||[];window.GMOSSP_DATA["g944327"]=window.GMOSSP_DATA["g944327"]||{"ni":0,"cdb":[{"os_id":1,"zone_id":1687395},{"os_id":2,"zone_id":1687395}],"la":[15]};callback();})(()=>{"use strict";const e="chromium",t="etc",n="safari",i=1,r=2,s=4;function o(){return screen.width}function c(e){return e.h*o()/e.w}function a(){return navigator.userAgent}function l(){const e=a().toLowerCase();return/iphone|ipad/i.test(e)?i:/android/i.test(e)?r:s}function d(){const i=a().toLowerCase();return i.includes("edg")||i.includes("crios")||i.includes("chrome")?e:i.includes("safari")||i.includes("iphone")||i.includes("ipad")||i.includes("ipod")?n:i.includes("android")?e:t}const u="develop",h="develop2",p="stage",f="production",g="https://dev.sp.gmossp-sp.jp",m="https://dev2.sp.gmossp-sp.jp",w="https://ad.ssp.gcp.gmo-am.dev",v="https://sp.gmossp-sp.jp",_="https://dev.sp.gmossp-sp.jp",b="https://dev2.sp.gmossp-sp.jp",y="https://beacon.ad.ssp.gcp.gmo-am.dev",x="https://beacon.sp.gmossp-sp.jp",S="https://dev.sp.gmossp-sp.jp",$="https://cdn.sp.gmossp-sp.jp",E="https://sp-test-cdn.gmossp-sp.jp",A="https://sp-cdn.gmossp-sp.jp",I="https://e.gmossp-sp.jp";const M=16,k=1e3,O=1,z=4,U=7,C=9,L=1;function P(e){let t="";for(let n=0;n<e;n++)t+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789"[Math.floor(62*Math.random())];return t}function j(e){return new Promise((t=>setTimeout(t,e)))}function T(){return document.createElement("script")}function N(){const e=T();return e.async=!0,e}function G(){const e=document.createElement("iframe");return e.setAttribute("frameborder","0"),e.setAttribute("allowtransparency","true"),e.setAttribute("marginheight","0"),e.setAttribute("marginwidth","0"),e.setAttribute("hspace","0"),e.setAttribute("vspace","0"),e.setAttribute("scrolling","no"),e.setAttribute("title","GMOSSP iframe"),e}function D(e){let t="";return e.forEach((e=>{t+=`<img alt="" src="${e}">`})),`<div style="position:absolute;left:0px;top:0px;visibility:hidden;">${t}</div>`}const H=10,V={threshold:.5},R=1e3;const q={rootMargin:"800% 0px 800% 0px"};function F(e,t,n){const i=new URLSearchParams({a:e.substring(1),b:l().toString(),c:t});return`${function(e){switch(e){case p:case u:return E}return A}(n)}/datastream/spacetag/spacetag.gif?${i.toString()}`}function W(e,t){return fetch(Z(e,t),{method:"GET",mode:"cors",credentials:"include",cache:"no-store"}).then((e=>{e.ok})).catch((e=>{}))}function Z(e,t){const n=new URLSearchParams({a:e,b:t,c:location.href});return`${I}/datastream/e/e.gif?${n.toString()}`}class J{setValue(t,n,i,r){const s=new Date;s.setTime(s.getTime()+i);let o=`${t}=${n};expires=${s.toUTCString()};path=/`;r&&(o+=";domain=.gmossp-sp.jp"),[e].includes(d())&&(o+=";SameSite=None;Secure"),document.cookie=o}getValue(e){let t=[];try{t=decodeURIComponent(document.cookie).split(";")}catch(e){return""}const n=`${e}=`;for(let e=0;e<t.length;e++){let i=t[e];if(i){for(;" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(n))return i.substring(n.length,i.length)}}return""}}class Y{setValue(e,t){try{window.localStorage.setItem(e,t)}catch(e){}}getValue(e){try{const t=window.localStorage.getItem(e);if(null!==t&&0<t.length)return t}catch(e){}return""}}class X{setValue(e,t){try{window.sessionStorage.setItem(e,t)}catch(e){}}getValue(e){try{const t=window.sessionStorage.getItem(e);if(null!==t&&0<t.length)return t}catch(e){}return""}rmValue(e){try{window.sessionStorage.removeItem(e)}catch(e){}}}class B{constructor(){this.c=new J,this.l=new Y,this.s=new X}setValue(e,t,n,i){return e.c&&"number"==typeof n&&"boolean"==typeof i&&this.c.setValue(e.c,t,n,i),e.l&&this.l.setValue(e.l,t),e.s&&this.s.setValue(e.s,t),""}getValue(e){let t="";return e.c&&(t=this.c.getValue(e.c),0!=t.length)||e.l&&(t=this.l.getValue(e.l),0!=t.length)||e.s&&(t=this.s.getValue(e.s),0!=t.length)?t:""}rmValue(e){e.s&&this.s.rmValue(e.s)}}const K={c:"GMOSSP_USER",l:"gmoam_xid"},Q=6,ee=8;const te=1000283,ne=`https://dmp.im-apps.net/scripts/im-uid-hook.js?cid=${te}`,ie=`_im_uid.${te}`;function re(e){return e.c.getValue(ie)}const se=1010,oe="https://static.criteo.net/js/ld/publishertag.js",ce=3e3,ae=5;function le(e,t){const n={placements:[]},i=l();let r=-1;return t.forEach((t=>{i==t.os_id?n.placements.push({slotid:de(t.zone_id,e),zoneid:t.zone_id,nativeCallback:()=>{}}):r=t.zone_id})),0===n.placements.length&&-1!=r&&n.placements.push({slotid:de(r,e),zoneid:r,nativeCallback:()=>{}}),n}function de(e,t){return`${fe}-${e}-${t}`}function ue(e){return{s:e}}function he(e){const t=[];if("function"!=typeof e.getUserIdsAsEids)return t;const n=e.getUserIdsAsEids();return n&&n.forEach((e=>{e.uids&&e.uids.forEach((n=>{e.source&&n.id&&pe.includes(e.source)&&t.push({source:e.source,uids:[{id:n.id,atype:n.atype||1}]})}))})),t}const pe=["criteo.com","intimatemerger.com"],fe="gmossp-ad-unit",ge="0..1000:1;1000..5000:10",me=37;const we=1018;const ve=25;var _e=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{a(i.next(e))}catch(e){s(e)}}function c(e){try{a(i.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}a((i=i.apply(e,t||[])).next())}))};const be=11;function ye(e,t){if(!t.result||!t.result.ads)return"";const n=t.result;let i=0,r="";if(t.result.ads.forEach((t=>{if(e.adNum<=i)return;if(!e.ad||0==e.ad.length||!e.imobilePid)return;const s=t.advid?t.advid.toString():"",o=t.eid?t.eid.toString():"",c=n.asid?n.asid.toString():"",a=$e(s,o);r+=e.ad.replace("{{ClickUrl}}",xe(e.imobilePid,c,s,t.ctid||"",t.vh||"")).replace("{{ClickUrl_escape}}",Se(e.imobilePid,c,s,t.ctid||"",t.vh||"")).replace("{{title}}",t.title||"").replace("{{description}}",t.description||"").replace("{{ImageUrl}}",a).replace("{{ImageUrl2}}",a).replace("{{ImageUrlSmall}}",a).replace("{{ImageUrl2Small}}",a).replace("{{sponsor_name}}",t.sponsored||"").replace(/{{optout[a-z_]+}}/,"").replace("{{i_png}}","").replace("{{ab_png}}","").replace(/Panel/,""),i++})),0==r.length)return"";let s="";return e.adCss&&0<e.adCss.length&&(s=e.adCss),e.adHeaderTag&&0<e.adHeaderTag.length&&(s+=e.adHeaderTag),s+=r,e.adFooterTag&&0<e.adFooterTag.length&&(s+=e.adFooterTag),s}function xe(e,t,n,i,r){return`https://spsvc3.i-mobile.co.jp/ad_link.ashx?${new URLSearchParams({pid:e,asid:t,advid:n,ctid:i,vh:r}).toString()}`}function Se(e,t,n,i,r){const s=new URLSearchParams({pid:e,asid:t,advid:n,ctid:i,vh:r});return encodeURIComponent(`https://spsvc3.i-mobile.co.jp/ad_link.ashx?${s.toString()}`)}function $e(e,t){return`https://spcdnsp.i-mobile.co.jp/ad_creative.ashx?${new URLSearchParams({advid:e,eid:t}).toString()}`}const Ee=15,Ae="gmoyda",Ie="https://yads.c.yimg.jp/js/yads-async.js",Me="https://s.yimg.jp/images/listing/tool/cv/ytag.js",ke='window.yjDataLayer=window.yjDataLayer||[];function ytag(){yjDataLayer.push(arguments);}ytag({type:"ycl_cookie",config:{ycl_use_non_cookie_storage:true}});';class Oe{isMyself(){return this.context?1:0}}const ze="AMP-AD",Ue="AMP-EMBED";class Ce extends Oe{setContext(e){return"object"==typeof e.context&&[ze,Ue].includes(e.context.tagName)?this.context=e.context:"object"==typeof e.AMP_CONTEXT_DATA&&[ze,Ue].includes(e.AMP_CONTEXT_DATA.tagName)&&(this.context=e.AMP_CONTEXT_DATA),this}getMetaUrl(){return this.context.canonicalUrl}}class Le extends Oe{constructor(){super(...arguments),this.expanded=!1,this.inviewed=!1}setContext(e){return"object"==typeof e.$sf&&(this.context=e),this}getMetaUrl(){return this.context.document.referrer}setRegister(e){if(!V.threshold||!this.context.$sf.ext||"function"!=typeof this.context.$sf.ext.register)return;const t=V.threshold;if(Array.isArray(t))return;let n=0,i=null;this.context.$sf.ext.register(e.ad_size.w,e.ad_size.h,(r=>{if(!this.context.$sf.ext||"function"!=typeof this.context.$sf.ext.inViewPercentage)return;const s=this.context.$sf.ext.inViewPercentage();if(0<s)switch(r){case"expanded":this.expanded=!0;break;case"geom-update":this.delayExpand(e)}!this.inviewed&&!i&&100*t<s?i=setInterval((()=>{if(n+=H,R<=n){e.space_id;const t=this.context.document.querySelector(".GoogleActiveViewElement");t&&t.insertAdjacentHTML("beforebegin",D(e.iv_beacon)),i&&clearInterval(i),this.inviewed=!0}}),H):i&&(clearInterval(i),i=null)}))}delayExpand(e){if(this.expanded||e.mode&&L!==e.mode&&![O,z,U].includes(e.pos))return;if(!this.context.$sf.ext||"function"!=typeof this.context.$sf.ext.collapse||"function"!=typeof this.context.$sf.ext.expand)return;this.context.$sf.ext.collapse();let t=0,n=0;if("function"==typeof this.context.$sf.ext.geom){this.context.$sf.ext.geom();const i=this.context.$sf.ext.geom().exp;t=0<i.r?i.r:0,[O,z,U].includes(e.pos)&&(n=0<i.b?i.b:0)}let i=!1;if("function"==typeof this.context.$sf.ext.supports){i=this.context.$sf.ext.supports()["exp-push"]}const r={l:0,r:t,t:0,b:n,push:i};this.context.$sf.ext.expand(r)}}function Pe(){const e=new Ce,t=new Le,n={chainWindow:[window],maxTopWindow:window,ancestor:Te(),currentUrl:null,currentReferer:null,amp:e,safeframe:t,metaUrl:null};try{n.currentUrl=new URL(window.location.href)}catch(e){}let i=0,r="",s=window;do{i++;try{if(s.parent.document.body.innerHTML){s=s.parent,n.chainWindow.push(s),n.maxTopWindow=s,n.currentUrl=new URL(s.location.href);const e=Ne(s.document);0<e.length&&(r=e)}}catch(e){try{n.currentUrl=new URL(s.location.href)}catch(e){}break}}while(s!==window.top&&i<je);return n.currentReferer=function(e){const t=e.maxTopWindow.document.referrer;if(0<t.length)try{return new URL(t)}catch(e){}return null}(n),n.amp.setContext(n.maxTopWindow),n.safeframe.setContext(n.maxTopWindow),0===r.length&&(1===n.amp.isMyself()?r=e.getMetaUrl():1===n.safeframe.isMyself()&&(r=t.getMetaUrl())),n.metaUrl=function(e){if(0<e.length){if(/^\/\//.test(e))try{const t=new URL(window.location.href);e=t.protocol?`${t.protocol}${e}`:`https:${e}`}catch(t){e=`https:${e}`}try{return new URL(e)}catch(e){}}return null}(r),n}const je=10;function Te(){try{if(!window.location.ancestorOrigins)return window.location.host;const e=window.location.ancestorOrigins.length;if(0<e&&window.location.ancestorOrigins[e-1]){const t=new URL(window.location.ancestorOrigins[e-1]||"");if(0<t.host.length)return t.host}}catch(e){}return window.location.host}function Ne(e){let t=function(e){try{const t=e.querySelector("link[rel='canonical']");if(null!==t)return t.href}catch(e){}return""}(e);return 0!=t.length?t:(t=function(e){try{const t=e.querySelector("meta[property='og:url']");if(null!==t)return t.content}catch(e){}return""}(e),0!=t.length?t:"")}class Ge{constructor(e,t={}){var n,i;this.targetPositions=["fixed","absolute","sticky"],this.observer=null,this.isRunning=!1,this.targetIframe=e,this.maxZIndex=null!==(n=t.maxZIndex)&&void 0!==n?n:2147483647,this.newZIndex=null!==(i=t.newZIndex)&&void 0!==i?i:2147483646;new MutationObserver((()=>{"none"===e.style.display?this.isRunning&&this.stop():this.start()})).observe(this.targetIframe,{attributes:!0,attributeFilter:["style"]}),"none"!==this.targetIframe.style.display&&this.start();const r=new MutationObserver((t=>{for(const n of t)"childList"===n.type&&n.removedNodes.forEach((t=>{t===e&&(this.stop(),r.disconnect())}))}));r.observe(e.parentNode,{childList:!0,subtree:!1})}start(){this.isRunning||(this.setupObserver(),this.scanExistingElements(),this.isRunning=!0)}stop(){this.observer&&(this.observer.disconnect(),this.observer=null),this.isRunning=!1}isActive(){return this.isRunning}setupObserver(){this.observer=new MutationObserver((e=>{this.handleMutation(e)}));this.observer.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["style"]})}scanExistingElements(){this.checkAndUpdateZIndex(document.body)}checkAndUpdateZIndex(e){if(e.nodeType!==Node.ELEMENT_NODE)return;const t=e;if(this.isExcludedElement(t))return;const n=window.getComputedStyle(t),i=n.position;if(this.targetPositions.includes(i)){parseInt(n.zIndex)>=this.maxZIndex&&t.style.setProperty("z-index",this.newZIndex.toString(),"important")}else Array.from(t.children).forEach((e=>{this.checkAndUpdateZIndex(e)}))}isExcludedElement(e){return this.targetIframe==e}handleMutation(e){e.forEach((e=>{e.addedNodes.length&&e.addedNodes.forEach((e=>{this.checkAndUpdateZIndex(e)})),"attributes"===e.type&&"style"===e.attributeName&&this.checkAndUpdateZIndex(e.target)}))}}var De=function(e,t,n,i){return new(n||(n=Promise))((function(r,s){function o(e){try{a(i.next(e))}catch(e){s(e)}}function c(e){try{a(i.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}a((i=i.apply(e,t||[])).next())}))};function He(){if(!document.body)return!1;const e=new DocumentFragment;return e.appendChild(Re()),e.appendChild(function(){const e=N();return e.src=oe,e}()),e.appendChild(function(){const e=N();return e.src=ne,e}()),document.body.appendChild(e),!0}const Ve=`${$}/view/gmossp_sync.html`;function Re(){const e=function(){const e=G();return e.setAttribute("sandbox","allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"),e.setAttribute("width","0"),e.setAttribute("height","0"),e.setAttribute("style","height:0px;width:0px;display:none;border:none;"),e}();return e.src=Ve,e}function qe(e,t,n){return De(this,void 0,void 0,(function*(){try{let i=null,r=document.querySelectorAll(`div[class=gmossp_core_${e}]`);if(0===r.length&&document.currentScript){const t=document.currentScript;if(t.parentNode!==document.head)t.insertAdjacentHTML("afterend",`<div class="gmossp_core_${e}"></div>`);else if("MutationObserver"in window){if(!(yield function(e){return new Promise((t=>{const n=new MutationObserver((i=>{Fe(e)&&(n.disconnect(),t(i))}));n.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}))}(e)))return}else{let t=!1;for(let n=0;n<3e3;n++){if(Fe(e)){t=!0;break}yield j(1)}if(!t)return}r=document.querySelectorAll(`div[class=gmossp_core_${e}]`)}let s=1,o="";for(let e=0;e<=r.length;e++){const t=r[e];if(!t)continue;const n=t.getAttribute("data-check");if(!n||!parseInt(n,10)){t.setAttribute("data-check",s.toString()),o=P(24),t.setAttribute("data-tagid",o),i=t;break}s=parseInt(n,10)+1}if(!i)throw new Error("!ad");const c=yield We(e);if(c.la){const e=new DocumentFragment;c.la.forEach((t=>{if(t===Ee)e.appendChild(function(){const e=N();return e.src=Ie,e}()),e.appendChild(function(){const e=N();return e.src=Me,e}()),e.appendChild(function(){const e=T();return e.innerHTML=ke,e}())})),0<e.childNodes.length&&document.body.appendChild(e)}if(window.GMOSSP_SYND,window.GMOSSP_SYND&&window.GMOSSP_SYND[e]&&"function"==typeof window.GMOSSP_SYND[e]){const t=window.GMOSSP_SYND[e];if(t&&!t())return}else if(void 0!==window.GmosspEnableAd){const e=window.GmosspEnableAd;if(window.GmosspEnableAd=void 0,!1===e)return}if(function(e,t,n,i){fetch(F(e,t,i),{method:"GET",mode:"cors",credentials:"include",cache:"no-store"}).then((e=>{if(!e.ok||!e.headers)return;const t=e.headers.get("X-Lat"),i=e.headers.get("X-Lon");if(!t||!i)return;const r={lat:t,lon:i};n.setValue({s:"GMOSSP_GEO"},JSON.stringify(r))})).catch((e=>{}))}(e,o,t,c.dev.mode),function(e,t,n){if(0!==t.cdb.length)try{window.Criteo=window.Criteo||{},window.Criteo.events=window.Criteo.events||[],window.Criteo.events.push((()=>{if("function"!=typeof window.Criteo.SetLineItemRanges||"function"!=typeof window.Criteo.RequestBids)return;if(window.Criteo.SetLineItemRanges(ge),"function"==typeof window.Criteo.SetIdentities){const e=[];window.pbjs&&e.push(...he(window.pbjs)),window.pbFlux&&"function"==typeof window.pbFlux.getPbjsInstance&&e.push(...he(window.pbFlux.getPbjsInstance()));const t=re(n);if(0<t.length&&e.push({source:"intimatemerger.com",uids:[{id:t,atype:1}]}),0<e.length){const t=[];e.forEach((e=>{t.some((t=>e.source===t.source))||t.push(e)})),window.Criteo.SetIdentities(t)}}const i=le(e,t.cdb);window.Criteo.RequestBids(i,(e=>{e.forEach((e=>{if(!e.cpm||!e.impressionId||!e.zoneId)return;let t="",i="",r="",s="",o="",c="",a="",l="",d="";const u=[];if(e.displayUrl)r=e.displayUrl;else{if(!e.nativePayload)return;const n=e.nativePayload;if(!n.products||!n.impression_pixels)return;let r=!0;if(n.products.forEach((e=>{e.click_url?(s=e.click_url,l=e.description||"",d=e.title||"",e.image&&(o=e.image.url||"")):r=!1})),!r)return;if(n.advertiser){const e=n.advertiser;e.description&&(t=e.description),e.domain&&(i=e.domain)}if(n.impression_pixels&&n.impression_pixels.forEach((e=>{e.url&&u.push(e.url)})),n.privacy){const e=n.privacy;e.optout_click_url&&(c=e.optout_click_url),e.optout_image_url&&(a=e.optout_image_url)}}const h=ue(e.impressionId);let p=[];const f=n.getValue(h);if(f)try{p=JSON.parse(f)}catch(e){e instanceof Error&&W(e.message,"")}ae<p.length||(p.push({impid:e.impressionId,cpm:e.cpm,zoneid:e.zoneId,advertiser_description:t,advertiser_domain:i,click_url:s,displayurl:r,image_url:o,impression_pixels:u,optout_click_url:c,optout_image_url:a,product_description:l,title:d}),n.setValue(h,JSON.stringify(p)))}))}),ce)}))}catch(e){e instanceof Error&&W(e.message,"")}}(s,c,t),0===c.ni)return void Je(i,e,c,s,o,t,n);!function(e,t,n,i,r,s){"IntersectionObserver"in window?new IntersectionObserver(((o,c)=>{o.forEach((o=>{o.isIntersecting&&(Je(e,n,t,i,r,s,[]),c.unobserve(o.target))}))}),q).observe(e):Je(e,n,t,i,r,s,[])}(i,c,e,s,o,t)}catch(t){t instanceof Error&&W(t.message,e)}}))}function Fe(e){if(!document.body)return!1;return 0!==document.querySelectorAll(`div[class=gmossp_core_${e}]`).length}function We(e){return De(this,void 0,void 0,(function*(){const t={ni:0,cdb:[],la:[],dev:{test_network_id:[],gmoam_preview:0,mode:f,test_space_id:-1,space_network_id:-1,ad_size_id:-1,rtb_size_id:-1}};for(let n=0;n<30;n++){if(window.GMOSSP_DATA&&Array.isArray(window.GMOSSP_DATA)){const n=window.GMOSSP_DATA[e];if(n){const e=n.ni;(e||0===e)&&(t.ni=e);const i=n.cdb;i&&(t.cdb=i);const r=n.la;r&&(t.la=r);const s=n.dev;if(s){const e=s.test_network_id;e&&(t.dev.test_network_id=e);const n=s.gmoam_preview;(n||0===n)&&(t.dev.gmoam_preview=n);const i=s.mode;i&&(t.dev.mode=i);const r=s.test_space_id;r&&(t.dev.test_space_id=r);const o=s.space_network_id;o&&(t.dev.space_network_id=o);const c=s.ad_size_id;c&&(t.dev.ad_size_id=c);const a=s.rtb_size_id;a&&(t.dev.rtb_size_id=a)}break}}yield j(1)}return t}))}const Ze=1;function Je(e,t,n,i,r,s,o){return De(this,void 0,void 0,(function*(){const c=Pe();try{const a=yield fetch(function(e,t){const n=new URLSearchParams({space_id:e,r:Math.random().toString()});return`${function(e){if(e.mode)switch(e.mode){case p:return w;case u:return g;case h:return m}return v}(t)}/ads/ssp.ad?${n.toString()}`}(t,n.dev),function(e,t,n,i,r,s){return{method:"POST",body:JSON.stringify(Ye(e,t,n,i,r,s)),mode:"cors",credentials:"include",cache:"no-store"}}(c,n,i,r,s,o));if(!a.ok)return;const l=yield a.json();if(!l.ad||0==l.ad.length)return;!function(e,t,n,i,r,s,o,c){De(this,void 0,void 0,(function*(){const a=[];switch(r.la){case be:if(r.isClientAdCall&&1==r.isClientAdCall){const e=yield function(e){return _e(this,void 0,void 0,(function*(){try{const t=yield fetch(e.adCallUrl,{method:"GET",mode:"cors",credentials:"include",cache:"no-store"});if(!t.ok)return"";const n=yield t.json();return ye(e,n)}catch(t){t instanceof Error&&W(t.message,e.space_id.toString())}return""}))}(r);a.push(e)}else a.push(Xe(r));break;case se:a.push(function(e,t,n){if(!e.ad||0==e.ad.length)return"";let i=e.ad;if(!e.zoneids||0==e.zoneids.length)return"";let r=e.zoneids.length;const s=new RegExp("{{ImageUrl2?}}","g"),o=(i.match(s)||[]).length;0<o&&(r=Number.isInteger(o/r)?o/r:r);let c="",a="",l="",d="",u="",h="",p="";return e.zoneids.forEach((e=>{const s=ue(de(e,t));let o=[];const f=n.getValue(s);if(f)try{o=JSON.parse(f)}catch(e){e instanceof Error&&W(e.message,"")}o&&(o.some((e=>{if(e.displayurl)i+=`<script src="${e.displayurl}"><\/script>`;else{c=e.click_url,a=e.title,l=e.product_description,d=e.advertiser_description,u=e.optout_click_url,h=e.optout_image_url,p=e.image_url,i=i.replace("{{ClickUrl}}",c).replace("{{title}}",a).replace("{{description}}",l).replace("{{sponsor_name}}",d).replace("{{optout_click_url}}",u).replace("{{optout}}",h);for(let e=0;e<r;e++)i=i.replace("{{ImageUrl}}",p).replace("{{ImageUrl2}}",p);0<e.impression_pixels.length&&(i+=D(e.impression_pixels))}return!0})),o.shift(),0==o.length?n.rmValue(s):n.setValue(s,JSON.stringify(o)))})),i.replace(/{{ClickUrl}}/g,c).replace(/{{title}}/g,a).replace(/{{description}}/g,l).replace(/{{sponsor_name}}/g,d).replace(/{{optout_click_url}}/g,u).replace(/{{optout}}/g,h).replace(/{{space_id}}/g,e.space_id.toString()).replace(/{{optout[a-z_]+}}/g,"").replace(/{{ImageUrl}}/g,p).replace(/{{ImageUrl2}}/g,p)}(r,s,c));break;default:a.push(Xe(r))}try{const l=yield Promise.all(a);!function(e,t,n,i,r,s,o,c,a){De(this,void 0,void 0,(function*(){const l=r.space_id.toString(),d=`gmossp_${l}_${c}`;let u="";if(s.forEach((e=>{u+=`<div id="${d}" class="gmossp_adnw_${l} ${d}">${e}</div>`})),0===u.length)return;let h="";r.ext_tag&&0<r.ext_tag.length&&(h=r.ext_tag),h+=it(c,r.la);let p="",f="width:100%;height:0px;",g="",m="";switch(r.pos){case z:0==n.safeframe.isMyself()&&(p=D(r.iv_beacon)),r.la==ee&&(g="<center>",m="</center>"),f+="z-index:2147483647;left:0px;position:fixed;",Ze==r.overlay_type?f+="top:0px;":f+="bottom:0px;";break;case U:0==n.safeframe.isMyself()&&(p=D(r.iv_beacon)),g=st(r.la),m="</div></div></div></div>",f="width:100%;height:100%;z-index:2147483647;top:0px;left:0px;position:fixed;margin:auto;";break;case C:0==n.safeframe.isMyself()&&(p=D(r.iv_beacon)),g=st(r.la),m="</div></div></div></div>",f="width:100%;height:100%;z-index:2147483644;top:0px;left:0px;position:fixed;margin:auto;";break;default:0==n.safeframe.isMyself()&&function(e,t,n){if("IntersectionObserver"in window){let t=0,i=null;new IntersectionObserver(((e,r)=>{e.forEach((e=>{e.isIntersecting?i=setInterval((()=>{t+=H,R<=t&&(e.target.insertAdjacentHTML("beforebegin",D(n)),i&&clearInterval(i),r.unobserve(e.target))}),H):i&&(clearInterval(i),i=null)}))}),V).observe(e)}}(e,0,r.iv_beacon)}const w=function(e,t,n,i,r,s,o,c){return'<!doctype html><html lang="ja"><head><meta charset="UTF-8"><title>GMOSSP iframe</title><script>(()=>{"use strict";window.inDapIF=true;'+nt(e,t,n)+"})();<\/script></head>"+`<body ${tt(e)}>`+o+i+c+r+s+"</body></html>"}(r,c,d,u,h,p,g,m);let v=null,_=2;const b=n.chainWindow.length;if(1<b){let t=!0;n.chainWindow.forEach((n=>{n!==window.top&&(t&&(e.setAttribute("style",Be),et(e.parentNode),t=!1),null!==n.frameElement&&(n.frameElement.setAttribute("style",Be),_<b&&et(n.frameElement.parentNode),v=n.frameElement),_++)}))}1==n.safeframe.isMyself()&&n.safeframe.setRegister(r);const y=G();null!==v?y.setAttribute("style",Be):y.setAttribute("style",f);let x=!0;if(r.ai){let e=y.getAttribute("style");for(const t in r.ai)e=ct(t,r.ai[t]||null,e),"height"==t&&(x=!1),r.ai;null!==e&&y.setAttribute("style",e)}if(e.appendChild(y),r.pos===U&&"MutationObserver"in window)try{new Ge(y)}catch(e){}if(!0!==Ke(e,t,i,r,o,c,a,y,d,w,x,v))if("MutationObserver"in window){const n=new MutationObserver((()=>{!1!==Ke(e,t,i,r,o,c,a,y,d,w,x,v)&&n.disconnect()}));n.observe(y,{childList:!0,subtree:!0})}else for(let n=0;n<3e3;n++){if(!0===Ke(e,t,i,r,o,c,a,y,d,w,x,v))return;yield j(1)}}))}(e,t,n,i,r,l,s,o,c)}catch(e){}}))}(e,t,c,n,l,i,r,s)}catch(e){return}}))}function Ye(e,t,n,i,r,s){let c=0,a="";e.metaUrl&&(c=1,a=e.metaUrl.href);let l="";e.currentUrl&&(l=e.currentUrl.href);const d=function(){const e={brands:[],platform:navigator.platform||""},t=navigator.userAgentData;return t?(t.brands&&t.brands.forEach((t=>{e.brands.push({b:t.brand,v:t.version})})),e.platform=t.platform||"",e):e}();let u=r.getValue(K);0===u.length&&(u=P(M),r.setValue(K,u,7300,!1));const h={acmp:e.amp.isMyself().toString(),ao:e.ancestor,mpuf:c,np:d.platform||"",pageurl:a,raw_pageurl:l,sc:`${o()}x${screen.height}`,sf:e.safeframe.isMyself(),sti:i,xid:u},p=function(e,t,n){if(0===t.cdb.length)return[];const i=t.cdb,r=[];return i.forEach((t=>{const i=ue(de(t.zone_id,e));let s=[];const o=n.getValue(i);if(o)try{s=JSON.parse(o)}catch(e){e instanceof Error&&W(e.message,"")}s&&s.some((e=>{const n={zoneid:t.zone_id,cpm_bucket:e.cpm};return 0<e.advertiser_domain.length&&(n.adomain=e.advertiser_domain),r.push(n),!0}))})),r}(n,t,r);0<p.length&&(h.cdb=p);const f=re(r);0<f.length&&(h.im_uid=f),null!==e.currentReferer&&(h.ref=e.currentReferer.href);const g=r.getValue({s:"GMOSSP_GEO"});if(g)try{h.geo=JSON.parse(g)}catch(e){e instanceof Error&&W(e.message,"")}const m=r.getValue({s:"GMOSSP_CONFIG"});if(m)try{h.tm=JSON.parse(m)}catch(e){e instanceof Error&&W(e.message,"")}const w=r.getValue({s:"GMOSSP_CDEP"});return w&&(h.cdep=w),0<d.brands.length&&(h.ua_ch=d.brands),0<s.length&&(h.exc_network_ids=s),(window.GmosspYinstl&&1===window.GmosspYinstl||0<t.dev.test_network_id.length&&!0===t.dev.test_network_id.includes(Ee))&&(h.yinstl=1),0<t.dev.test_network_id.length&&(h.test_network_id=t.dev.test_network_id),0!==t.dev.gmoam_preview&&(h.gmoam_preview=t.dev.gmoam_preview),-1!==t.dev.test_space_id&&(h.test_space_id=t.dev.test_space_id),-1!==t.dev.space_network_id&&(h.spnw_id=t.dev.space_network_id),h}function Xe(e){return e.ad&&0!=e.ad.length?e.ad:""}const Be="width:100%;height:100%;";function Ke(e,t,n,i,r,s,o,a,l,d,u,h){if(!a.contentWindow)return!1;const p=a.contentWindow.document;return(0!==p.body.innerHTML.length||(p.open(),p.write(d),p.close(),0!==p.body.innerHTML.length))&&(function(e,t,n,i){let r=null;e instanceof HTMLIFrameElement?e.contentWindow&&(r=e.contentWindow.document.querySelector(`div[id=${t}]`)):r=e.querySelector(`div[id=${t}]`);if(!r)return;switch(i.la){case Q:case be:r.addEventListener("mouseover",(()=>{lt(n,i)}),{once:!0});break;default:r.addEventListener("click",(()=>{lt(n,i)}),{once:!0})}}(a,l,n.dev,i),function(e,t,n,i,r,s,o,a,l,d){const u=ot("height",null!==r?r.getAttribute("style"):i.getAttribute("style"));switch(d.pos){case z:switch(d.la){case Q:case be:case ve:return c(d.ad_size),void(null!==r?r.setAttribute("style",`${u}height:${c(d.ad_size)}px;`):i.setAttribute("style",`${u}height:${c(d.ad_size)}px;`))}return void at(e,t,n,i,r,o,a,l,u,d);case U:case C:return void at(e,t,n,i,r,o,a,l,u,d);default:if(!1===s)return;if(d.mode==L)return void at(e,t,n,i,r,o,a,l,u,d);if(d.la===Q)return c(d.ad_size),void(null!==r?r.setAttribute("style",`${u}height:${c(d.ad_size)}px;`):i.setAttribute("style",`${u}height:${c(d.ad_size)}px;`));at(e,t,n,i,r,o,a,l,u,d)}}(e,t,n,a,h,u,r,s,o,i),window.addEventListener("pagehide",(t=>{if(t.persisted&&i.pos===U)e.removeChild(a),document.body&&(document.body.style.position="")})),!0)}const Qe=10;function et(e){if(null!==e)for(let t=0;t<=Qe;t++){if(null===e.parentNode||Node.DOCUMENT_NODE===e.nodeType)return;e.setAttribute("style",Be),e=e.parentNode}}function tt(e){if(e.la===ee)return'style="text-align:center;"';switch(e.pos){case z:case U:case C:return'style="text-align:center;"'}return e.mode==L?"":'style="text-align:center;"'}function nt(e,t,n){switch(e.la){case Q:return"";case we:return function(e,t){let n=`window.parent.postMessage({"target":"${e}","height":h},"*");`;t.pos===U&&(n="");return`let intervalId=null,level=0,h=0;window.addEventListener("load",()=>{if(0==${t.gc_width_ext_flg}){h=${t.ad_size.h};`+n+"return;}intervalId=setInterval(()=>{level++;"+`if(level<=${k}){`+`if(${t.mode}&&${L}===${t.mode}){const b=document.body,e=document.documentElement;h=Math.max(b.scrollHeight,e.scrollHeight,b.offsetHeight,e.offsetHeight,b.clientHeight,e.clientHeight);if(0===h){return;}}else{const c=document.querySelector(".reemoContainer");if(!c){return;}const g=document.querySelector(".reemo_wrap"),j=document.querySelector("video");if(g&&j){if(g.getAttribute("data-width")===g.getAttribute("data-height")){h=screen.width;}else{`+`h=${t.ad_size.h}*screen.width/${t.ad_size.w};}j.height=h;j.width=screen.width;}else{const d=document.querySelector("iframe");if(!d){return;}const c=document.querySelector(".reemoWrapper"),f=d.contentWindow.document.querySelector("body>a>img");if(!f){return;}let w=screen.width;if(f.getAttribute("width")===f.getAttribute("height")){h=w;if(c){const g=window.getComputedStyle(c),z=new DOMMatrix(g.transform);if(z){if(1<z.a){w/=z.a;}else if(0<z.a&&1<z.a){w*=z.a;}}}d.height=w;f.height=w;}else{`+`h=${t.ad_size.h}*screen.width/${t.ad_size.w};let th=h;if(c){const g=window.getComputedStyle(c),z=new DOMMatrix(g.transform);if(z){if(1<z.a){w/=z.a;th/=z.a;}else if(0<z.a&&1<z.a){w*=z.a;th*=z.a;}}}d.height=th;f.height=th;}f.width=w;d.width=w;}}}`+n+"if(intervalId){clearInterval(intervalId);}},5);});"}(t,e)}switch(e.pos){case z:switch(e.la){case be:case ve:return"";case ee:return function(e){return`let intervalId=null,baseH=0,level=0,h=0;window.addEventListener("load",()=>{intervalId=setInterval(()=>{level++;if(${k}<=level){if(intervalId){clearInterval(intervalId);}return;}const f=document.querySelector(".adsbygoogle");if(f){h=Math.max(f.clientHeight);}if(h!=baseH){window.parent.postMessage({"target":"${e}","height":h},"*");baseH=h;}},5);});`}(t);case Ee:return function(e){return`let intervalId=null,baseH=0,level=0,h=0,i=0;window.addEventListener("load",()=>{intervalId=setInterval(()=>{level++;if(${k}<=level){if(intervalId){clearInterval(intervalId);}return;}const f=document.querySelector(".gmoam_close_button_ov"),c=document.querySelector(".bottom_fixed_ad");if(f){i=Math.max(f.scrollHeight,f.offsetHeight,f.clientHeight);}if(c){const g=window.getComputedStyle(c),z=new DOMMatrix(g.transform);h=Math.max(c.scrollHeight,c.offsetHeight,c.clientHeight);if(z&&0<h){if(1<z.a){h*=z.a;}else if(0<z.a&&1<z.a){h/=z.a;}}}if(0==h){return;}if((h+i)!=baseH){window.parent.postMessage({"target":"${e}","height":h+i},"*");baseH=h+i;}},5);});`}(t)}break;case U:case C:return""}return rt(t,`#${n}`)}function it(e,t){switch(t){case ee:return function(e){return`<script>(()=>{"use strict";function isAdStatusUnfilled(){const insElm=document.querySelector("ins.adsbygoogle");if(!insElm){return false;}const adStatusData=insElm.getAttribute("data-ad-status");if("unfilled"===adStatusData){return true;}return false;}if(true===isAdStatusUnfilled()){window.parent.postMessage({"target":"${e}","exc_network_id":${ee}},"*");}else{const ob=new MutationObserver(()=>{if(false===isAdStatusUnfilled()){return;}window.parent.postMessage({"target":"${e}","exc_network_id":${ee}},"*");ob.disconnect();});ob.observe(document.querySelector("ins.adsbygoogle"),{attributes:true,attributeFilter:["data-ad-status",],});}})();<\/script>`}(e);case me:return function(e){return`<script>(()=>{"use strict";function isMoviefilled(){const divElm=document.querySelector("div[class$=-container]");if(!divElm){return false;}return true;}let movieDom=false;const ob=new MutationObserver(()=>{if(false===movieDom&&false===isMoviefilled()){return;}movieDom=true;if(true===isMoviefilled()){return;}window.parent.postMessage({"target":"${e}","exc_network_id":${me}},"*");ob.disconnect();});ob.observe(document.documentElement,{attributes:true,childList:true,subtree:true,});})();<\/script>`}(e)}return""}function rt(e,t){return`let intervalId=null,baseH=0,level=0,h=0;window.addEventListener("load",()=>{intervalId=setInterval(()=>{level++;if(${k}<=level){if(intervalId){clearInterval(intervalId);}return;}const c=document.querySelector("${t}");h=Math.max(c.scrollHeight,c.offsetHeight,c.clientHeight);if(0==h){return;}if(h!=baseH){window.parent.postMessage({"target":"${e}","height":h},"*");baseH=h;}},5);});`}function st(e){let t="";if(e===Ee)t=`${Ae} `;return`<div class="${t}gmoam_outer_wrapper"><div class="${t}gmoam_inner_wrapper"><div class="${t}gmoam_close"><a class="${t}gmoam_close_button"></a></div><div class="${t}gmoam_container_wrapper"><div class="${t}gmoam_sq1">`}function ot(e,t){if(null===t)return"";let n="";return t.split(";").forEach((t=>{t&&!t.includes(e)&&(n+=`${t};`)})),n}function ct(e,t,n){if(null===t)return n||"";if(null===n)return`${e}:${t};`;let i="",r=!1;return n.split(";").forEach((n=>{n&&(n.includes(e)?(i+=`${e}:${t};`,r=!0):i+=`${n};`)})),r||(i+=`${e}:${t};`),i}function at(e,t,n,i,r,s,o,a,l,d){const u=h=>{if(!h.data)return;const p=h.data;if(p.target&&o==p.target){if(p.height&&d.pos!=U&&d.pos!=C)if(0<p.height)null!==r?(r.setAttribute("style",`${l}height:${p.height}px;`),r.setAttribute("height",p.height.toString())):(i.setAttribute("style",`${l}height:${p.height}px;`),i.setAttribute("height",p.height.toString()));else{const e=c(d.ad_size);null!==r?(r.setAttribute("style",`${l}height:${e}px;`),r.setAttribute("height",e.toString())):(i.setAttribute("style",`${l}height:${e}px;`),i.setAttribute("height",e.toString()))}if(p.exc_network_id){if(i.parentNode){i.parentNode.removeChild(i)}if(d.allow_network_cnt&&1<d.allow_network_cnt){const i=[p.exc_network_id];d.exc_network_ids&&d.exc_network_ids.forEach((e=>{i.push(e)})),window.removeEventListener("message",u),Je(e,t,n,s,o,a,i)}}}};window.addEventListener("message",u)}function lt(e,t){const n=dt(e,t);document.body.insertAdjacentHTML("beforebegin",D([n]))}function dt(e,t){const n=new URLSearchParams({r:Math.random().toString(),m:t.manager_id,si:t.site_id.toString(),network_id:t.la.toString()});let i="//";return t.campaign_id&&t.advertise_id&&(i=`/${t.campaign_id}/${t.advertise_id}`),`${function(e){if(e.mode)switch(e.mode){case p:return y;case u:return _;case h:return b}return x}(e)}/ads/sspfw.ad/${t.spnw}/${t.q}/${t.space_id}/${t.uid}${i}?${n.toString()}`}(function(e,t,n,i){new(n||(n=Promise))((function(r,s){function o(e){try{a(i.next(e))}catch(e){s(e)}}function c(e){try{a(i.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,c)}a((i=i.apply(e,t||[])).next())}))})(void 0,void 0,void 0,(function*(){window.Gmossp=window.Gmossp||{},window.Gmossp.events=window.Gmossp.events||[],window.Gmossp;const e=new B,t=function(e){return!Object.getOwnPropertyDescriptor(window.Gmossp.events,"push")&&(Object.defineProperty(window.Gmossp.events,"push",{value:function(t){t.sid;const n=[];return t.excid&&n.push(t.excid),qe(t.sid,e,n),Array.prototype.push.call(this,t),this.length}}),!0)}(e);t&&(function(e){window.addEventListener("message",(t=>{if(![S,$].includes(t.origin))return;if(!t.data||0==t.data.length||!Array.isArray(t.data))return;const n=[];t.data.forEach((e=>{e.mv&&e.tv&&e.tp&&n.push(e)})),0<n.length&&e.setValue({s:"GMOSSP_CONFIG"},JSON.stringify(n))}))}(e),function(e){"cookieDeprecationLabel"in navigator&&"function"==typeof navigator.cookieDeprecationLabel.getValue&&navigator.cookieDeprecationLabel.getValue().then((t=>{e.setValue({s:"GMOSSP_CDEP"},t)})).catch((e=>{}))}(e),function(){De(this,void 0,void 0,(function*(){if(!0!==He())if("MutationObserver"in window){const e=new MutationObserver((()=>{!1!==He()&&e.disconnect()}));e.observe(document.documentElement,{attributes:!0,childList:!0,subtree:!0})}else for(let e=0;e<3e3;e++){if(!0===He())return;yield j(1)}}))}(),0<window.Gmossp.events.length&&window.Gmossp.events.forEach((t=>{t.sid;const n=[];t.excid&&n.push(t.excid),qe(t.sid,e,n)})))}))});