(()=>{"use strict";window["br_flx_0_24"]=e=>{try{const n=e.templateParams.customPrebidInstanceName,t=!(!n||"false"===n.toLowerCase())&&n;let i=t?window[t]:e.prebidGlobalInstanceName&&window[e.prebidGlobalInstanceName];i=i||{},i.que=i.que||[];let r=window.pbFlux;if(!r)return e.callback(!0,"missing_pbFlux_object");let s,a,o=e.templateParams.fluxDivId,d="true"===e.templateParams.refreshOriginalSizes;const u=window.screen.availWidth||window.screen.width,l=I(e.adUnit,o,u);if(!l)return e.callback(!0,`missing_ad_config_for_${o}_at_pbFlux`);const c=g(l,e.spotsSizes),f=window.googletag=window.googletag||{cmd:[]},m=25,h=function(n){n.adUnitCode===e.divId&&(a=[n.width,n.height])};function g(e,n=[]){if(!e)return n;const t=Array.isArray(e)?e:[e];if(0===t.length)return n;const i=n.some((e=>"fluid"===e[0])),r=new Map;t.forEach((e=>{var n,t;((null===(t=null===(n=e.mediaTypes)||void 0===n?void 0:n.banner)||void 0===t?void 0:t.sizes)||[]).forEach((e=>{const n=`${e[0]},${e[1]}`;r.set(n,e)}))}));const s=Array.from(r.values());return i?[...s,["fluid"]]:s}function p(n){let t=i=>{if(i.slot.getSlotElementId()===n){f.pubads().removeEventListener("slotRenderEnded",t);const s={gamInfo:{lid:i.lineItemId,oid:i.campaignId},adUnit:i.slot.getAdUnitPath()};if(i.isEmpty)return e.callback(!0,void 0,s);if(d)return e.callback(i.isEmpty,void 0,s);{const o=document.getElementById(n);function u(n){return a=a||n.size,setTimeout((()=>{o&&o.parentElement&&(o.parentElement.style.minHeight=a[1]+"px")}),3e3),e.callback(n.isEmpty,void 0,s)}1===i.size[0]&&1===i.size[1]?o&&(r=o,new Promise((e=>{let n,t;t=setTimeout((()=>(clearInterval(n),e())),5e3),n=setInterval((()=>{if(v(r))return clearInterval(n),clearTimeout(t),e()}),200)}))).then((e=>{u(i)})):u(i)}}var r};f.pubads().addEventListener("slotRenderEnded",t)}function v(e){const n=w(e);return n.w>m&&n.h>m}function w(e){let n={w:0,h:0};return e.childNodes.forEach((e=>{if((t=e)&&t instanceof Element){let t=b(e);n.w=Math.max(n.w,t.w),n.h+=t.h}var t})),n}function b(e){const n=e.getBoundingClientRect();return{h:n.height,w:n.width}}async function y(e,n,t){return new Promise((e=>{let t=!1;return i=i||{},i.que=i.que||[],l&&l.length?(l.forEach((e=>{e.bids&&e.bids.length&&e.mediaTypes&&(t=!0,e.code=n,i.que.push((function(){i.addAdUnits(e)})))})),t?void i.que.push((function(){i.requestBids({adUnitCodes:[n],auctionId:n,bidsBackHandler:function(n){return i.setTargetingForGPTAsync(),e()}})})):e()):e()}))}function I(e,n,t){if(r&&r.allUnits&&e&&n){const e=r.allUnits[n];if(!e)return null;const i=Array.isArray(e)?e:[e];if(i.some((e=>e.unitGroup))){const e=i.filter((e=>{const n=e.unitGroup;if(!n)return!1;const i=n.min[0],r="*"===n.max[0]?1/0:n.max[0];return t>=i&&t<r}));if(e.length>0)try{return JSON.parse(JSON.stringify(e))}catch(n){return e}return null}if(i.length>0)try{return JSON.parse(JSON.stringify([i[0]]))}catch(e){return[i[0]]}}return null}function E(){return new Promise(((n,t)=>{const i=e.amznBidConf;if(!i)return n();const r=window.apstag;if(!r||"function"!=typeof r.fetchBids)return n();r.fetchBids({slots:[{slotID:e.divId,slotName:i.slotName,sizes:a||c.filter(Array.isArray)}]},(e=>(r.setDisplayBids(),n())))}))}async function z(e){return new Promise((n=>{if(!i)return n();i.que.push((function(){i.requestBids({adUnitCodes:[e],auctionId:e,bidsBackHandler:function(t){return i.setTargetingForGPTAsync(e),n()}})}))}))}function N(n,t,i,r){const s=[];"fluid"!==r?(s.push(z(n)),e.amznBidConf&&s.push(E())):s.push(Promise.resolve()),Promise.all(s).then((()=>{e.targeting&&e.targeting.forEach((function(e){t.setTargeting(e.key,e.value)})),p(e.divId),t.setTargeting("browsiRefresh",!0),f.pubads().refresh([t],{changeCorrelator:!1})}))}function T(){var n,t;if(d)N(e.divId,s,null===(t=e.amznBidConf)||void 0===t||t.slotName,c);else{if(a){"fluid"!==a&&i.adUnits.filter((function(n){return n.code===e.divId})).forEach((function(e){var n,t;(null===(t=null===(n=null==e?void 0:e.mediaTypes)||void 0===n?void 0:n.banner)||void 0===t?void 0:t.sizes)&&(e.mediaTypes.banner.sizes=[a])}));const n=f.sizeMapping().addSize([0,0],a).build();s.defineSizeMapping(n)}N(e.divId,s,null===(n=e.amznBidConf)||void 0===n||n.slotName,a)}}return i&&(i.que=i.que||[],i.que.push((function(){i.onEvent("bidWon",h)}))),f.cmd.push((()=>{s=f.defineSlot(e.adUnit,c,e.divId).addService(f.pubads()),e.targeting&&e.targeting.forEach((function(e){s.setTargeting(e.key,e.value)})),f.enableServices();const n=[];n.push(y(e.adUnit,e.divId)),e.amznBidConf&&n.push(E()),Promise.all(n).then((()=>{p(e.divId),f.display(e.divId),f.pubads().isInitialLoadDisabled()&&f.pubads().refresh([s],{changeCorrelator:!1})}))})),{refresh:T}}catch(B){e.callback(!0,B.message)}}})();