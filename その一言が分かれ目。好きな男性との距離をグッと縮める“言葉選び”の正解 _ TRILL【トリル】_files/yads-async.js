(()=>{var e={8188:(e,t,n)=>{"use strict";n.d(t,{y:()=>l});n(9993),n(1854);function i(e){if("http:"===window.location.protocol)return e;const t=/^http:\/\/(i|ai|ah)\.yimg\.jp\//;return t.test(e)?e.replace(t,"https://s.yimg.jp/"):e.replace(/^http:\/\//,"https://")}function r(e){var t;if(!s(e))return{};const n=null===(t=null==e?void 0:e.creative_options)||void 0===t?void 0:t.script;return void 0===n||void 0===(null==n?void 0:n.js_file)||void 0===(null==n?void 0:n.callback)?e.script:n}function s(e){return"object"==typeof e&&null!==e}function o(e,t){window.YAHOO=window.YAHOO||{},window.YAHOO.JP=window.YAHOO.JP||{},window.YAHOO.JP.anemos=window.YAHOO.JP.anemos||{},window.YAHOO.JP.anemos.yads=window.YAHOO.JP.anemos.yads||{},window.YAHOO.JP.anemos.yads.ydn=window.YAHOO.JP.anemos.yads.ydn||{},window.YAHOO.JP.anemos.yads.ydn[e]=window.YAHOO.JP.anemos.yads.ydn[e]||{},window.YAHOO.JP.anemos.yads.ydn[e][t]=window.YAHOO.JP.anemos.yads.ydn[e][t]||{}}function a(e,t,n,r){var s;const o=i(e.image_url),a=e.ClickUrl,d=e.target||(null===(s=e.style)||void 0===s?void 0:s.target)||"_top",l=e.media_w,c=e.media_h;return'<a href="'.concat(a,'" target="').concat(d,'"><img src="').concat(o,'" width="').concat(l,'" height="').concat(c,'" border="0" /></a>')}function d(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=(new Date).getTime(),i={first:"yads-sqb-1st-".concat(n),second:"yads-sqb-2nd-".concat(n)},r=function(e,t){var n;if(!s(e))return{};let i;return s(t)&&(i=null==t?void 0:t.sqb_wrapper,s(i)&&Object.keys(i).length>0)?i:(i=null===(n=null==e?void 0:e.creative_options)||void 0===n?void 0:n.sqb_wrapper,void 0===i||"object"!=typeof i?e.sqb_wrapper||{}:0===Object.keys(i).length?e.sqb_wrapper:i)}(e[0],t),o=r.direction||"horizontal",a=parseInt(r.ad_w,10)||300,d=parseInt(r.ad_h,10)||250,l=parseInt(r.ad_space_size,10)||15;const{totalW:c,totalH:u}="vertical"===o?{totalW:a,totalH:2*d+l}:{totalW:2*a+l,totalH:d};return{direction:o,id_1st:i.first,id_2nd:i.second,ad_w:"".concat(a,"px"),ad_h:"".concat(d,"px"),ad_space_size:"".concat(l,"px"),total_w:"".concat(c,"px"),total_h:"".concat(u,"px"),use_background:r.use_background||!1,bg_color:r.bg_color||"#fff",bg_w:r.bg_w||"".concat(c,"px"),bg_pd:r.bg_pd||"0px"}}function l(e,t,n,o){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const c=document.getElementById(o);if(!e||0===e.length||!c)return;if(1===e.length){const t=function(e,t){var n;let i;return i=null==t?void 0:t.filler_options,s(i)&&Object.keys(i).length>0?i:(i=null===(n=null==e?void 0:e.creative_options)||void 0===n?void 0:n.filler_options,s(i)&&Object.keys(i).length>0?i:{})}(e[0],l);if(0===Object.keys(t).length)return;const n=Object.assign({ad_main_type:"filler"},t);e.push(n)}const u=d(e,l),h=function(e){const t=(()=>{const t="horizontal"===e.direction?"margin-right:".concat(e.ad_space_size):"margin-bottom:".concat(e.ad_space_size);return'<div id="'.concat(e.id_1st,'" style="float:left; clear:none; width:').concat(e.ad_w,"; height:").concat(e.ad_h,"; ").concat(t,';"></div>')})(),n='<div id="'.concat(e.id_2nd,'" style="float:right; clear:none; width:').concat(e.ad_w,"; height:").concat(e.ad_h,'; text-align:center;"></div>'),i='<div style="margin:0 auto; width:'.concat(e.total_w,"; height:").concat(e.total_h,'; clear:both; overflow:hidden; text-align:center;">').concat(t).concat(n,"</div>");return e.use_background?'<div style="width:'.concat(e.bg_w,"; background:").concat(e.bg_color,"; padding:").concat(e.bg_pd,'">').concat(i,"</div>"):i}(u);function f(e,i){var s;const o=function(e){if(!e||"string"!=typeof e)return null;const t=e.split(".");let n=window;for(const e of t)if(!(n=n[e]))return null;return"function"==typeof n?n:null}(r(e).callback);return!!o&&(null===(s=window.YJ_YADS.innerFuncs)||void 0===s||s.callUITemplate(o,[e],t,n,i),!0)}function p(e,t){if("filler"!==e.ad_main_type){if(!f(e,t)){!function(e,t){var n;if("string"!=typeof e||"function"!=typeof t)return;const r=document.createElement("SCRIPT");r.src=i(e),r.type="text/javascript",r.onload=function(){t()},null===(n=document.getElementsByTagName("script")[0].parentNode)||void 0===n||n.appendChild(r)}("https://s.yimg.jp/images/listing/tool/yads/"+r(e).js_file,(function(){f(e,t)}))}}else!function(e,t,n,i){const r=document.getElementById(i),s=a(e);r&&(r.innerHTML=s)}(e,0,0,t)}c.innerHTML=h,["id_1st","id_2nd"].forEach(((t,n)=>{p(e[n],u[t])}))}o("creative","filler"),YAHOO.JP.anemos.yads.ydn.creative.filler.createAdHtml=a,o("position","SQB"),window.YAHOO.JP.anemos.yads.ydn.position.SQB.renderAd||(window.YAHOO.JP.anemos.yads.ydn.position.SQB.renderAd=l)},9403:()=>{!function(){"use strict";if("object"==typeof window)if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype)"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});else{var e=function(){for(var e=window.document,t=r(e);t;)t=r(e=t.ownerDocument);return e}(),t=[],n=null,i=null;o.prototype.THROTTLE_TIMEOUT=100,o.prototype.POLL_INTERVAL=null,o.prototype.USE_MUTATION_OBSERVER=!0,o._setupCrossOriginUpdater=function(){return n||(n=function(e,n){i=e&&n?u(e,n):{top:0,bottom:0,left:0,right:0,width:0,height:0},t.forEach((function(e){e._checkForIntersections()}))}),n},o._resetCrossOriginUpdater=function(){n=null,i=null},o.prototype.observe=function(e){if(!this._observationTargets.some((function(t){return t.element==e}))){if(!e||1!=e.nodeType)throw new Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:e,entry:null}),this._monitorIntersections(e.ownerDocument),this._checkForIntersections()}},o.prototype.unobserve=function(e){this._observationTargets=this._observationTargets.filter((function(t){return t.element!=e})),this._unmonitorIntersections(e.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},o.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},o.prototype.takeRecords=function(){var e=this._queuedEntries.slice();return this._queuedEntries=[],e},o.prototype._initThresholds=function(e){var t=e||[0];return Array.isArray(t)||(t=[t]),t.sort().filter((function(e,t,n){if("number"!=typeof e||isNaN(e)||e<0||e>1)throw new Error("threshold must be a number between 0 and 1 inclusively");return e!==n[t-1]}))},o.prototype._parseRootMargin=function(e){var t=(e||"0px").split(/\s+/).map((function(e){var t=/^(-?\d*\.?\d+)(px|%)$/.exec(e);if(!t)throw new Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(t[1]),unit:t[2]}}));return t[1]=t[1]||t[0],t[2]=t[2]||t[0],t[3]=t[3]||t[1],t},o.prototype._monitorIntersections=function(t){var n=t.defaultView;if(n&&-1==this._monitoringDocuments.indexOf(t)){var i=this._checkForIntersections,s=null,o=null;this.POLL_INTERVAL?s=n.setInterval(i,this.POLL_INTERVAL):(a(n,"resize",i,!0),a(t,"scroll",i,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in n&&(o=new n.MutationObserver(i)).observe(t,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(t),this._monitoringUnsubscribes.push((function(){var e=t.defaultView;e&&(s&&e.clearInterval(s),d(e,"resize",i,!0)),d(t,"scroll",i,!0),o&&o.disconnect()}));var l=this.root&&(this.root.ownerDocument||this.root)||e;if(t!=l){var c=r(t);c&&this._monitorIntersections(c.ownerDocument)}}},o.prototype._unmonitorIntersections=function(t){var n=this._monitoringDocuments.indexOf(t);if(-1!=n){var i=this.root&&(this.root.ownerDocument||this.root)||e,s=this._observationTargets.some((function(e){var n=e.element.ownerDocument;if(n==t)return!0;for(;n&&n!=i;){var s=r(n);if((n=s&&s.ownerDocument)==t)return!0}return!1}));if(!s){var o=this._monitoringUnsubscribes[n];if(this._monitoringDocuments.splice(n,1),this._monitoringUnsubscribes.splice(n,1),o(),t!=i){var a=r(t);a&&this._unmonitorIntersections(a.ownerDocument)}}}},o.prototype._unmonitorAllIntersections=function(){var e=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var t=0;t<e.length;t++)e[t]()},o.prototype._checkForIntersections=function(){if(this.root||!n||i){var e=this._rootIsInDom(),t=e?this._getRootRect():{top:0,bottom:0,left:0,right:0,width:0,height:0};this._observationTargets.forEach((function(i){var r=i.element,o=l(r),a=this._rootContainsTarget(r),d=i.entry,c=e&&a&&this._computeTargetAndRootIntersection(r,o,t),u=null;this._rootContainsTarget(r)?n&&!this.root||(u=t):u={top:0,bottom:0,left:0,right:0,width:0,height:0};var h=i.entry=new s({time:window.performance&&performance.now&&performance.now(),target:r,boundingClientRect:o,rootBounds:u,intersectionRect:c});d?e&&a?this._hasCrossedThreshold(d,h)&&this._queuedEntries.push(h):d&&d.isIntersecting&&this._queuedEntries.push(h):this._queuedEntries.push(h)}),this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},o.prototype._computeTargetAndRootIntersection=function(t,r,s){if("none"!=window.getComputedStyle(t).display){for(var o,a,d,c,h,p,m,v,g=r,w=f(t),y=!1;!y&&w;){var b=null,_=1==w.nodeType?window.getComputedStyle(w):{};if("none"==_.display)return null;if(w==this.root||9==w.nodeType)if(y=!0,w==this.root||w==e)n&&!this.root?!i||0==i.width&&0==i.height?(w=null,b=null,g=null):b=i:b=s;else{var I=f(w),A=I&&l(I),S=I&&this._computeTargetAndRootIntersection(I,A,s);A&&S?(w=I,b=u(A,S)):(w=null,g=null)}else{var O=w.ownerDocument;w!=O.body&&w!=O.documentElement&&"visible"!=_.overflow&&(b=l(w))}if(b&&(o=b,a=g,d=void 0,c=void 0,h=void 0,p=void 0,m=void 0,v=void 0,d=Math.max(o.top,a.top),c=Math.min(o.bottom,a.bottom),h=Math.max(o.left,a.left),p=Math.min(o.right,a.right),v=c-d,g=(m=p-h)>=0&&v>=0&&{top:d,bottom:c,left:h,right:p,width:m,height:v}||null),!g)break;w=w&&f(w)}return g}},o.prototype._getRootRect=function(){var t;if(this.root&&!p(this.root))t=l(this.root);else{var n=p(this.root)?this.root:e,i=n.documentElement,r=n.body;t={top:0,left:0,right:i.clientWidth||r.clientWidth,width:i.clientWidth||r.clientWidth,bottom:i.clientHeight||r.clientHeight,height:i.clientHeight||r.clientHeight}}return this._expandRectByRootMargin(t)},o.prototype._expandRectByRootMargin=function(e){var t=this._rootMarginValues.map((function(t,n){return"px"==t.unit?t.value:t.value*(n%2?e.width:e.height)/100})),n={top:e.top-t[0],right:e.right+t[1],bottom:e.bottom+t[2],left:e.left-t[3]};return n.width=n.right-n.left,n.height=n.bottom-n.top,n},o.prototype._hasCrossedThreshold=function(e,t){var n=e&&e.isIntersecting?e.intersectionRatio||0:-1,i=t.isIntersecting?t.intersectionRatio||0:-1;if(n!==i)for(var r=0;r<this.thresholds.length;r++){var s=this.thresholds[r];if(s==n||s==i||s<n!=s<i)return!0}},o.prototype._rootIsInDom=function(){return!this.root||h(e,this.root)},o.prototype._rootContainsTarget=function(t){var n=this.root&&(this.root.ownerDocument||this.root)||e;return h(n,t)&&(!this.root||n==t.ownerDocument)},o.prototype._registerInstance=function(){t.indexOf(this)<0&&t.push(this)},o.prototype._unregisterInstance=function(){var e=t.indexOf(this);-1!=e&&t.splice(e,1)},window.IntersectionObserver=o,window.IntersectionObserverEntry=s}function r(e){try{return e.defaultView&&e.defaultView.frameElement||null}catch(e){return null}}function s(e){this.time=e.time,this.target=e.target,this.rootBounds=c(e.rootBounds),this.boundingClientRect=c(e.boundingClientRect),this.intersectionRect=c(e.intersectionRect||{top:0,bottom:0,left:0,right:0,width:0,height:0}),this.isIntersecting=!!e.intersectionRect;var t=this.boundingClientRect,n=t.width*t.height,i=this.intersectionRect,r=i.width*i.height;this.intersectionRatio=n?Number((r/n).toFixed(4)):this.isIntersecting?1:0}function o(e,t){var n,i,r,s=t||{};if("function"!=typeof e)throw new Error("callback must be a function");if(s.root&&1!=s.root.nodeType&&9!=s.root.nodeType)throw new Error("root must be a Document or Element");this._checkForIntersections=(n=this._checkForIntersections.bind(this),i=this.THROTTLE_TIMEOUT,r=null,function(){r||(r=setTimeout((function(){n(),r=null}),i))}),this._callback=e,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(s.rootMargin),this.thresholds=this._initThresholds(s.threshold),this.root=s.root||null,this.rootMargin=this._rootMarginValues.map((function(e){return e.value+e.unit})).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function a(e,t,n,i){"function"==typeof e.addEventListener?e.addEventListener(t,n,i||!1):"function"==typeof e.attachEvent&&e.attachEvent("on"+t,n)}function d(e,t,n,i){"function"==typeof e.removeEventListener?e.removeEventListener(t,n,i||!1):"function"==typeof e.detachEvent&&e.detachEvent("on"+t,n)}function l(e){var t;try{t=e.getBoundingClientRect()}catch(e){}return t?(t.width&&t.height||(t={top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.right-t.left,height:t.bottom-t.top}),t):{top:0,bottom:0,left:0,right:0,width:0,height:0}}function c(e){return!e||"x"in e?e:{top:e.top,y:e.top,bottom:e.bottom,left:e.left,x:e.left,right:e.right,width:e.width,height:e.height}}function u(e,t){var n=t.top-e.top,i=t.left-e.left;return{top:n,left:i,height:t.height,width:t.width,bottom:n+t.height,right:i+t.width}}function h(e,t){for(var n=t;n;){if(n==e)return!0;n=f(n)}return!1}function f(t){var n=t.parentNode;return 9==t.nodeType&&t!=e?r(t):(n&&n.assignedSlot&&(n=n.assignedSlot.parentNode),n&&11==n.nodeType&&n.host?n.host:n)}function p(e){return e&&9===e.nodeType}}()},3573:(e,t,n)=>{"use strict";var i=n(2840),r=n(2714),s=TypeError;e.exports=function(e){if(i(e))return e;throw new s(r(e)+" is not a function")}},1013:(e,t,n)=>{"use strict";var i=n(7404),r=String,s=TypeError;e.exports=function(e){if(i(e))return e;throw new s("Can't set "+r(e)+" as a prototype")}},5686:(e,t,n)=>{"use strict";var i=n(7430),r=n(965),s=n(6038).f,o=i("unscopables"),a=Array.prototype;void 0===a[o]&&s(a,o,{configurable:!0,value:r(null)}),e.exports=function(e){a[o][e]=!0}},4742:(e,t,n)=>{"use strict";var i=n(4016).charAt;e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},8914:(e,t,n)=>{"use strict";var i=n(870),r=TypeError;e.exports=function(e,t){if(i(t,e))return e;throw new r("Incorrect invocation")}},6598:(e,t,n)=>{"use strict";var i=n(5843),r=String,s=TypeError;e.exports=function(e){if(i(e))return e;throw new s(r(e)+" is not an object")}},9031:(e,t,n)=>{"use strict";var i=n(2521),r=n(4564),s=n(3232),o=n(2336),a=n(4782),d=n(7734),l=n(8921),c=n(6237),u=n(1226),h=n(1830),f=Array;e.exports=function(e){var t=s(e),n=d(this),p=arguments.length,m=p>1?arguments[1]:void 0,v=void 0!==m;v&&(m=i(m,p>2?arguments[2]:void 0));var g,w,y,b,_,I,A=h(t),S=0;if(!A||this===f&&a(A))for(g=l(t),w=n?new this(g):f(g);g>S;S++)I=v?m(t[S],S):t[S],c(w,S,I);else for(w=n?new this:[],_=(b=u(t,A)).next;!(y=r(_,b)).done;S++)I=v?o(b,m,[y.value,S],!0):y.value,c(w,S,I);return w.length=S,w}},9262:(e,t,n)=>{"use strict";var i=n(7920),r=n(6103),s=n(8921),o=function(e){return function(t,n,o){var a=i(t),d=s(a);if(0===d)return!e&&-1;var l,c=r(o,d);if(e&&n!=n){for(;d>c;)if((l=a[c++])!=l)return!0}else for(;d>c;c++)if((e||c in a)&&a[c]===n)return e||c||0;return!e&&-1}};e.exports={includes:o(!0),indexOf:o(!1)}},4989:(e,t,n)=>{"use strict";var i=n(773);e.exports=i([].slice)},3411:(e,t,n)=>{"use strict";var i=n(4989),r=Math.floor,s=function(e,t){var n=e.length;if(n<8)for(var o,a,d=1;d<n;){for(a=d,o=e[d];a&&t(e[a-1],o)>0;)e[a]=e[--a];a!==d++&&(e[a]=o)}else for(var l=r(n/2),c=s(i(e,0,l),t),u=s(i(e,l),t),h=c.length,f=u.length,p=0,m=0;p<h||m<f;)e[p+m]=p<h&&m<f?t(c[p],u[m])<=0?c[p++]:u[m++]:p<h?c[p++]:u[m++];return e};e.exports=s},2336:(e,t,n)=>{"use strict";var i=n(6598),r=n(1632);e.exports=function(e,t,n,s){try{return s?t(i(n)[0],n[1]):t(n)}catch(t){r(e,"throw",t)}}},6589:(e,t,n)=>{"use strict";var i=n(773),r=i({}.toString),s=i("".slice);e.exports=function(e){return s(r(e),8,-1)}},7018:(e,t,n)=>{"use strict";var i=n(9277),r=n(2840),s=n(6589),o=n(7430)("toStringTag"),a=Object,d="Arguments"===s(function(){return arguments}());e.exports=i?s:function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=a(e),o))?n:d?s(t):"Object"===(i=s(t))&&r(t.callee)?"Arguments":i}},8269:(e,t,n)=>{"use strict";var i=n(7022),r=n(8596),s=n(4884),o=n(6038);e.exports=function(e,t,n){for(var a=r(t),d=o.f,l=s.f,c=0;c<a.length;c++){var u=a[c];i(e,u)||n&&i(n,u)||d(e,u,l(t,u))}}},4700:(e,t,n)=>{"use strict";var i=n(9110);e.exports=!i((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},8748:e=>{"use strict";e.exports=function(e,t){return{value:e,done:t}}},5868:(e,t,n)=>{"use strict";var i=n(5793),r=n(6038),s=n(3663);e.exports=i?function(e,t,n){return r.f(e,t,s(1,n))}:function(e,t,n){return e[t]=n,e}},3663:e=>{"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},6237:(e,t,n)=>{"use strict";var i=n(5793),r=n(6038),s=n(3663);e.exports=function(e,t,n){i?r.f(e,t,s(0,n)):e[t]=n}},881:(e,t,n)=>{"use strict";var i=n(5782),r=n(6038);e.exports=function(e,t,n){return n.get&&i(n.get,t,{getter:!0}),n.set&&i(n.set,t,{setter:!0}),r.f(e,t,n)}},9169:(e,t,n)=>{"use strict";var i=n(2840),r=n(6038),s=n(5782),o=n(1258);e.exports=function(e,t,n,a){a||(a={});var d=a.enumerable,l=void 0!==a.name?a.name:t;if(i(n)&&s(n,l,a),a.global)d?e[t]=n:o(t,n);else{try{a.unsafe?e[t]&&(d=!0):delete e[t]}catch(e){}d?e[t]=n:r.f(e,t,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},4228:(e,t,n)=>{"use strict";var i=n(9169);e.exports=function(e,t,n){for(var r in t)i(e,r,t[r],n);return e}},1258:(e,t,n)=>{"use strict";var i=n(9409),r=Object.defineProperty;e.exports=function(e,t){try{r(i,e,{value:t,configurable:!0,writable:!0})}catch(n){i[e]=t}return t}},5793:(e,t,n)=>{"use strict";var i=n(9110);e.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},1010:(e,t,n)=>{"use strict";var i=n(9409),r=n(5843),s=i.document,o=r(s)&&r(s.createElement);e.exports=function(e){return o?s.createElement(e):{}}},4617:e=>{"use strict";e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},8363:(e,t,n)=>{"use strict";var i=n(1010)("span").classList,r=i&&i.constructor&&i.constructor.prototype;e.exports=r===Object.prototype?void 0:r},1270:e=>{"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2832:(e,t,n)=>{"use strict";var i=n(9409).navigator,r=i&&i.userAgent;e.exports=r?String(r):""},3900:(e,t,n)=>{"use strict";var i,r,s=n(9409),o=n(2832),a=s.process,d=s.Deno,l=a&&a.versions||d&&d.version,c=l&&l.v8;c&&(r=(i=c.split("."))[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&o&&(!(i=o.match(/Edge\/(\d+)/))||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/))&&(r=+i[1]),e.exports=r},6673:(e,t,n)=>{"use strict";var i=n(9409),r=n(4884).f,s=n(5868),o=n(9169),a=n(1258),d=n(8269),l=n(7509);e.exports=function(e,t){var n,c,u,h,f,p=e.target,m=e.global,v=e.stat;if(n=m?i:v?i[p]||a(p,{}):i[p]&&i[p].prototype)for(c in t){if(h=t[c],u=e.dontCallGetSet?(f=r(n,c))&&f.value:n[c],!l(m?c:p+(v?".":"#")+c,e.forced)&&void 0!==u){if(typeof h==typeof u)continue;d(h,u)}(e.sham||u&&u.sham)&&s(h,"sham",!0),o(n,c,h,e)}}},9110:e=>{"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},5079:(e,t,n)=>{"use strict";n(9708);var i=n(4564),r=n(9169),s=n(7458),o=n(9110),a=n(7430),d=n(5868),l=a("species"),c=RegExp.prototype;e.exports=function(e,t,n,u){var h=a(e),f=!o((function(){var t={};return t[h]=function(){return 7},7!==""[e](t)})),p=f&&!o((function(){var t=!1,n=/a/;return"split"===e&&((n={}).constructor={},n.constructor[l]=function(){return n},n.flags="",n[h]=/./[h]),n.exec=function(){return t=!0,null},n[h](""),!t}));if(!f||!p||n){var m=/./[h],v=t(h,""[e],(function(e,t,n,r,o){var a=t.exec;return a===s||a===c.exec?f&&!o?{done:!0,value:i(m,t,n,r)}:{done:!0,value:i(e,n,t,r)}:{done:!1}}));r(String.prototype,e,v[0]),r(c,h,v[1])}u&&d(c[h],"sham",!0)}},6770:(e,t,n)=>{"use strict";var i=n(7547),r=Function.prototype,s=r.apply,o=r.call;e.exports="object"==typeof Reflect&&Reflect.apply||(i?o.bind(s):function(){return o.apply(s,arguments)})},2521:(e,t,n)=>{"use strict";var i=n(3031),r=n(3573),s=n(7547),o=i(i.bind);e.exports=function(e,t){return r(e),void 0===t?e:s?o(e,t):function(){return e.apply(t,arguments)}}},7547:(e,t,n)=>{"use strict";var i=n(9110);e.exports=!i((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},4564:(e,t,n)=>{"use strict";var i=n(7547),r=Function.prototype.call;e.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},7715:(e,t,n)=>{"use strict";var i=n(5793),r=n(7022),s=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,a=r(s,"name"),d=a&&"something"===function(){}.name,l=a&&(!i||i&&o(s,"name").configurable);e.exports={EXISTS:a,PROPER:d,CONFIGURABLE:l}},5861:(e,t,n)=>{"use strict";var i=n(773),r=n(3573);e.exports=function(e,t,n){try{return i(r(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(e){}}},3031:(e,t,n)=>{"use strict";var i=n(6589),r=n(773);e.exports=function(e){if("Function"===i(e))return r(e)}},773:(e,t,n)=>{"use strict";var i=n(7547),r=Function.prototype,s=r.call,o=i&&r.bind.bind(s,s);e.exports=i?o:function(e){return function(){return s.apply(e,arguments)}}},1624:(e,t,n)=>{"use strict";var i=n(9409),r=n(2840);e.exports=function(e,t){return arguments.length<2?(n=i[e],r(n)?n:void 0):i[e]&&i[e][t];var n}},1830:(e,t,n)=>{"use strict";var i=n(7018),r=n(7573),s=n(4122),o=n(6656),a=n(7430)("iterator");e.exports=function(e){if(!s(e))return r(e,a)||r(e,"@@iterator")||o[i(e)]}},1226:(e,t,n)=>{"use strict";var i=n(4564),r=n(3573),s=n(6598),o=n(2714),a=n(1830),d=TypeError;e.exports=function(e,t){var n=arguments.length<2?a(e):t;if(r(n))return s(i(n,e));throw new d(o(e)+" is not iterable")}},7573:(e,t,n)=>{"use strict";var i=n(3573),r=n(4122);e.exports=function(e,t){var n=e[t];return r(n)?void 0:i(n)}},2269:(e,t,n)=>{"use strict";var i=n(773),r=n(3232),s=Math.floor,o=i("".charAt),a=i("".replace),d=i("".slice),l=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,c=/\$([$&'`]|\d{1,2})/g;e.exports=function(e,t,n,i,u,h){var f=n+e.length,p=i.length,m=c;return void 0!==u&&(u=r(u),m=l),a(h,m,(function(r,a){var l;switch(o(a,0)){case"$":return"$";case"&":return e;case"`":return d(t,0,n);case"'":return d(t,f);case"<":l=u[d(a,1,-1)];break;default:var c=+a;if(0===c)return r;if(c>p){var h=s(c/10);return 0===h?r:h<=p?void 0===i[h-1]?o(a,1):i[h-1]+o(a,1):r}l=i[c-1]}return void 0===l?"":l}))}},9409:function(e,t,n){"use strict";var i=function(e){return e&&e.Math===Math&&e};e.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||i("object"==typeof this&&this)||function(){return this}()||Function("return this")()},7022:(e,t,n)=>{"use strict";var i=n(773),r=n(3232),s=i({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return s(r(e),t)}},7240:e=>{"use strict";e.exports={}},3094:(e,t,n)=>{"use strict";var i=n(1624);e.exports=i("document","documentElement")},3018:(e,t,n)=>{"use strict";var i=n(5793),r=n(9110),s=n(1010);e.exports=!i&&!r((function(){return 7!==Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},5444:(e,t,n)=>{"use strict";var i=n(773),r=n(9110),s=n(6589),o=Object,a=i("".split);e.exports=r((function(){return!o("z").propertyIsEnumerable(0)}))?function(e){return"String"===s(e)?a(e,""):o(e)}:o},6633:(e,t,n)=>{"use strict";var i=n(773),r=n(2840),s=n(2818),o=i(Function.toString);r(s.inspectSource)||(s.inspectSource=function(e){return o(e)}),e.exports=s.inspectSource},1122:(e,t,n)=>{"use strict";var i,r,s,o=n(9661),a=n(9409),d=n(5843),l=n(5868),c=n(7022),u=n(2818),h=n(7268),f=n(7240),p="Object already initialized",m=a.TypeError,v=a.WeakMap;if(o||u.state){var g=u.state||(u.state=new v);g.get=g.get,g.has=g.has,g.set=g.set,i=function(e,t){if(g.has(e))throw new m(p);return t.facade=e,g.set(e,t),t},r=function(e){return g.get(e)||{}},s=function(e){return g.has(e)}}else{var w=h("state");f[w]=!0,i=function(e,t){if(c(e,w))throw new m(p);return t.facade=e,l(e,w,t),t},r=function(e){return c(e,w)?e[w]:{}},s=function(e){return c(e,w)}}e.exports={set:i,get:r,has:s,enforce:function(e){return s(e)?r(e):i(e,{})},getterFor:function(e){return function(t){var n;if(!d(t)||(n=r(t)).type!==e)throw new m("Incompatible receiver, "+e+" required");return n}}}},4782:(e,t,n)=>{"use strict";var i=n(7430),r=n(6656),s=i("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||o[s]===e)}},2840:e=>{"use strict";var t="object"==typeof document&&document.all;e.exports=void 0===t&&void 0!==t?function(e){return"function"==typeof e||e===t}:function(e){return"function"==typeof e}},7734:(e,t,n)=>{"use strict";var i=n(773),r=n(9110),s=n(2840),o=n(7018),a=n(1624),d=n(6633),l=function(){},c=a("Reflect","construct"),u=/^\s*(?:class|function)\b/,h=i(u.exec),f=!u.test(l),p=function(e){if(!s(e))return!1;try{return c(l,[],e),!0}catch(e){return!1}},m=function(e){if(!s(e))return!1;switch(o(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!h(u,d(e))}catch(e){return!0}};m.sham=!0,e.exports=!c||r((function(){var e;return p(p.call)||!p(Object)||!p((function(){e=!0}))||e}))?m:p},7509:(e,t,n)=>{"use strict";var i=n(9110),r=n(2840),s=/#|\.prototype\./,o=function(e,t){var n=d[a(e)];return n===c||n!==l&&(r(t)?i(t):!!t)},a=o.normalize=function(e){return String(e).replace(s,".").toLowerCase()},d=o.data={},l=o.NATIVE="N",c=o.POLYFILL="P";e.exports=o},4122:e=>{"use strict";e.exports=function(e){return null==e}},5843:(e,t,n)=>{"use strict";var i=n(2840);e.exports=function(e){return"object"==typeof e?null!==e:i(e)}},7404:(e,t,n)=>{"use strict";var i=n(5843);e.exports=function(e){return i(e)||null===e}},4818:e=>{"use strict";e.exports=!1},8404:(e,t,n)=>{"use strict";var i=n(1624),r=n(2840),s=n(870),o=n(8741),a=Object;e.exports=o?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return r(t)&&s(t.prototype,a(e))}},1632:(e,t,n)=>{"use strict";var i=n(4564),r=n(6598),s=n(7573);e.exports=function(e,t,n){var o,a;r(e);try{if(!(o=s(e,"return"))){if("throw"===t)throw n;return n}o=i(o,e)}catch(e){a=!0,o=e}if("throw"===t)throw n;if(a)throw o;return r(o),n}},8627:(e,t,n)=>{"use strict";var i=n(4838).IteratorPrototype,r=n(965),s=n(3663),o=n(8462),a=n(6656),d=function(){return this};e.exports=function(e,t,n,l){var c=t+" Iterator";return e.prototype=r(i,{next:s(+!l,n)}),o(e,c,!1,!0),a[c]=d,e}},8869:(e,t,n)=>{"use strict";var i=n(6673),r=n(4564),s=n(4818),o=n(7715),a=n(2840),d=n(8627),l=n(4190),c=n(6698),u=n(8462),h=n(5868),f=n(9169),p=n(7430),m=n(6656),v=n(4838),g=o.PROPER,w=o.CONFIGURABLE,y=v.IteratorPrototype,b=v.BUGGY_SAFARI_ITERATORS,_=p("iterator"),I="keys",A="values",S="entries",O=function(){return this};e.exports=function(e,t,n,o,p,v,E){d(n,t,o);var M,k,T,R=function(e){if(e===p&&Y)return Y;if(!b&&e&&e in D)return D[e];switch(e){case I:case A:case S:return function(){return new n(this,e)}}return function(){return new n(this)}},C=t+" Iterator",P=!1,D=e.prototype,x=D[_]||D["@@iterator"]||p&&D[p],Y=!b&&x||R(p),L="Array"===t&&D.entries||x;if(L&&(M=l(L.call(new e)))!==Object.prototype&&M.next&&(s||l(M)===y||(c?c(M,y):a(M[_])||f(M,_,O)),u(M,C,!0,!0),s&&(m[C]=O)),g&&p===A&&x&&x.name!==A&&(!s&&w?h(D,"name",A):(P=!0,Y=function(){return r(x,this)})),p)if(k={values:R(A),keys:v?Y:R(I),entries:R(S)},E)for(T in k)(b||P||!(T in D))&&f(D,T,k[T]);else i({target:t,proto:!0,forced:b||P},k);return s&&!E||D[_]===Y||f(D,_,Y,{name:p}),m[t]=Y,k}},4838:(e,t,n)=>{"use strict";var i,r,s,o=n(9110),a=n(2840),d=n(5843),l=n(965),c=n(4190),u=n(9169),h=n(7430),f=n(4818),p=h("iterator"),m=!1;[].keys&&("next"in(s=[].keys())?(r=c(c(s)))!==Object.prototype&&(i=r):m=!0),!d(i)||o((function(){var e={};return i[p].call(e)!==e}))?i={}:f&&(i=l(i)),a(i[p])||u(i,p,(function(){return this})),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:m}},6656:e=>{"use strict";e.exports={}},8921:(e,t,n)=>{"use strict";var i=n(2383);e.exports=function(e){return i(e.length)}},5782:(e,t,n)=>{"use strict";var i=n(773),r=n(9110),s=n(2840),o=n(7022),a=n(5793),d=n(7715).CONFIGURABLE,l=n(6633),c=n(1122),u=c.enforce,h=c.get,f=String,p=Object.defineProperty,m=i("".slice),v=i("".replace),g=i([].join),w=a&&!r((function(){return 8!==p((function(){}),"length",{value:8}).length})),y=String(String).split("String"),b=e.exports=function(e,t,n){"Symbol("===m(f(t),0,7)&&(t="["+v(f(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!o(e,"name")||d&&e.name!==t)&&(a?p(e,"name",{value:t,configurable:!0}):e.name=t),w&&n&&o(n,"arity")&&e.length!==n.arity&&p(e,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?a&&p(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var i=u(e);return o(i,"source")||(i.source=g(y,"string"==typeof t?t:"")),e};Function.prototype.toString=b((function(){return s(this)&&h(this).source||l(this)}),"toString")},1978:e=>{"use strict";var t=Math.ceil,n=Math.floor;e.exports=Math.trunc||function(e){var i=+e;return(i>0?n:t)(i)}},8916:(e,t,n)=>{"use strict";var i=n(5793),r=n(773),s=n(4564),o=n(9110),a=n(3485),d=n(1480),l=n(9492),c=n(3232),u=n(5444),h=Object.assign,f=Object.defineProperty,p=r([].concat);e.exports=!h||o((function(){if(i&&1!==h({b:1},h(f({},"a",{enumerable:!0,get:function(){f(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var e={},t={},n=Symbol("assign detection"),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach((function(e){t[e]=e})),7!==h({},e)[n]||a(h({},t)).join("")!==r}))?function(e,t){for(var n=c(e),r=arguments.length,o=1,h=d.f,f=l.f;r>o;)for(var m,v=u(arguments[o++]),g=h?p(a(v),h(v)):a(v),w=g.length,y=0;w>y;)m=g[y++],i&&!s(f,v,m)||(n[m]=v[m]);return n}:h},965:(e,t,n)=>{"use strict";var i,r=n(6598),s=n(5898),o=n(1270),a=n(7240),d=n(3094),l=n(1010),c=n(7268),u="prototype",h="script",f=c("IE_PROTO"),p=function(){},m=function(e){return"<"+h+">"+e+"</"+h+">"},v=function(e){e.write(m("")),e.close();var t=e.parentWindow.Object;return e=null,t},g=function(){try{i=new ActiveXObject("htmlfile")}catch(e){}var e,t,n;g="undefined"!=typeof document?document.domain&&i?v(i):(t=l("iframe"),n="java"+h+":",t.style.display="none",d.appendChild(t),t.src=String(n),(e=t.contentWindow.document).open(),e.write(m("document.F=Object")),e.close(),e.F):v(i);for(var r=o.length;r--;)delete g[u][o[r]];return g()};a[f]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(p[u]=r(e),n=new p,p[u]=null,n[f]=e):n=g(),void 0===t?n:s.f(n,t)}},5898:(e,t,n)=>{"use strict";var i=n(5793),r=n(3655),s=n(6038),o=n(6598),a=n(7920),d=n(3485);t.f=i&&!r?Object.defineProperties:function(e,t){o(e);for(var n,i=a(t),r=d(t),l=r.length,c=0;l>c;)s.f(e,n=r[c++],i[n]);return e}},6038:(e,t,n)=>{"use strict";var i=n(5793),r=n(3018),s=n(3655),o=n(6598),a=n(3516),d=TypeError,l=Object.defineProperty,c=Object.getOwnPropertyDescriptor,u="enumerable",h="configurable",f="writable";t.f=i?s?function(e,t,n){if(o(e),t=a(t),o(n),"function"==typeof e&&"prototype"===t&&"value"in n&&f in n&&!n[f]){var i=c(e,t);i&&i[f]&&(e[t]=n.value,n={configurable:h in n?n[h]:i[h],enumerable:u in n?n[u]:i[u],writable:!1})}return l(e,t,n)}:l:function(e,t,n){if(o(e),t=a(t),o(n),r)try{return l(e,t,n)}catch(e){}if("get"in n||"set"in n)throw new d("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},4884:(e,t,n)=>{"use strict";var i=n(5793),r=n(4564),s=n(9492),o=n(3663),a=n(7920),d=n(3516),l=n(7022),c=n(3018),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=a(e),t=d(t),c)try{return u(e,t)}catch(e){}if(l(e,t))return o(!r(s.f,e,t),e[t])}},2905:(e,t,n)=>{"use strict";var i=n(5159),r=n(1270).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},1480:(e,t)=>{"use strict";t.f=Object.getOwnPropertySymbols},4190:(e,t,n)=>{"use strict";var i=n(7022),r=n(2840),s=n(3232),o=n(7268),a=n(4700),d=o("IE_PROTO"),l=Object,c=l.prototype;e.exports=a?l.getPrototypeOf:function(e){var t=s(e);if(i(t,d))return t[d];var n=t.constructor;return r(n)&&t instanceof n?n.prototype:t instanceof l?c:null}},870:(e,t,n)=>{"use strict";var i=n(773);e.exports=i({}.isPrototypeOf)},5159:(e,t,n)=>{"use strict";var i=n(773),r=n(7022),s=n(7920),o=n(9262).indexOf,a=n(7240),d=i([].push);e.exports=function(e,t){var n,i=s(e),l=0,c=[];for(n in i)!r(a,n)&&r(i,n)&&d(c,n);for(;t.length>l;)r(i,n=t[l++])&&(~o(c,n)||d(c,n));return c}},3485:(e,t,n)=>{"use strict";var i=n(5159),r=n(1270);e.exports=Object.keys||function(e){return i(e,r)}},9492:(e,t)=>{"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);t.f=r?function(e){var t=i(this,e);return!!t&&t.enumerable}:n},6698:(e,t,n)=>{"use strict";var i=n(5861),r=n(5843),s=n(4721),o=n(1013);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=i(Object.prototype,"__proto__","set"))(n,[]),t=n instanceof Array}catch(e){}return function(n,i){return s(n),o(i),r(n)?(t?e(n,i):n.__proto__=i,n):n}}():void 0)},9195:(e,t,n)=>{"use strict";var i=n(4564),r=n(2840),s=n(5843),o=TypeError;e.exports=function(e,t){var n,a;if("string"===t&&r(n=e.toString)&&!s(a=i(n,e)))return a;if(r(n=e.valueOf)&&!s(a=i(n,e)))return a;if("string"!==t&&r(n=e.toString)&&!s(a=i(n,e)))return a;throw new o("Can't convert object to primitive value")}},8596:(e,t,n)=>{"use strict";var i=n(1624),r=n(773),s=n(2905),o=n(1480),a=n(6598),d=r([].concat);e.exports=i("Reflect","ownKeys")||function(e){var t=s.f(a(e)),n=o.f;return n?d(t,n(e)):t}},4693:(e,t,n)=>{"use strict";var i=n(4564),r=n(6598),s=n(2840),o=n(6589),a=n(7458),d=TypeError;e.exports=function(e,t){var n=e.exec;if(s(n)){var l=i(n,e,t);return null!==l&&r(l),l}if("RegExp"===o(e))return i(a,e,t);throw new d("RegExp#exec called on incompatible receiver")}},7458:(e,t,n)=>{"use strict";var i,r,s=n(4564),o=n(773),a=n(8014),d=n(4344),l=n(6548),c=n(3014),u=n(965),h=n(1122).get,f=n(3280),p=n(2045),m=c("native-string-replace",String.prototype.replace),v=RegExp.prototype.exec,g=v,w=o("".charAt),y=o("".indexOf),b=o("".replace),_=o("".slice),I=(r=/b*/g,s(v,i=/a/,"a"),s(v,r,"a"),0!==i.lastIndex||0!==r.lastIndex),A=l.BROKEN_CARET,S=void 0!==/()??/.exec("")[1];(I||S||A||f||p)&&(g=function(e){var t,n,i,r,o,l,c,f=this,p=h(f),O=a(e),E=p.raw;if(E)return E.lastIndex=f.lastIndex,t=s(g,E,O),f.lastIndex=E.lastIndex,t;var M=p.groups,k=A&&f.sticky,T=s(d,f),R=f.source,C=0,P=O;if(k&&(T=b(T,"y",""),-1===y(T,"g")&&(T+="g"),P=_(O,f.lastIndex),f.lastIndex>0&&(!f.multiline||f.multiline&&"\n"!==w(O,f.lastIndex-1))&&(R="(?: "+R+")",P=" "+P,C++),n=new RegExp("^(?:"+R+")",T)),S&&(n=new RegExp("^"+R+"$(?!\\s)",T)),I&&(i=f.lastIndex),r=s(v,k?n:f,P),k?r?(r.input=_(r.input,C),r[0]=_(r[0],C),r.index=f.lastIndex,f.lastIndex+=r[0].length):f.lastIndex=0:I&&r&&(f.lastIndex=f.global?r.index+r[0].length:i),S&&r&&r.length>1&&s(m,r[0],n,(function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(r[o]=void 0)})),r&&M)for(r.groups=l=u(null),o=0;o<M.length;o++)l[(c=M[o])[0]]=r[c[1]];return r}),e.exports=g},4344:(e,t,n)=>{"use strict";var i=n(6598);e.exports=function(){var e=i(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}},6548:(e,t,n)=>{"use strict";var i=n(9110),r=n(9409).RegExp,s=i((function(){var e=r("a","y");return e.lastIndex=2,null!==e.exec("abcd")})),o=s||i((function(){return!r("a","y").sticky})),a=s||i((function(){var e=r("^r","gy");return e.lastIndex=2,null!==e.exec("str")}));e.exports={BROKEN_CARET:a,MISSED_STICKY:o,UNSUPPORTED_Y:s}},3280:(e,t,n)=>{"use strict";var i=n(9110),r=n(9409).RegExp;e.exports=i((function(){var e=r(".","s");return!(e.dotAll&&e.test("\n")&&"s"===e.flags)}))},2045:(e,t,n)=>{"use strict";var i=n(9110),r=n(9409).RegExp;e.exports=i((function(){var e=r("(?<a>b)","g");return"b"!==e.exec("b").groups.a||"bc"!=="b".replace(e,"$<a>c")}))},4721:(e,t,n)=>{"use strict";var i=n(4122),r=TypeError;e.exports=function(e){if(i(e))throw new r("Can't call method on "+e);return e}},3464:(e,t,n)=>{"use strict";var i=n(9409),r=n(5793),s=Object.getOwnPropertyDescriptor;e.exports=function(e){if(!r)return i[e];var t=s(i,e);return t&&t.value}},8462:(e,t,n)=>{"use strict";var i=n(6038).f,r=n(7022),s=n(7430)("toStringTag");e.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!r(e,s)&&i(e,s,{configurable:!0,value:t})}},7268:(e,t,n)=>{"use strict";var i=n(3014),r=n(9157),s=i("keys");e.exports=function(e){return s[e]||(s[e]=r(e))}},2818:(e,t,n)=>{"use strict";var i=n(4818),r=n(9409),s=n(1258),o="__core-js_shared__",a=e.exports=r[o]||s(o,{});(a.versions||(a.versions=[])).push({version:"3.42.0",mode:i?"pure":"global",copyright:"© 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"})},3014:(e,t,n)=>{"use strict";var i=n(2818);e.exports=function(e,t){return i[e]||(i[e]=t||{})}},4016:(e,t,n)=>{"use strict";var i=n(773),r=n(9628),s=n(8014),o=n(4721),a=i("".charAt),d=i("".charCodeAt),l=i("".slice),c=function(e){return function(t,n){var i,c,u=s(o(t)),h=r(n),f=u.length;return h<0||h>=f?e?"":void 0:(i=d(u,h))<55296||i>56319||h+1===f||(c=d(u,h+1))<56320||c>57343?e?a(u,h):i:e?l(u,h,h+2):c-56320+(i-55296<<10)+65536}};e.exports={codeAt:c(!1),charAt:c(!0)}},4378:(e,t,n)=>{"use strict";var i=n(773),r=2147483647,s=/[^\0-\u007E]/,o=/[.\u3002\uFF0E\uFF61]/g,a="Overflow: input needs wider integers to process",d=RangeError,l=i(o.exec),c=Math.floor,u=String.fromCharCode,h=i("".charCodeAt),f=i([].join),p=i([].push),m=i("".replace),v=i("".split),g=i("".toLowerCase),w=function(e){return e+22+75*(e<26)},y=function(e,t,n){var i=0;for(e=n?c(e/700):e>>1,e+=c(e/t);e>455;)e=c(e/35),i+=36;return c(i+36*e/(e+38))},b=function(e){var t=[];e=function(e){for(var t=[],n=0,i=e.length;n<i;){var r=h(e,n++);if(r>=55296&&r<=56319&&n<i){var s=h(e,n++);56320==(64512&s)?p(t,((1023&r)<<10)+(1023&s)+65536):(p(t,r),n--)}else p(t,r)}return t}(e);var n,i,s=e.length,o=128,l=0,m=72;for(n=0;n<e.length;n++)(i=e[n])<128&&p(t,u(i));var v=t.length,g=v;for(v&&p(t,"-");g<s;){var b=r;for(n=0;n<e.length;n++)(i=e[n])>=o&&i<b&&(b=i);var _=g+1;if(b-o>c((r-l)/_))throw new d(a);for(l+=(b-o)*_,o=b,n=0;n<e.length;n++){if((i=e[n])<o&&++l>r)throw new d(a);if(i===o){for(var I=l,A=36;;){var S=A<=m?1:A>=m+26?26:A-m;if(I<S)break;var O=I-S,E=36-S;p(t,u(w(S+O%E))),I=c(O/E),A+=36}p(t,u(w(I))),m=y(l,_,g===v),l=0,g++}}l++,o++}return f(t,"")};e.exports=function(e){var t,n,i=[],r=v(m(g(e),o,"."),".");for(t=0;t<r.length;t++)n=r[t],p(i,l(s,n)?"xn--"+b(n):n);return f(i,".")}},4221:(e,t,n)=>{"use strict";var i=n(7715).PROPER,r=n(9110),s=n(7757);e.exports=function(e){return r((function(){return!!s[e]()||"​᠎"!=="​᠎"[e]()||i&&s[e].name!==e}))}},1319:(e,t,n)=>{"use strict";var i=n(773),r=n(4721),s=n(8014),o=n(7757),a=i("".replace),d=RegExp("^["+o+"]+"),l=RegExp("(^|[^"+o+"])["+o+"]+$"),c=function(e){return function(t){var n=s(r(t));return 1&e&&(n=a(n,d,"")),2&e&&(n=a(n,l,"$1")),n}};e.exports={start:c(1),end:c(2),trim:c(3)}},9532:(e,t,n)=>{"use strict";var i=n(3900),r=n(9110),s=n(9409).String;e.exports=!!Object.getOwnPropertySymbols&&!r((function(){var e=Symbol("symbol detection");return!s(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},6103:(e,t,n)=>{"use strict";var i=n(9628),r=Math.max,s=Math.min;e.exports=function(e,t){var n=i(e);return n<0?r(n+t,0):s(n,t)}},7920:(e,t,n)=>{"use strict";var i=n(5444),r=n(4721);e.exports=function(e){return i(r(e))}},9628:(e,t,n)=>{"use strict";var i=n(1978);e.exports=function(e){var t=+e;return t!=t||0===t?0:i(t)}},2383:(e,t,n)=>{"use strict";var i=n(9628),r=Math.min;e.exports=function(e){var t=i(e);return t>0?r(t,9007199254740991):0}},3232:(e,t,n)=>{"use strict";var i=n(4721),r=Object;e.exports=function(e){return r(i(e))}},7894:(e,t,n)=>{"use strict";var i=n(4564),r=n(5843),s=n(8404),o=n(7573),a=n(9195),d=n(7430),l=TypeError,c=d("toPrimitive");e.exports=function(e,t){if(!r(e)||s(e))return e;var n,d=o(e,c);if(d){if(void 0===t&&(t="default"),n=i(d,e,t),!r(n)||s(n))return n;throw new l("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},3516:(e,t,n)=>{"use strict";var i=n(7894),r=n(8404);e.exports=function(e){var t=i(e,"string");return r(t)?t:t+""}},9277:(e,t,n)=>{"use strict";var i={};i[n(7430)("toStringTag")]="z",e.exports="[object z]"===String(i)},8014:(e,t,n)=>{"use strict";var i=n(7018),r=String;e.exports=function(e){if("Symbol"===i(e))throw new TypeError("Cannot convert a Symbol value to a string");return r(e)}},2714:e=>{"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},9157:(e,t,n)=>{"use strict";var i=n(773),r=0,s=Math.random(),o=i(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+o(++r+s,36)}},7289:(e,t,n)=>{"use strict";var i=n(9110),r=n(7430),s=n(5793),o=n(4818),a=r("iterator");e.exports=!i((function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),i="";return e.pathname="c%20d",t.forEach((function(e,n){t.delete("b"),i+=n+e})),n.delete("a",2),n.delete("b",void 0),o&&(!e.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b"))||!t.size&&(o||!s)||!t.sort||"https://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[a]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("https://тест").host||"#%D0%B1"!==new URL("https://a#б").hash||"a1c3"!==i||"x"!==new URL("https://x",void 0).host}))},8741:(e,t,n)=>{"use strict";var i=n(9532);e.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},3655:(e,t,n)=>{"use strict";var i=n(5793),r=n(9110);e.exports=i&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},361:e=>{"use strict";var t=TypeError;e.exports=function(e,n){if(e<n)throw new t("Not enough arguments");return e}},9661:(e,t,n)=>{"use strict";var i=n(9409),r=n(2840),s=i.WeakMap;e.exports=r(s)&&/native code/.test(String(s))},7430:(e,t,n)=>{"use strict";var i=n(9409),r=n(3014),s=n(7022),o=n(9157),a=n(9532),d=n(8741),l=i.Symbol,c=r("wks"),u=d?l.for||l:l&&l.withoutSetter||o;e.exports=function(e){return s(c,e)||(c[e]=a&&s(l,e)?l[e]:u("Symbol."+e)),c[e]}},7757:e=>{"use strict";e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},9573:(e,t,n)=>{"use strict";var i=n(7920),r=n(5686),s=n(6656),o=n(1122),a=n(6038).f,d=n(8869),l=n(8748),c=n(4818),u=n(5793),h="Array Iterator",f=o.set,p=o.getterFor(h);e.exports=d(Array,"Array",(function(e,t){f(this,{type:h,target:i(e),index:0,kind:t})}),(function(){var e=p(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,l(void 0,!0);switch(e.kind){case"keys":return l(n,!1);case"values":return l(t[n],!1)}return l([n,t[n]],!1)}),"values");var m=s.Arguments=s.Array;if(r("keys"),r("values"),r("entries"),!c&&u&&"values"!==m.name)try{a(m,"name",{value:"values"})}catch(e){}},3084:(e,t,n)=>{"use strict";n(5686)("flatMap")},439:(e,t,n)=>{"use strict";n(5686)("flat")},9708:(e,t,n)=>{"use strict";var i=n(6673),r=n(7458);i({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},228:(e,t,n)=>{"use strict";var i=n(6673),r=n(773),s=n(6103),o=RangeError,a=String.fromCharCode,d=String.fromCodePoint,l=r([].join);i({target:"String",stat:!0,arity:1,forced:!!d&&1!==d.length},{fromCodePoint:function(e){for(var t,n=[],i=arguments.length,r=0;i>r;){if(t=+arguments[r++],s(t,1114111)!==t)throw new o(t+" is not a valid code point");n[r]=t<65536?a(t):a(55296+((t-=65536)>>10),t%1024+56320)}return l(n,"")}})},4599:(e,t,n)=>{"use strict";var i=n(4016).charAt,r=n(8014),s=n(1122),o=n(8869),a=n(8748),d="String Iterator",l=s.set,c=s.getterFor(d);o(String,"String",(function(e){l(this,{type:d,string:r(e),index:0})}),(function(){var e,t=c(this),n=t.string,r=t.index;return r>=n.length?a(void 0,!0):(e=i(n,r),t.index+=e.length,a(e,!1))}))},9993:(e,t,n)=>{"use strict";var i=n(6770),r=n(4564),s=n(773),o=n(5079),a=n(9110),d=n(6598),l=n(2840),c=n(5843),u=n(9628),h=n(2383),f=n(8014),p=n(4721),m=n(4742),v=n(7573),g=n(2269),w=n(4693),y=n(7430)("replace"),b=Math.max,_=Math.min,I=s([].concat),A=s([].push),S=s("".indexOf),O=s("".slice),E="$0"==="a".replace(/./,"$0"),M=!!/./[y]&&""===/./[y]("a","$0");o("replace",(function(e,t,n){var s=M?"$":"$0";return[function(e,n){var i=p(this),s=c(e)?v(e,y):void 0;return s?r(s,e,i,n):r(t,f(i),e,n)},function(e,r){var o=d(this),a=f(e);if("string"==typeof r&&-1===S(r,s)&&-1===S(r,"$<")){var c=n(t,o,a,r);if(c.done)return c.value}var p=l(r);p||(r=f(r));var v,y=o.global;y&&(v=o.unicode,o.lastIndex=0);for(var E,M=[];null!==(E=w(o,a))&&(A(M,E),y);){""===f(E[0])&&(o.lastIndex=m(a,h(o.lastIndex),v))}for(var k,T="",R=0,C=0;C<M.length;C++){for(var P,D=f((E=M[C])[0]),x=b(_(u(E.index),a.length),0),Y=[],L=1;L<E.length;L++)A(Y,void 0===(k=E[L])?k:String(k));var F=E.groups;if(p){var V=I([D],Y,x,a);void 0!==F&&A(V,F),P=f(i(r,void 0,V))}else P=g(D,a,x,Y,F,r);x>=R&&(T+=O(a,R,x)+P,R=x+D.length)}return T+O(a,R)}]}),!!a((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}))||!E||M)},1605:(e,t,n)=>{"use strict";var i=n(6673),r=n(1319).trim;i({target:"String",proto:!0,forced:n(4221)("trim")},{trim:function(){return r(this)}})},1854:(e,t,n)=>{"use strict";var i=n(9409),r=n(4617),s=n(8363),o=n(9573),a=n(5868),d=n(8462),l=n(7430)("iterator"),c=o.values,u=function(e,t){if(e){if(e[l]!==c)try{a(e,l,c)}catch(t){e[l]=c}if(d(e,t,!0),r[t])for(var n in o)if(e[n]!==o[n])try{a(e,n,o[n])}catch(t){e[n]=o[n]}}};for(var h in r)u(i[h]&&i[h].prototype,h);u(s,"DOMTokenList")},5787:(e,t,n)=>{"use strict";n(9573),n(228);var i=n(6673),r=n(9409),s=n(3464),o=n(1624),a=n(4564),d=n(773),l=n(5793),c=n(7289),u=n(9169),h=n(881),f=n(4228),p=n(8462),m=n(8627),v=n(1122),g=n(8914),w=n(2840),y=n(7022),b=n(2521),_=n(7018),I=n(6598),A=n(5843),S=n(8014),O=n(965),E=n(3663),M=n(1226),k=n(1830),T=n(8748),R=n(361),C=n(7430),P=n(3411),D=C("iterator"),x="URLSearchParams",Y=x+"Iterator",L=v.set,F=v.getterFor(x),V=v.getterFor(Y),j=s("fetch"),U=s("Request"),N=s("Headers"),H=U&&U.prototype,B=N&&N.prototype,q=r.TypeError,J=r.encodeURIComponent,W=String.fromCharCode,z=o("String","fromCodePoint"),K=parseInt,$=d("".charAt),G=d([].join),Q=d([].push),X=d("".replace),Z=d([].shift),ee=d([].splice),te=d("".split),ne=d("".slice),ie=d(/./.exec),re=/\+/g,se=/^[0-9a-f]+$/i,oe=function(e,t){var n=ne(e,t,t+2);return ie(se,n)?K(n,16):NaN},ae=function(e){for(var t=0,n=128;n>0&&e&n;n>>=1)t++;return t},de=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(31&e[0])<<6|63&e[1];break;case 3:t=(15&e[0])<<12|(63&e[1])<<6|63&e[2];break;case 4:t=(7&e[0])<<18|(63&e[1])<<12|(63&e[2])<<6|63&e[3]}return t>1114111?null:t},le=function(e){for(var t=(e=X(e,re," ")).length,n="",i=0;i<t;){var r=$(e,i);if("%"===r){if("%"===$(e,i+1)||i+3>t){n+="%",i++;continue}var s=oe(e,i+1);if(s!=s){n+=r,i++;continue}i+=2;var o=ae(s);if(0===o)r=W(s);else{if(1===o||o>4){n+="�",i++;continue}for(var a=[s],d=1;d<o&&!(++i+3>t||"%"!==$(e,i));){var l=oe(e,i+1);if(l!=l){i+=3;break}if(l>191||l<128)break;Q(a,l),i+=2,d++}if(a.length!==o){n+="�";continue}var c=de(a);null===c?n+="�":r=z(c)}}n+=r,i++}return n},ce=/[!'()~]|%20/g,ue={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},he=function(e){return ue[e]},fe=function(e){return X(J(e),ce,he)},pe=m((function(e,t){L(this,{type:Y,target:F(e).entries,index:0,kind:t})}),x,(function(){var e=V(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,T(void 0,!0);var i=t[n];switch(e.kind){case"keys":return T(i.key,!1);case"values":return T(i.value,!1)}return T([i.key,i.value],!1)}),!0),me=function(e){this.entries=[],this.url=null,void 0!==e&&(A(e)?this.parseObject(e):this.parseQuery("string"==typeof e?"?"===$(e,0)?ne(e,1):e:S(e)))};me.prototype={type:x,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t,n,i,r,s,o,d,l=this.entries,c=k(e);if(c)for(n=(t=M(e,c)).next;!(i=a(n,t)).done;){if(s=(r=M(I(i.value))).next,(o=a(s,r)).done||(d=a(s,r)).done||!a(s,r).done)throw new q("Expected sequence with length 2");Q(l,{key:S(o.value),value:S(d.value)})}else for(var u in e)y(e,u)&&Q(l,{key:u,value:S(e[u])})},parseQuery:function(e){if(e)for(var t,n,i=this.entries,r=te(e,"&"),s=0;s<r.length;)(t=r[s++]).length&&(n=te(t,"="),Q(i,{key:le(Z(n)),value:le(G(n,"="))}))},serialize:function(){for(var e,t=this.entries,n=[],i=0;i<t.length;)e=t[i++],Q(n,fe(e.key)+"="+fe(e.value));return G(n,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var ve=function(){g(this,ge);var e=L(this,new me(arguments.length>0?arguments[0]:void 0));l||(this.size=e.entries.length)},ge=ve.prototype;if(f(ge,{append:function(e,t){var n=F(this);R(arguments.length,2),Q(n.entries,{key:S(e),value:S(t)}),l||this.length++,n.updateURL()},delete:function(e){for(var t=F(this),n=R(arguments.length,1),i=t.entries,r=S(e),s=n<2?void 0:arguments[1],o=void 0===s?s:S(s),a=0;a<i.length;){var d=i[a];if(d.key!==r||void 0!==o&&d.value!==o)a++;else if(ee(i,a,1),void 0!==o)break}l||(this.size=i.length),t.updateURL()},get:function(e){var t=F(this).entries;R(arguments.length,1);for(var n=S(e),i=0;i<t.length;i++)if(t[i].key===n)return t[i].value;return null},getAll:function(e){var t=F(this).entries;R(arguments.length,1);for(var n=S(e),i=[],r=0;r<t.length;r++)t[r].key===n&&Q(i,t[r].value);return i},has:function(e){for(var t=F(this).entries,n=R(arguments.length,1),i=S(e),r=n<2?void 0:arguments[1],s=void 0===r?r:S(r),o=0;o<t.length;){var a=t[o++];if(a.key===i&&(void 0===s||a.value===s))return!0}return!1},set:function(e,t){var n=F(this);R(arguments.length,1);for(var i,r=n.entries,s=!1,o=S(e),a=S(t),d=0;d<r.length;d++)(i=r[d]).key===o&&(s?ee(r,d--,1):(s=!0,i.value=a));s||Q(r,{key:o,value:a}),l||(this.size=r.length),n.updateURL()},sort:function(){var e=F(this);P(e.entries,(function(e,t){return e.key>t.key?1:-1})),e.updateURL()},forEach:function(e){for(var t,n=F(this).entries,i=b(e,arguments.length>1?arguments[1]:void 0),r=0;r<n.length;)i((t=n[r++]).value,t.key,this)},keys:function(){return new pe(this,"keys")},values:function(){return new pe(this,"values")},entries:function(){return new pe(this,"entries")}},{enumerable:!0}),u(ge,D,ge.entries,{name:"entries"}),u(ge,"toString",(function(){return F(this).serialize()}),{enumerable:!0}),l&&h(ge,"size",{get:function(){return F(this).entries.length},configurable:!0,enumerable:!0}),p(ve,x),i({global:!0,constructor:!0,forced:!c},{URLSearchParams:ve}),!c&&w(N)){var we=d(B.has),ye=d(B.set),be=function(e){if(A(e)){var t,n=e.body;if(_(n)===x)return t=e.headers?new N(e.headers):new N,we(t,"content-type")||ye(t,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),O(e,{body:E(0,S(n)),headers:E(0,t)})}return e};if(w(j)&&i({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(e){return j(e,arguments.length>1?be(arguments[1]):{})}}),w(U)){var _e=function(e){return g(this,H),new U(e,arguments.length>1?be(arguments[1]):{})};H.constructor=_e,_e.prototype=H,i({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:_e})}}e.exports={URLSearchParams:ve,getState:F}},6945:(e,t,n)=>{"use strict";n(5787)},6843:(e,t,n)=>{"use strict";n(4599);var i,r=n(6673),s=n(5793),o=n(7289),a=n(9409),d=n(2521),l=n(773),c=n(9169),u=n(881),h=n(8914),f=n(7022),p=n(8916),m=n(9031),v=n(4989),g=n(4016).codeAt,w=n(4378),y=n(8014),b=n(8462),_=n(361),I=n(5787),A=n(1122),S=A.set,O=A.getterFor("URL"),E=I.URLSearchParams,M=I.getState,k=a.URL,T=a.TypeError,R=a.parseInt,C=Math.floor,P=Math.pow,D=l("".charAt),x=l(/./.exec),Y=l([].join),L=l(1..toString),F=l([].pop),V=l([].push),j=l("".replace),U=l([].shift),N=l("".split),H=l("".slice),B=l("".toLowerCase),q=l([].unshift),J="Invalid scheme",W="Invalid host",z="Invalid port",K=/[a-z]/i,$=/[\d+-.a-z]/i,G=/\d/,Q=/^0x/i,X=/^[0-7]+$/,Z=/^\d+$/,ee=/^[\da-f]+$/i,te=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ne=/[\0\t\n\r #/:<>?@[\\\]^|]/,ie=/^[\u0000-\u0020]+/,re=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,se=/[\t\n\r]/g,oe=function(e){var t,n,i,r;if("number"==typeof e){for(t=[],n=0;n<4;n++)q(t,e%256),e=C(e/256);return Y(t,".")}if("object"==typeof e){for(t="",i=function(e){for(var t=null,n=1,i=null,r=0,s=0;s<8;s++)0!==e[s]?(r>n&&(t=i,n=r),i=null,r=0):(null===i&&(i=s),++r);return r>n?i:t}(e),n=0;n<8;n++)r&&0===e[n]||(r&&(r=!1),i===n?(t+=n?":":"::",r=!0):(t+=L(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},ae={},de=p({},ae,{" ":1,'"':1,"<":1,">":1,"`":1}),le=p({},de,{"#":1,"?":1,"{":1,"}":1}),ce=p({},le,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),ue=function(e,t){var n=g(e,0);return n>32&&n<127&&!f(t,e)?e:encodeURIComponent(e)},he={ftp:21,file:null,http:80,https:443,ws:80,wss:443},fe=function(e,t){var n;return 2===e.length&&x(K,D(e,0))&&(":"===(n=D(e,1))||!t&&"|"===n)},pe=function(e){var t;return e.length>1&&fe(H(e,0,2))&&(2===e.length||"/"===(t=D(e,2))||"\\"===t||"?"===t||"#"===t)},me=function(e){return"."===e||"%2e"===B(e)},ve={},ge={},we={},ye={},be={},_e={},Ie={},Ae={},Se={},Oe={},Ee={},Me={},ke={},Te={},Re={},Ce={},Pe={},De={},xe={},Ye={},Le={},Fe=function(e,t,n){var i,r,s,o=y(e);if(t){if(r=this.parse(o))throw new T(r);this.searchParams=null}else{if(void 0!==n&&(i=new Fe(n,!0)),r=this.parse(o,null,i))throw new T(r);(s=M(new E)).bindURL(this),this.searchParams=s}};Fe.prototype={type:"URL",parse:function(e,t,n){var r,s,o,a,d,l=this,c=t||ve,u=0,h="",p=!1,g=!1,w=!1;for(e=y(e),t||(l.scheme="",l.username="",l.password="",l.host=null,l.port=null,l.path=[],l.query=null,l.fragment=null,l.cannotBeABaseURL=!1,e=j(e,ie,""),e=j(e,re,"$1")),e=j(e,se,""),r=m(e);u<=r.length;){switch(s=r[u],c){case ve:if(!s||!x(K,s)){if(t)return J;c=we;continue}h+=B(s),c=ge;break;case ge:if(s&&(x($,s)||"+"===s||"-"===s||"."===s))h+=B(s);else{if(":"!==s){if(t)return J;h="",c=we,u=0;continue}if(t&&(l.isSpecial()!==f(he,h)||"file"===h&&(l.includesCredentials()||null!==l.port)||"file"===l.scheme&&!l.host))return;if(l.scheme=h,t)return void(l.isSpecial()&&he[l.scheme]===l.port&&(l.port=null));h="","file"===l.scheme?c=Te:l.isSpecial()&&n&&n.scheme===l.scheme?c=ye:l.isSpecial()?c=Ae:"/"===r[u+1]?(c=be,u++):(l.cannotBeABaseURL=!0,V(l.path,""),c=xe)}break;case we:if(!n||n.cannotBeABaseURL&&"#"!==s)return J;if(n.cannotBeABaseURL&&"#"===s){l.scheme=n.scheme,l.path=v(n.path),l.query=n.query,l.fragment="",l.cannotBeABaseURL=!0,c=Le;break}c="file"===n.scheme?Te:_e;continue;case ye:if("/"!==s||"/"!==r[u+1]){c=_e;continue}c=Se,u++;break;case be:if("/"===s){c=Oe;break}c=De;continue;case _e:if(l.scheme=n.scheme,s===i)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=v(n.path),l.query=n.query;else if("/"===s||"\\"===s&&l.isSpecial())c=Ie;else if("?"===s)l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=v(n.path),l.query="",c=Ye;else{if("#"!==s){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=v(n.path),l.path.length--,c=De;continue}l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,l.path=v(n.path),l.query=n.query,l.fragment="",c=Le}break;case Ie:if(!l.isSpecial()||"/"!==s&&"\\"!==s){if("/"!==s){l.username=n.username,l.password=n.password,l.host=n.host,l.port=n.port,c=De;continue}c=Oe}else c=Se;break;case Ae:if(c=Se,"/"!==s||"/"!==D(h,u+1))continue;u++;break;case Se:if("/"!==s&&"\\"!==s){c=Oe;continue}break;case Oe:if("@"===s){p&&(h="%40"+h),p=!0,o=m(h);for(var b=0;b<o.length;b++){var _=o[b];if(":"!==_||w){var I=ue(_,ce);w?l.password+=I:l.username+=I}else w=!0}h=""}else if(s===i||"/"===s||"?"===s||"#"===s||"\\"===s&&l.isSpecial()){if(p&&""===h)return"Invalid authority";u-=m(h).length+1,h="",c=Ee}else h+=s;break;case Ee:case Me:if(t&&"file"===l.scheme){c=Ce;continue}if(":"!==s||g){if(s===i||"/"===s||"?"===s||"#"===s||"\\"===s&&l.isSpecial()){if(l.isSpecial()&&""===h)return W;if(t&&""===h&&(l.includesCredentials()||null!==l.port))return;if(a=l.parseHost(h))return a;if(h="",c=Pe,t)return;continue}"["===s?g=!0:"]"===s&&(g=!1),h+=s}else{if(""===h)return W;if(a=l.parseHost(h))return a;if(h="",c=ke,t===Me)return}break;case ke:if(!x(G,s)){if(s===i||"/"===s||"?"===s||"#"===s||"\\"===s&&l.isSpecial()||t){if(""!==h){var A=R(h,10);if(A>65535)return z;l.port=l.isSpecial()&&A===he[l.scheme]?null:A,h=""}if(t)return;c=Pe;continue}return z}h+=s;break;case Te:if(l.scheme="file","/"===s||"\\"===s)c=Re;else{if(!n||"file"!==n.scheme){c=De;continue}switch(s){case i:l.host=n.host,l.path=v(n.path),l.query=n.query;break;case"?":l.host=n.host,l.path=v(n.path),l.query="",c=Ye;break;case"#":l.host=n.host,l.path=v(n.path),l.query=n.query,l.fragment="",c=Le;break;default:pe(Y(v(r,u),""))||(l.host=n.host,l.path=v(n.path),l.shortenPath()),c=De;continue}}break;case Re:if("/"===s||"\\"===s){c=Ce;break}n&&"file"===n.scheme&&!pe(Y(v(r,u),""))&&(fe(n.path[0],!0)?V(l.path,n.path[0]):l.host=n.host),c=De;continue;case Ce:if(s===i||"/"===s||"\\"===s||"?"===s||"#"===s){if(!t&&fe(h))c=De;else if(""===h){if(l.host="",t)return;c=Pe}else{if(a=l.parseHost(h))return a;if("localhost"===l.host&&(l.host=""),t)return;h="",c=Pe}continue}h+=s;break;case Pe:if(l.isSpecial()){if(c=De,"/"!==s&&"\\"!==s)continue}else if(t||"?"!==s)if(t||"#"!==s){if(s!==i&&(c=De,"/"!==s))continue}else l.fragment="",c=Le;else l.query="",c=Ye;break;case De:if(s===i||"/"===s||"\\"===s&&l.isSpecial()||!t&&("?"===s||"#"===s)){if(".."===(d=B(d=h))||"%2e."===d||".%2e"===d||"%2e%2e"===d?(l.shortenPath(),"/"===s||"\\"===s&&l.isSpecial()||V(l.path,"")):me(h)?"/"===s||"\\"===s&&l.isSpecial()||V(l.path,""):("file"===l.scheme&&!l.path.length&&fe(h)&&(l.host&&(l.host=""),h=D(h,0)+":"),V(l.path,h)),h="","file"===l.scheme&&(s===i||"?"===s||"#"===s))for(;l.path.length>1&&""===l.path[0];)U(l.path);"?"===s?(l.query="",c=Ye):"#"===s&&(l.fragment="",c=Le)}else h+=ue(s,le);break;case xe:"?"===s?(l.query="",c=Ye):"#"===s?(l.fragment="",c=Le):s!==i&&(l.path[0]+=ue(s,ae));break;case Ye:t||"#"!==s?s!==i&&("'"===s&&l.isSpecial()?l.query+="%27":l.query+="#"===s?"%23":ue(s,ae)):(l.fragment="",c=Le);break;case Le:s!==i&&(l.fragment+=ue(s,de))}u++}},parseHost:function(e){var t,n,i;if("["===D(e,0)){if("]"!==D(e,e.length-1))return W;if(t=function(e){var t,n,i,r,s,o,a,d=[0,0,0,0,0,0,0,0],l=0,c=null,u=0,h=function(){return D(e,u)};if(":"===h()){if(":"!==D(e,1))return;u+=2,c=++l}for(;h();){if(8===l)return;if(":"!==h()){for(t=n=0;n<4&&x(ee,h());)t=16*t+R(h(),16),u++,n++;if("."===h()){if(0===n)return;if(u-=n,l>6)return;for(i=0;h();){if(r=null,i>0){if(!("."===h()&&i<4))return;u++}if(!x(G,h()))return;for(;x(G,h());){if(s=R(h(),10),null===r)r=s;else{if(0===r)return;r=10*r+s}if(r>255)return;u++}d[l]=256*d[l]+r,2!=++i&&4!==i||l++}if(4!==i)return;break}if(":"===h()){if(u++,!h())return}else if(h())return;d[l++]=t}else{if(null!==c)return;u++,c=++l}}if(null!==c)for(o=l-c,l=7;0!==l&&o>0;)a=d[l],d[l--]=d[c+o-1],d[c+--o]=a;else if(8!==l)return;return d}(H(e,1,-1)),!t)return W;this.host=t}else if(this.isSpecial()){if(e=w(e),x(te,e))return W;if(t=function(e){var t,n,i,r,s,o,a,d=N(e,".");if(d.length&&""===d[d.length-1]&&d.length--,(t=d.length)>4)return e;for(n=[],i=0;i<t;i++){if(""===(r=d[i]))return e;if(s=10,r.length>1&&"0"===D(r,0)&&(s=x(Q,r)?16:8,r=H(r,8===s?1:2)),""===r)o=0;else{if(!x(10===s?Z:8===s?X:ee,r))return e;o=R(r,s)}V(n,o)}for(i=0;i<t;i++)if(o=n[i],i===t-1){if(o>=P(256,5-t))return null}else if(o>255)return null;for(a=F(n),i=0;i<n.length;i++)a+=n[i]*P(256,3-i);return a}(e),null===t)return W;this.host=t}else{if(x(ne,e))return W;for(t="",n=m(e),i=0;i<n.length;i++)t+=ue(n[i],ae);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||"file"===this.scheme},includesCredentials:function(){return""!==this.username||""!==this.password},isSpecial:function(){return f(he,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;!t||"file"===this.scheme&&1===t&&fe(e[0],!0)||e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,i=e.password,r=e.host,s=e.port,o=e.path,a=e.query,d=e.fragment,l=t+":";return null!==r?(l+="//",e.includesCredentials()&&(l+=n+(i?":"+i:"")+"@"),l+=oe(r),null!==s&&(l+=":"+s)):"file"===t&&(l+="//"),l+=e.cannotBeABaseURL?o[0]:o.length?"/"+Y(o,"/"):"",null!==a&&(l+="?"+a),null!==d&&(l+="#"+d),l},setHref:function(e){var t=this.parse(e);if(t)throw new T(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if("blob"===e)try{return new Ve(e.path[0]).origin}catch(e){return"null"}return"file"!==e&&this.isSpecial()?e+"://"+oe(this.host)+(null!==t?":"+t:""):"null"},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(y(e)+":",ve)},getUsername:function(){return this.username},setUsername:function(e){var t=m(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=ue(t[n],ce)}},getPassword:function(){return this.password},setPassword:function(e){var t=m(y(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=ue(t[n],ce)}},getHost:function(){var e=this.host,t=this.port;return null===e?"":null===t?oe(e):oe(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,Ee)},getHostname:function(){var e=this.host;return null===e?"":oe(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,Me)},getPort:function(){var e=this.port;return null===e?"":y(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(""===(e=y(e))?this.port=null:this.parse(e,ke))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+Y(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Pe))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){""===(e=y(e))?this.query=null:("?"===D(e,0)&&(e=H(e,1)),this.query="",this.parse(e,Ye)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){""!==(e=y(e))?("#"===D(e,0)&&(e=H(e,1)),this.fragment="",this.parse(e,Le)):this.fragment=null},update:function(){this.query=this.searchParams.serialize()||null}};var Ve=function(e){var t=h(this,je),n=_(arguments.length,1)>1?arguments[1]:void 0,i=S(t,new Fe(e,!1,n));s||(t.href=i.serialize(),t.origin=i.getOrigin(),t.protocol=i.getProtocol(),t.username=i.getUsername(),t.password=i.getPassword(),t.host=i.getHost(),t.hostname=i.getHostname(),t.port=i.getPort(),t.pathname=i.getPathname(),t.search=i.getSearch(),t.searchParams=i.getSearchParams(),t.hash=i.getHash())},je=Ve.prototype,Ue=function(e,t){return{get:function(){return O(this)[e]()},set:t&&function(e){return O(this)[t](e)},configurable:!0,enumerable:!0}};if(s&&(u(je,"href",Ue("serialize","setHref")),u(je,"origin",Ue("getOrigin")),u(je,"protocol",Ue("getProtocol","setProtocol")),u(je,"username",Ue("getUsername","setUsername")),u(je,"password",Ue("getPassword","setPassword")),u(je,"host",Ue("getHost","setHost")),u(je,"hostname",Ue("getHostname","setHostname")),u(je,"port",Ue("getPort","setPort")),u(je,"pathname",Ue("getPathname","setPathname")),u(je,"search",Ue("getSearch","setSearch")),u(je,"searchParams",Ue("getSearchParams")),u(je,"hash",Ue("getHash","setHash"))),c(je,"toJSON",(function(){return O(this).serialize()}),{enumerable:!0}),c(je,"toString",(function(){return O(this).serialize()}),{enumerable:!0}),k){var Ne=k.createObjectURL,He=k.revokeObjectURL;Ne&&c(Ve,"createObjectURL",d(Ne,k)),He&&c(Ve,"revokeObjectURL",d(He,k))}b(Ve,"URL"),r({global:!0,constructor:!0,forced:!o,sham:!s},{URL:Ve})},305:(e,t,n)=>{"use strict";n(6843)},4801:(e,t,n)=>{"use strict";var i=n(6673),r=n(4564);i({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return r(URL.prototype.toString,this)}})}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i].call(s.exports,s,s.exports,n),s.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{handle:()=>C,listen:()=>x});n(1854),n(9993);class t{constructor(e){this.hint=e}notifyRendered(){var e,t;const n={adProdSetCode:this.hint.adProdSetCode,measurableUrl:this.hint.measurableUrl,requestId:this.hint.requestId,type:"frame",viewableInfo:null===(e=this.hint.viewableInfoList)||void 0===e?void 0:e[0],viewableTrackingUrlList:null===(t=this.hint.viewableTrackingUrlList)||void 0===t?void 0:t[0],viewableUrl:this.hint.viewableUrl,vimpsMode:this.hint.vimpsMode,isAudit:this.hint.isAudit,sspKPIInfo:this.hint.sspKPIInfo};window.yads_vimps_hint=n}static notifyLoaded(){if(this.isTopWindow())return;const e=window.yads_vimps_hint;let n;if(!e)return n=t.extractAdProdSetCodeForNonYDA(),void window.parent.postMessage({cmd:"frameLoaded",vimpsMode:-1,adprodsetCode:n,requestId:"non_ydn"},"*");n=e.adProdSetCode;let i=0;const r=function(){var s;const o=t.buildFrameLoadMessage("frameLoaded",e,null,!0);if(!o)return void(i<10?(i++,window.setTimeout(r,100)):window.parent.postMessage({cmd:"frameLoaded",vimpsMode:-1,adprodsetCode:n,requestId:"non_ydn"},"*"));null===(s=window.parent)||void 0===s||s.postMessage(o,"*"),t.createFirstAdAreaChecker(e);const a=t.createOnScroll(e);window.addEventListener("touchmove",a,!1),window.addEventListener("scroll",a,!1)};r()}static isTopWindow(){return window===window.top}static extractAdProdSetCodeForNonYDA(){const e=window.location.search.match(/[?&]s=([^&]+)/);return e&&2===e.length?e[1]:""}static buildFrameLoadMessage(e,t,n,i){const r=n||Re.findViewableTargetElements(document);if(0!==r.length)return{cmd:e,vimpsMode:t.vimpsMode,adprodsetCode:t.adProdSetCode,requestId:t.requestId,adInfoList:r.map(((e,n)=>{var r,s;const o=e.getBoundingClientRect();return{top:o.top,right:o.right,bottom:o.bottom,left:o.left,viewableInfo:(null===(r=t.viewableInfo)||void 0===r?void 0:r[n])||"",viewableTrackingUrlList:i&&(null===(s=t.viewableTrackingUrlList)||void 0===s?void 0:s[n])||[]}})),measurableUrl:t.measurableUrl,viewableUrl:t.viewableUrl,sspKPIInfo:null==t?void 0:t.sspKPIInfo,isAudit:t.isAudit}}static checkPositionChange(e,t){let n=!1;const i=e.length;for(let r=0;r<i;r++){const i=e[r],s=i.getBoundingClientRect(),o=t[i];o&&o.top==s.top&&o.right==s.right&&o.left==s.left&&o.bottom==s.bottom||(n=!0,t[i]=s)}return n}static createFirstAdAreaChecker(e){const n=Re.findViewableTargetElements(document);if("ResizeObserver"in window){const i=new ResizeObserver((()=>{const i=t.buildFrameLoadMessage("frameScrolled",e,n,!1);i&&window.parent.postMessage(i,"*")}));for(const e of n)i.observe(e);i.observe(document.body)}else{const n=100;let i=0;const r=e=>{for(const t of e){const e=t.getBoundingClientRect();if(e.top!==t.dataset.top||e.left!==t.dataset.left||e.width!==t.dataset.width||e.height!==t.dataset.height)return t.dataset.top=e.top,t.dataset.left=e.left,t.dataset.width=e.width,t.dataset.height=e.height,!0}return!1},s=()=>{if(i>=5e3)return;const o=Re.findViewableTargetElements(document);if(r(o)){const n=t.buildFrameLoadMessage("frameScrolled",e,o,!1);if(!n)return;window.parent.postMessage(n,"*")}i+=n,setTimeout(s,n)};s()}}static createOnScroll(e){const n={};let i=0;let r;return function s(){r||(r=setInterval(s,500));const o=(new Date).getTime();if(o-i<=100)return;i=o;const a=Re.findViewableTargetElements(document),d=t.buildFrameLoadMessage("frameScrolled",e,a,!1);d&&t.checkPositionChange(a,n)&&window.parent.postMessage(d,"*")}}}class i{static dispatch(e){const t=e.replace("rla=SSP_FP_CODE_RLA","rla=").replace("rlb=SSP_FP_CODE_RLB","rlb=");document.write(t)}}class r{constructor(e,t,n){this.config=e,this.currentProductIndex=t,this.firstInside=n,this.product=this.config.products[t]}dispatch(){var e;Re.isInnerYadsIframe()?(this.firstInside&&window.parent.postMessage({cmd:"frameStarted",vimpsMode:this.config.measurable,patternCode:this.config.patternCode},"*"),this.sendBounceTrackingProtectionBeacon(),window.addEventListener("load",r.adDone,!1),void 0!==this.product.width&&void 0!==this.product.height&&(null===(e=window.parent)||void 0===e||e.postMessage({cmd:"resizeFrame",width:this.product.width,height:this.product.height},"*")),12!==this.product.adprodType?document.write(this.product.adTag):i.dispatch(this.product.adTag)):this.openYADSIframe()}openYADSIframe(){var e,t;let n=r.appendStartProdNum(this.config.frameTag,this.currentProductIndex);if(null===(t=null===(e=document.featurePolicy)||void 0===e?void 0:e.features)||void 0===t?void 0:t.call(e).includes("conversion-measurement")){const e=(new DOMParser).parseFromString(n,"text/html");e.getElementsByTagName("iframe")[0].allow+=";conversion-measurement",n=e.getElementsByTagName("div")[0].outerHTML}Re.insertTag(n,this.config.targetID)}sendBounceTrackingProtectionBeacon(){if(1e-6<=Math.random())return;const e=Re.parseQuery(window.location.href).fr_id;document.createElement("img").src="https://yads.yjtag.yahoo.co.jp/b?fr_id=".concat(e)}static replaceDspAdLinkTarget(){const e=document.getElementById("dsp-link-target");if(!e)return;const t=document.getElementsByTagName("a");let n=null;for(let e=0,i=t.length;e<i;e++)if(t[e].href.startsWith("http://ads.yahoo.com/clk?")){n=t[e];break}n&&(n.target=e.getAttribute("data-link-target")||"")}static adDone(){r.replaceDspAdLinkTarget(),t.notifyLoaded()}static appendStartProdNum(e,t){return e.replace("yads-iframe.html?","yads-iframe.html?start_prod_num=".concat(t,"&"))}}class s{constructor(e,t){var n,i;this.config=e,this.targetID=t,null!==(n=(i=this.config).adTag)&&void 0!==n||(i.adTag="")}dispatch(){Re.appendHtml(document.getElementById(this.targetID),this.config.adTag)}}class o{static dispatch(e){let{targetId:t,noAdCallback:n}=e;Re.sendNoAdEvent({domId:t,code:"NO_DISPLAYABLE_AD",message:"No displayable Ad"}),n&&Re.executeCallback(n,[{reason:2}])}}class a{constructor(e,t){var n,i;this.config=e,this.targetID=t,null!==(n=(i=this.config).adTag)&&void 0!==n||(i.adTag="")}dispatch(){Re.appendHtml(document.getElementById(this.targetID),this.config.adTag)}}class d{constructor(e,t){var n,i;this.config=e,this.targetID=t,null!==(n=(i=this.config).adTag)&&void 0!==n||(i.adTag="")}dispatch(){Re.appendHtml(document.getElementById(this.targetID),this.config.adTag)}}class l{constructor(e,t){this.config=e,this.currentProductIndex=t,this.product=this.config.products[t]||{}}dispatch(e){if(Re.isInnerYadsIframe())this.closeYADSIframe();else switch(3===this.product.adprodType&&this.reShowYADSIframe(null==e?void 0:e.displayNoneYadsIFrame),this.product.adprodType){case 3:new a(this.product,this.config.targetID).dispatch();break;case 15:new s(this.product,this.config.targetID).dispatch();break;case 16:new d(this.product,this.config.targetID).dispatch();break;default:o.dispatch({targetId:this.config.targetID,noAdCallback:this.config.noAdCallback})}}closeYADSIframe(){var e;null===(e=window.parent)||void 0===e||e.postMessage({cmd:"passbackFromIframe",dsCode:this.config.dsCode,currentProd:this.currentProductIndex},"*")}reShowYADSIframe(e){if(!e)return;const t=document.getElementById(this.config.targetID);if(!t)return;const n=t;n.renderAdHooks||(n.renderAdHooks=[]),e.style.display="";const i=()=>{e.style.display="none"};n.renderAdHooks.push(i),setTimeout(i,3e3)}}class c{constructor(e){var t,n,i,r,s,o,a,d,l,c,u,h,f;this.deliverConfig=e,this.currentProductIndex=0,this.alreadyPassbackFromGAM=!1,null!==(t=(a=this.deliverConfig).dsCode)&&void 0!==t||(a.dsCode=""),null!==(n=(d=this.deliverConfig).patternCode)&&void 0!==n||(d.patternCode=""),(l=this.deliverConfig).targetID||(l.targetID="yads_dummy_parent_"+Math.floor(999999999*Math.random())),null!==(i=(c=this.deliverConfig).noAdCallback)&&void 0!==i||(c.noAdCallback=""),null!==(r=(u=this.deliverConfig).measurable)&&void 0!==r||(u.measurable=0),"string"==typeof this.deliverConfig.measurable&&(this.deliverConfig.measurable=parseInt(this.deliverConfig.measurable,10)),null!==(s=(h=this.deliverConfig).frameTag)&&void 0!==s||(h.frameTag=""),null!==(o=(f=this.deliverConfig).products)&&void 0!==o||(f.products=[]),this.deliverConfig.products=this.deliverConfig.products.map((e=>{var t,n;return Object.assign(Object.assign({},e),{adprodsetCode:null!==(t=e.adprodsetCode)&&void 0!==t?t:"",adTag:null!==(n=e.adTag)&&void 0!==n?n:""})})),this.nonIframeYDA=[],this.deliverConfig.products.forEach((e=>{this.isRichAd(e)&&this.nonIframeYDA.push(e.adprodsetCode)})),this.friendlyIframeYDA={},this.deliverConfig.products.forEach((e=>{this.isRichAd(e)&&(this.friendlyIframeYDA[e.adprodsetCode]={width:e.width,height:e.height})}))}dispatch(e){var t,n,i,s,o;if(this.deliverConfig.fetchOnly&&!(null===(t=window.YJ_YADS.adCache)||void 0===t?void 0:t.isAvailable(this.deliverConfig.outputType)))return void(null===(n=window.YJ_YADS.adCache)||void 0===n||n.destroy(this.deliverConfig.dsCode));this.currentProductIndex=this.decideCurrentProductIndex(null==e?void 0:e.startProductIndex);const a=null===(i=this.deliverConfig.products)||void 0===i?void 0:i[this.currentProductIndex];this.removeAllChildNodesExceptIframe(this.deliverConfig.targetID);const d=document.getElementById(this.deliverConfig.targetID);if(this.deliverConfig.targetID&&!d){if((null===(o=null===(s=null===window||void 0===window?void 0:window.YJ_YADS)||void 0===s?void 0:s.asyncFlags)||void 0===o?void 0:o[this.deliverConfig.targetID])&&!Re.isInnerYadsIframe())return;document.write('<div id="'.concat(this.deliverConfig.targetID,'"></div>'))}if(this.isInsideProduct(a)){const t=void 0!==(null==e?void 0:e.startProductIndex);new r(this.deliverConfig,this.currentProductIndex,t).dispatch()}else new l(this.deliverConfig,this.currentProductIndex).dispatch(e)}getDeliverConfig(){return this.deliverConfig}decideCurrentProductIndex(e){let t=e||this.currentProductIndex;return Re.isInnerYadsIframe()||e!==this.currentProductIndex||t++,t}removeAllChildNodesExceptIframe(e){const t=document.getElementById(e);if(!t)return;const n=Array.prototype.slice.call(t.children);for(const e of n){const n=Array.prototype.slice.call(e.children).map((function(e){return e.nodeName}));"IFRAME"===e.nodeName||n.includes("IFRAME")||"1"===e.getAttribute("data-ydnnoad-container")||t.removeChild(e)}}isRichAd(e){return 3===e.adprodType&&0===e.iframeFlag}isInsideProduct(e){if(!e)return!1;return[3,4,5,6,12].includes(e.adprodType)&&!this.isRichAd(e)}passback(e){if("gam"===(null==e?void 0:e.from)){if(this.alreadyPassbackFromGAM)return;this.alreadyPassbackFromGAM=!0}this.currentProductIndex++,this.dispatch()}getCurrentProduct(){var e,t;return{adprodsetCode:null===(e=this.deliverConfig.products[this.currentProductIndex])||void 0===e?void 0:e.adprodsetCode,adprodType:null===(t=this.deliverConfig.products[this.currentProductIndex])||void 0===t?void 0:t.adprodType}}getNonIframeYDA(){return this.nonIframeYDA}getFriendlyIframeYDA(){return this.friendlyIframeYDA}}class u extends Error{constructor(e){super(e.message),this.toJSON=()=>{var e;return{name:this.name,message:this.message,level:this.level,stack:null!==(e=this.stack)&&void 0!==e?e:"",location:location.href,version:"1.73.0"}},this.name=this.constructor.name,this.level=e.level,e.stack&&(this.stack=e.stack)}}class h extends u{constructor(e){super({message:e,level:"Error"})}}class f extends u{constructor(e){super({message:e.message,level:"Error",stack:e.stack})}}n(1605);class p{constructor(e,t,n){var i,r,s,o;this.config=e,this.targetID=t,this.passback=n,null!==(i=(s=this.config).adURL)&&void 0!==i||(s.adURL=""),null!==(r=(o=this.config).position)&&void 0!==r||(o.position="")}dispatch(){var e;const t=document.getElementById(this.targetID),n=null===(e=this.config.position)||void 0===e?void 0:e.split(",").map((e=>e.trim()));for(const e of n){const n=document.createElement("div");n.id=e,null==t||t.appendChild(n)}Re.loadScript(this.config.adURL,(()=>{var e,t,i,r;let s;function o(){var e;for(const t of n){const n=document.getElementById(t);null===(e=null==n?void 0:n.parentNode)||void 0===e||e.removeChild(n)}}if(/\/mempf\/sync\//.test(this.config.adURL)?s=null===(t=null===(e=null===YAHOO||void 0===YAHOO?void 0:YAHOO.JP)||void 0===e?void 0:e.mempf)||void 0===t?void 0:t.sync:/\/mempf\/sync2\//.test(this.config.adURL)&&(s=null===(r=null===(i=null===YAHOO||void 0===YAHOO?void 0:YAHOO.JP)||void 0===i?void 0:i.mempf)||void 0===r?void 0:r.sync2),void 0===s)return o(),void this.passback();s.setPassbackFunction((()=>{o(),this.passback()})),s.init(n.join(","))}),!0)}}class m{constructor(e){var t,n;this.config=e,null!==(t=(n=this.config).adURL)&&void 0!==t||(n.adURL="")}dispatch(){Re.loadScript(this.config.adURL,null,!0)}}const v=(e,t)=>{Re.sendNoAdEvent({domId:e,code:"NO_DISPLAYABLE_AD",message:"No displayable Ad"}),t&&Re.executeCallback(t,[{reason:2}])};class g{constructor(e){var t,n,i,r,s,o;this.deliverConfig=e,this.currentProductIndex=0,null!==(t=(r=this.deliverConfig).products)&&void 0!==t||(r.products=[]),null!==(n=(s=this.deliverConfig).targetID)&&void 0!==n||(s.targetID=""),null!==(i=(o=this.deliverConfig).noAdCallback)&&void 0!==i||(o.noAdCallback="")}dispatch(){var e,t;const n=null===(e=this.deliverConfig.products)||void 0===e?void 0:e[this.currentProductIndex],i=null==n?void 0:n.adprodType;if(3===(null==(r=n)?void 0:r.adprodType)&&void 0!==(null==r?void 0:r.adURL))new m(n).dispatch();else{if(!(e=>16===(null==e?void 0:e.adprodType)&&void 0!==(null==e?void 0:e.adURL)&&void 0!==(null==e?void 0:e.position))(n))throw new h("".concat(i));if(this.deliverConfig.fetchOnly)return void(null===(t=window.YJ_YADS.adCache)||void 0===t||t.destroy(this.deliverConfig.dsCode));new p(n,this.deliverConfig.targetID,(()=>this.passback())).dispatch()}var r}passback(){let{fetchOnly:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;if(this.currentProductIndex++,this.currentProductIndex>=this.deliverConfig.products.length){if(e)return void(null===(t=window.YJ_YADS.adCache)||void 0===t||t.adFetchCompleted(this.deliverConfig.dsCode,(e=>{v(e.yads_parent_element,e.yads_noad_callback)})));v(this.deliverConfig.targetID,this.deliverConfig.noAdCallback)}else this.dispatch()}getDeliverConfig(){return this.deliverConfig}}class w{static dispatch(e,t){var n,i;const r=!!(null===(i=null===(n=null===window||void 0===window?void 0:window.YJ_YADS)||void 0===n?void 0:n.asyncFlags)||void 0===i?void 0:i[t]),s=!!document.getElementById(t)||r&&!Re.isInnerYadsIframe();Re.loadScript(e,null,s)}}class y{constructor(e){this.deliverConfig=e}dispatch(){var e,t,n;if(this.deliverConfig.fetchOnly&&!(null===(e=window.YJ_YADS.adCache)||void 0===e?void 0:e.isAvailable(this.deliverConfig.outputType)))return void(null===(t=window.YJ_YADS.adCache)||void 0===t||t.destroy(this.deliverConfig.dsCode));const i=(null===(n=this.deliverConfig.products)||void 0===n?void 0:n[0].adURL)||"",r=this.deliverConfig.targetID||"";w.dispatch(i,r)}getDeliverConfig(){return this.deliverConfig}}class b{constructor(e){var t;"js_single"===(null==(t=e)?void 0:t.outputType)&&void 0!==(null==t?void 0:t.products)?this.deliverProduct=new y(e):(e=>"js_responsive"===(null==e?void 0:e.outputType)&&void 0!==(null==e?void 0:e.products))(e)?this.deliverProduct=new g(e):(e=>"js_frame"===(null==e?void 0:e.outputType)&&["string","number","undefined"].some((t=>typeof(null==e?void 0:e.measurable)===t))&&void 0!==(null==e?void 0:e.frameTag)&&void 0!==(null==e?void 0:e.products))(e)&&(this.deliverProduct=new c(e),Re.isInnerYadsIframe()&&(window.gCRITEO={passback:()=>this.passback()}))}dispatch(e){this.deliverProduct.dispatch(e)}passback(e){var t,n;null===(n=(t=this.deliverProduct).passback)||void 0===n||n.call(t,e)}getDeliverConfig(){return this.deliverProduct.getDeliverConfig()}getNonIframeYDA(){var e,t;return null===(t=(e=this.deliverProduct).getNonIframeYDA)||void 0===t?void 0:t.call(e)}getFriendlyIframeYDA(){var e,t;return null===(t=(e=this.deliverProduct).getFriendlyIframeYDA)||void 0===t?void 0:t.call(e)}}class _{constructor(e,t){this.window=e,this.scope=t,t in e||(e[this.scope]={})}store(e,t){this.window[this.scope][e]=t}fetch(e){return this.window[this.scope][e]}fetchFromTargetID(e){for(const t in this.window[this.scope])if(Object.prototype.hasOwnProperty.call(this.window[this.scope],t)){const n=this.window[this.scope][t];if(n.getDeliverConfig().targetID===e)return n}}fetchOnIframe(){if(!Re.isInnerYadsIframe())return;const e=[];for(const t in this.window[this.scope])if(Object.prototype.hasOwnProperty.call(this.window[this.scope],t)){const n=this.window[this.scope][t];e.push(n)}return e[0]}}var I=n(8188);function A(){function e(e){if(!e)return;const t=function(e){var t,n;let i=-1,r="";if(Re.isInnerYadsIframe()){const e=new _(window.YJ_YADS,"deliverProduct").fetchOnIframe(),s=null==e?void 0:e.deliverProduct;if(s instanceof c){const e=s.getCurrentProduct();i=null!==(t=null==e?void 0:e.adprodType)&&void 0!==t?t:-1,r=null!==(n=null==e?void 0:e.adprodsetCode)&&void 0!==n?n:""}}const s={tk:"a72060e2-2747-4fff-a64b-84850dcd9e77",r:[]};for(const t of e)"HeavyAdIntervention"==t.body.id&&s.r.push({p:"intervention",d:"heavy_ad",data:{adprodtype:i,adprodsetcode:r,type:t.type,url:t.url,id:t.body.id,message:t.body.message,ext:(()=>{const e=document.querySelectorAll("video"),t=Array.from(e,(e=>e.src));return JSON.stringify(t)})()}});return 0===s.r.length?null:JSON.stringify(s)}(e);t&&navigator.sendBeacon("https://dsb.yahoo.co.jp/api/v1/stream",t)}if(!("ReportingObserver"in window))return;const t=new window.ReportingObserver((t=>{e(t)}),{types:["intervention"],buffered:!0});t.observe(),window.addEventListener("pagehide",(()=>{e(t.takeRecords())}))}n(305),n(4801),n(6945);class S{constructor(e){this.config=Object.assign({entryPoint:"https://dsb.yahoo.co.jp/api/v1/stream",clientID:"a72060e2-2747-4fff-a64b-84850dcd9e77",samplingRate:1},e)}send(e){if(1<this.config.samplingRate||this.config.samplingRate<=Math.random())return;const t={tk:this.config.clientID,r:[{data:e,p:this.config.project,d:this.config.dataset}]};window.navigator.sendBeacon&&window.navigator.sendBeacon(this.config.entryPoint,JSON.stringify(t))}}const O=Math.random()<.01?1:0;class E{constructor(e){this.beaconSenders=Object.assign({error:new S({project:"ms_sp_client",dataset:"yads_client_error"}),debug:new S({project:"ms_sp_client",dataset:"yads_sampling",samplingRate:1e-4}),referrer:new S({project:"ms_sp_client",dataset:"yads_referer",samplingRate:.01}),reward:new S({project:"ms_sp_client",dataset:"reward_log",samplingRate:.1}),viewablediff:new S({project:"ms_sp_client",dataset:"yads_client",samplingRate:O}),deprecatedPostMessage:new S({project:"ms_sp_client",dataset:"yads_deprecated_post_message",samplingRate:.01})},e)}error(e){this.includesLocalFile(e.stack)||this.beaconSenders.error.send(e.toJSON())}debug(e){this.beaconSenders.debug.send(e)}referrer(e){this.beaconSenders.referrer.send(e)}reward(e){this.beaconSenders.reward.send(e)}viewablediff(e){this.beaconSenders.viewablediff.send(e)}includesLocalFile(){return/file:\/\//.test(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}deprecatedPostMessage(e){try{this.beaconSenders.deprecatedPostMessage.send({event_data:"string"==typeof e.data?e.data:JSON.stringify(e.data),window_location:null===e.source?"":"location"in e.source&&"href"in e.source.location?e.source.location.href:"",root_window_location:(()=>{var t;try{if(null===e.source)return"";const n=null===(t=e.source)||void 0===t?void 0:t.top;return null==n?"":"location"in n&&"href"in n.location?n.location.href:""}catch(e){return""}})()})}catch(e){this.error(new u({level:"Warn",message:"Failed to Logger.deprecatedPostMessage(): ".concat(e),stack:e.stack}))}}}function M(e){if(Re.isSameOrigin())return!0;let t="";try{t=new URL(e).hostname}catch(e){return(new E).error(e),!1}const n="yahoo.co.jp";return!("i.yimg.jp"!==t&&"s.yimg.jp"!==t&&!t.endsWith(".".concat(n))&&t!==n)}class k{constructor(e,t){this.timeoutId=0,this.loadedFrame=e,this.origin=t.origin,this.win=t.source,this.listener=()=>{this.throttlingPostMessage()},this.forceStop=!1}postMessageOfPos(){const e=this.loadedFrame.getBoundingClientRect(),t={cmd:"notifyFramePos",vw:window.innerWidth,vh:window.innerHeight,cx:e.left,cy:e.top};this.forceStop||this.win.postMessage(t,this.origin)}throttlingPostMessage(){const e=this.loadedFrame.getBoundingClientRect();if(e.top>window.innerHeight||e.left>window.innerWidth||e.bottom<=0||e.right<=0)return;if(this.timeoutId)return;this.timeoutId=window.setTimeout((()=>{this.timeoutId=0,this.postMessageOfPos()}),62),this.postMessageOfPos()}listen(){this.forceStop=!1,window.addEventListener("scroll",this.listener)}detach(){this.forceStop=!0,window.removeEventListener("scroll",this.listener)}}function T(e){return null!==e&&"object"==typeof e&&"string"==typeof(null==e?void 0:e.parentId)&&"single_with_parent"===(null==e?void 0:e.type)&&function(e){return null!==e&&"object"==typeof e&&"string"==typeof(null==e?void 0:e.adProdSetCode)&&"string"==typeof(null==e?void 0:e.measurableUrl)&&"string"==typeof(null==e?void 0:e.requestId)&&"string"==typeof(null==e?void 0:e.viewableUrl)&&"number"==typeof(null==e?void 0:e.vimpsMode)&&(void 0===(null==e?void 0:e.viewableInfo)||Array.isArray(null==e?void 0:e.viewableInfo))&&(void 0===(null==e?void 0:e.viewableTrackingUrlList)||Array.isArray(null==e?void 0:e.viewableTrackingUrlList))&&"string"==typeof(null==e?void 0:e.isAudit)&&(void 0===(null==e?void 0:e.sspKPIInfo)||function(e){return null!==e&&"object"==typeof e&&"string"==typeof(null==e?void 0:e.url)&&"string"==typeof(null==e?void 0:e.tk)&&"string"==typeof(null==e?void 0:e.p)&&"string"==typeof(null==e?void 0:e.d)&&"string"==typeof(null==e?void 0:e.ds_code)&&"string"==typeof(null==e?void 0:e.request_id)&&"string"==typeof(null==e?void 0:e.bid_request_id)&&"string"==typeof(null==e?void 0:e.bid_response_id)}(null==e?void 0:e.sspKPIInfo))}(e)}const R=new Map;function C(e){const t=e.source;if(!M(e.origin))return;let n;const i=document.getElementsByTagName("iframe");for(const e of i)e.contentWindow===t&&(n=e);var r;n&&("string"==typeof e.data?"observeFrame"===e.data?((new E).deprecatedPostMessage(e),P(n,e)):"stopObserveFrame"===e.data&&((new E).deprecatedPostMessage(e),D(n)):"object"==typeof e.data&&(null!==(r=e.data)&&"object"==typeof r&&"cmd"in r&&"observeFrame"===(null==r?void 0:r.cmd)?P(n,e):function(e){return null!==e&&"object"==typeof e&&"cmd"in e&&"stopObserveFrame"===(null==e?void 0:e.cmd)}(e.data)&&D(n)))}function P(e,t){const n=new k(e,t);R.set(e,n),n.postMessageOfPos(),n.listen()}function D(e){const t=R.get(e);t&&t.detach()}function x(){window.addEventListener&&window.addEventListener("message",C)}class Y{constructor(e){var t;this.uadfHint={adProdSetCode:e.adProdSetCode,measurableUrl:e.measurableUrl,parentId:e.parentId||"",requestId:e.requestId,sspKPIInfo:e.sspKPIInfo,type:"single_with_parent",viewableInfo:null===(t=e.viewableInfoList)||void 0===t?void 0:t[0],viewableUrl:e.viewableUrl,vimpsMode:e.vimpsMode,isAudit:e.isAudit}}notifyRendered(){Re.isInnerYadsIframe()?window.parent.postMessage({cmd:"notifyNoADViewable",hint:this.uadfHint},"*"):Y.notify(this.uadfHint)}static notifyLoaded(e){Y.notify(e.hint)}static notify(e){const t=e.parentId&&document.getElementById(e.parentId);if(!t)return;const n=Y.generateNoAdViewableElem();t.insertAdjacentElement("afterbegin",n),window.YJ_UADF.YADSViewable.notifyRendered(e)}static generateNoAdViewableElem(){const e=document.createElement("div");e.setAttribute("data-ydnnoad-container","1"),e.style.width="100%",e.style.height="0",e.style.position="relative",e.style.zIndex="-9999";const t=document.createElement("div");return t.style.width="100%",t.style.paddingTop="56.25%",t.style.opacity="0",t.setAttribute("data-ydntxt-item","1"),t.setAttribute("data-ydnnoad","1"),e.appendChild(t),e}}function L(e){try{const t=function(e,t){const n={timeOrigin:null!==(o=null===(s=null===(r=null===window||void 0===window?void 0:window.YJ_YADS)||void 0===r?void 0:r.yadsFirstPerformanceInfo)||void 0===s?void 0:s.firstpageViewTiming)&&void 0!==o?o:0,origin:null!==(d=null===(a=null===window||void 0===window?void 0:window.location)||void 0===a?void 0:a.origin)&&void 0!==d?d:"",pathname:null!==(c=null===(l=null===window||void 0===window?void 0:window.location)||void 0===l?void 0:l.pathname)&&void 0!==c?c:"",typeTag:null!==(f=null===(h=null===(u=null===window||void 0===window?void 0:window.YJ_YADS)||void 0===u?void 0:u.yadsFirstPerformanceInfo)||void 0===h?void 0:h.typeTag)&&void 0!==f?f:"",firstNavigationType:null!==(v=null===(m=null===(p=null===window||void 0===window?void 0:window.YJ_YADS)||void 0===p?void 0:p.yadsFirstPerformanceInfo)||void 0===m?void 0:m.firstNavigationType)&&void 0!==v?v:"null"},i=t-n.timeOrigin;var r,s,o,a,d,l,c,u,h,f,p,m,v;return{ad_prod_set_code:e,render_time:Math.floor(i),first_navigation_type:n.firstNavigationType,type_tag:n.typeTag,url:n.origin+n.pathname}}(e,(new Date).getTime());t&&function(e){new S({project:"ms_sp_client",dataset:"yads_performance",samplingRate:5e-4}).send(e)}(t)}catch(e){(new E).error(new f(e))}}function F(e){var t;null===(t=null===window||void 0===window?void 0:window.parent)||void 0===t||t.postMessage({cmd:"yadsPerformance",adProdSetCode:e},"*")}function V(e){return!!(null==e?void 0:e.prerendering)}function j(e){var t;return null!==(t=null==e?void 0:e.activationStart)&&void 0!==t&&t}class U{listen(){Re.isInnerYadsIframe()||(window.addEventListener("message",(e=>this.handlePassbackFromIframe(e)),!1),window.addEventListener("message",(e=>this.handlePassbackFromGAM(e)),!1)),window.addEventListener("message",(e=>this.onMessageCallback(e)),!1)}handlePassbackFromIframe(e){var t;if(!e.origin)return;let n,i,r,s=!1;if("string"==typeof e.data){s=!0;const t=e.data.split(",");if(!t||3!==t.length)return;n=t[0],i=t[1],r=parseInt(t[2],10)}else{if(null===e.data||"object"!=typeof e.data)return;{const t=e.data;n=t.cmd,i=t.dsCode,r=t.currentProd}}if("passbackFromIframe"!==n)return;s&&(new E).deprecatedPostMessage(e);const o=this.findFrame(e.source);o&&(o.style.display="none");const a=new _(window.YJ_YADS,"deliverProduct").fetch(i);null===(t=null==a?void 0:a.dispatch)||void 0===t||t.call(a,{startProductIndex:r,displayNoneYadsIFrame:o})}handlePassbackFromGAM(e){var t,n;if(!e.origin)return;if(null===(n=e.data)||"object"!=typeof n||!("cmd"in n)||"passbackGAM"!==(null==n?void 0:n.cmd)||!("dsCode"in n)||"string"!=typeof(null==n?void 0:n.dsCode))return;const i=new _(window.YJ_YADS,"deliverProduct").fetch(e.data.dsCode);null===(t=null==i?void 0:i.passback)||void 0===t||t.call(i,{from:"gam"})}onMessageCallback(e){if(!M(e.origin))return;let t,n=!1;if("string"==typeof e.data)n=!0,t=this.parseMessage(e.data);else{if(null===e.data||"object"!=typeof e.data)return;t=e.data}var i;null!==(i=t)&&"object"==typeof i&&"resizeFrame"===(null==i?void 0:i.cmd)&&void 0!==(null==i?void 0:i.width)&&void 0!==(null==i?void 0:i.height)?(n&&(new E).deprecatedPostMessage(e),this.resizeFrame(t,e.source)):!function(e){return null!==e&&"object"==typeof e&&"notifyNoADViewable"===(null==e?void 0:e.cmd)&&T(null==e?void 0:e.hint)}(t)?!function(e){return null!==e&&"object"==typeof e&&"cmd"in e&&"logReferrer"===(null==e?void 0:e.cmd)&&"requestID"in e&&void 0!==(null==e?void 0:e.requestID)}(t)?!function(e){return null!==e&&"object"==typeof e&&"cmd"in e&&"yadsPerformance"===(null==e?void 0:e.cmd)&&"adProdSetCode"in e&&void 0!==(null==e?void 0:e.adProdSetCode)}(t)?!function(e){return null!==e&&"object"==typeof e&&"cmd"in e&&"rewardAdSuccess"===(null==e?void 0:e.cmd)&&"domId"in e&&"string"==typeof(null==e?void 0:e.domId)}(t)?function(e){return null!==e&&"object"==typeof e&&"cmd"in e&&"rewardAdError"===(null==e?void 0:e.cmd)&&"domId"in e&&"string"==typeof(null==e?void 0:e.domId)&&"message"in e&&"string"==typeof(null==e?void 0:e.message)}(t)&&U.handleRewardAdError(t):U.handleRewardAdSuccess(t):U.yadsPerformance(t):U.logReferrer(t):(n&&(new E).deprecatedPostMessage(e),Y.notifyLoaded(t))}resizeFrame(e,t){const n=this.findFrame(t);n&&(this.isValidFrameValue(e.width)&&(n.width=e.width),this.isValidFrameValue(e.height)&&(n.height=e.height))}parseMessage(e){const t=e.split(",");switch(t[0]){case"resizeFrame":return{cmd:"resizeFrame",width:t[1],height:t[2]};case"notifyNoADViewable":return{cmd:"notifyNoADViewable",hint:JSON.parse(t.slice(1).join())};default:return{cmd:""}}}findFrame(e){const t=document.getElementsByTagName("IFRAME");for(let n=0,i=t.length;n<i;n++)if(e==t[n].contentWindow)return t[n]}isValidFrameValue(e){return!!e&&("string"==typeof e&&!!e.trim())}static logReferrer(e){if(/^https?:\/\/(.*\.)?yahoo\.co\.jp(:\d+)?.*/.test(window.location.href))return;const t=document.referrer;if(!t)return;const n=new E,i={request_id:e.requestID,referrer:t};n.referrer(i)}static yadsPerformance(e){L(e.adProdSetCode)}static handleRewardAdSuccess(e){const t=new E,n=new _(window.YJ_YADS,"deliverProduct").fetchFromTargetID(e.domId),i=null==n?void 0:n.getDeliverConfig(),r={page_url:document.referrer,parent_element:e.domId,type:"rewardAdSuccess",ds_code:(null==i?void 0:i.dsCode)||"",pattern_code:(null==i?void 0:i.patternCode)||"",request_id:(null==i?void 0:i.requestID)||""};t.reward(r);const s=document.getElementById(e.domId);null!==s&&s.dispatchEvent(new Event("rewardAdGranted"))}static handleRewardAdError(e){const t=new E,n=new _(window.YJ_YADS,"deliverProduct").fetchFromTargetID(e.domId),i=null==n?void 0:n.getDeliverConfig(),r={page_url:document.referrer,parent_element:e.domId,type:"rewardAdError",ds_code:(null==i?void 0:i.dsCode)||"",pattern_code:(null==i?void 0:i.patternCode)||"",request_id:(null==i?void 0:i.requestID)||""};t.reward(r),Re.removeAllChildNodes(e.domId),Re.sendNoAdEvent({domId:e.domId,code:"ERROR_ON_DISPLAY",message:e.message})}}const N="yads-visibilitychange",H="in",B="out",q="visibilitychange",J="https://s.yimg.jp",W={};function z(e){$(H,e)}function K(e){$(B,e)}function $(e,t){W[e]&&t&&"function"==typeof t&&W[e].push(t)}function G(e){if(e.type!==q)return;const t=document.hidden?B:H,n={cmd:N,visibilityState:t},i=document.getElementsByTagName("iframe");for(const e of i)e.contentWindow&&(e.src.startsWith(J)&&e.name.startsWith("yads")?e.contentWindow.postMessage(n,J):window===window.top&&""===e.src&&e.contentWindow.postMessage(n,window.location.origin))}function Q(e){if("message"!==e.type||!e.data)return;let t,n,i=!1;if(null!==(r=e.data)&&"object"==typeof r){const i=e.data;t=i.cmd,n=i.visibilityState}else{if("string"!=typeof e.data)return;{i=!0;const r=e.data.split(",");t=r[0],n=r[1]}}var r;if(t!==N)return;i&&(new E).deprecatedPostMessage(e);const s=W[n];for(const e of s)try{e()}catch(e){}}function X(){window!==window.top&&window.addEventListener("message",Q,!1)}W[H]=[],W[B]=[];const Z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(null==t?void 0:t.execFuncForcibly)?e():(null===document||void 0===document?void 0:document.prerendering)?document.addEventListener("prerenderingchange",e,{once:!0}):e()};function ee(e){if(Array.isArray(e)&&0!==e.length)for(const t of e){if(!t)continue;if(!/^https:\/\//.test(t))continue;const e=document.createElement("img");try{e.src=t}catch(e){}}}function te(e){e&&document.body.insertAdjacentHTML("beforeend",e)}function ne(e){const t=function(e){if(!e)return"";const t=e.split("-");return 3===t.length?t[0]:""}(e);return new _(window.YJ_YADS,"deliverProduct").fetch(t)}function ie(e,t){if(!t)return;const n="string"==typeof e?document.getElementById(e):e,i=t.length;for(let e=0;e<i;e++)re(n,t[e])}function re(e,t){if(!t)return;const n=document.createElement("script");n.type="text/javascript",n.src=t,e?e.appendChild(n):document.body.appendChild(n)}function se(){return window===window.top}function oe(e,t,n,i){Re.getFunctionObject(e)?i():t&&Re.loadScript("https://s.yimg.jp/images/listing/tool/yads/".concat(t),i,!0)}function ae(e,t){var n;try{const i=[];for(const t of e.filter((e=>"string"!=typeof e))){"string"==typeof t.image_url&&i.push(t.image_url);const e=t.items;Array.isArray(e)&&i.push(...e.filter((e=>"object"==typeof e&&null!==e&&"string"==typeof e.image_url)).map((e=>e.image_url)))}const r=i.map((e=>{const t=document.createElement("link");return t.rel="preload",t.href=e,t.as="image",t})),s="string"==typeof t.js_file_name?["https://s.yimg.jp/images/listing/tool/yads/".concat(t.js_file_name)].map((e=>{const t=document.createElement("link");return t.rel="preload",t.href=e,t.as="script",t})):[];(null!==(n=document.head)&&void 0!==n?n:document.body).append(...r,...s)}catch(e){(new E).error(e)}}const de=(e,t)=>(e.targetID=t.yads_parent_element,e.pos_info[0]&&(e.pos_info[0].p_elem=t.yads_parent_element),e.fetch_only=!1,e),le=e=>"js_single"!==e.output_type&&"js_responsive"!==e.output_type||(!e.targetID||!!document.getElementById(e.targetID));function ce(e){return e.split("-")[0]}class ue{constructor(e,t){this.ydaAds=e,this.ydaMetaInfo=t}render(){var e;if(!this.ydaMetaInfo.fetch_only)return this.renderFIF();null===(e=window.YJ_YADS.adCache)||void 0===e||e.destroy(ce(this.ydaMetaInfo.adprodset_code))}renderFIF(){Z((()=>{var e,t,n,i;const r=this.ydaMetaInfo.targetID,s=this.ydaMetaInfo.adprodset_code,o=this.adprodsetCodeToPatternCode(s),a=ne(s),d={width:(null===(t=null===(e=null==a?void 0:a.getFriendlyIframeYDA)||void 0===e?void 0:e.call(a))||void 0===t?void 0:t[s].width)||"100%",height:(null===(i=null===(n=null==a?void 0:a.getFriendlyIframeYDA)||void 0===n?void 0:n.call(a))||void 0===i?void 0:i[s].height)||"100%"},l='<div style="text-align: center;"><iframe id="'.concat(r,'_ad_frame" name style="border:none;clear:both;margin:auto;overflow:hidden;display:block;" width="').concat(d.width,'" height="').concat(d.height,'" scrolling="no" title="Ad Content" allowtransparency="true" allow="fullscreen; attribution-reporting" allowfullscreen="true" frameborder="0"></iframe></div>'),c=document.createElement("script"),u='<style>body{background-color: transparent; padding: 0px; margin: 0px; text-align: center;}</style><body><script src="https://yads.c.yimg.jp/js/yads-async.js"><\/script><script>yadsRenderAd_v2('.concat(JSON.stringify(this.ydaAds),", ").concat(JSON.stringify(this.ydaMetaInfo),")<\/script><script>window.parent.postMessage({cmd: 'frameStarted', vimpsMode: 1, patternCode: '").concat(o,"'}, '*');window.addEventListener('load',function(){window.gAdController.adDone.apply(window.gAdController);});<\/script></body>").replace(/\n/g,"").replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/\//g,"\\/");c.insertAdjacentHTML("beforeend","!function(){const iframe=document.querySelector('#".concat(r,"_ad_frame');iframe.setAttribute('srcdoc','").concat(u,"')}();"));const h=document.getElementById(r);null==h||h.insertAdjacentHTML("beforeend",l),null==h||h.appendChild(c)}))}adprodsetCodeToPatternCode(e){if(!e)return"";const t=e.split("-");return 3===t.length?t[0]+"-"+t[1]:""}isHandle(){var e;const t=this.ydaMetaInfo.adprodset_code,n=ne(t);return!!((null===(e=null==n?void 0:n.getNonIframeYDA)||void 0===e?void 0:e.call(n))||[]).includes(t)&&!this.ydaMetaInfo.richad}}class he{constructor(e,t){this.hint=e,this.uadfNotifyRendered=t}notifyRendered(){var e,t;const n={adProdSetCode:this.hint.adProdSetCode,docWriteCaller:this.getDocWriteCaller(),measurableUrl:this.hint.measurableUrl,requestId:this.hint.requestId,sspKPIInfo:this.hint.sspKPIInfo,type:"doc_write",viewableInfo:null===(e=this.hint.viewableInfoList)||void 0===e?void 0:e[0],viewableTrackingUrlList:null===(t=this.hint.viewableTrackingUrlList)||void 0===t?void 0:t[0],viewableUrl:this.hint.viewableUrl,vimpsMode:this.hint.vimpsMode,isAudit:this.hint.isAudit};this.uadfNotifyRendered(n)}getDocWriteCaller(){const e=document.getElementsByTagName("script");let t=e.length-1;for(;t>=0;){const n=e[t];if(/\/\/yads\.(yjtag\.)?yahoo\.co\.jp\/tag\?/.test(n.src))return n;t--}return null}}class fe{constructor(e,t){this.hint=e,this.uadfNotifyRendered=t}notifyRendered(){var e,t;const n=["".concat(this.hint.parentId,"-rma"),"".concat(this.hint.parentId)];"67374_842217"!==function(e){if(!e)return"";const t=e.split("-");return 3===t.length?t[0]:""}(this.hint.adProdSetCode)&&n.push("rma-pdv");const i={adProdSetCode:this.hint.adProdSetCode,measurableUrl:this.hint.measurableUrl,parentIdList:n,requestId:this.hint.requestId,sspKPIInfo:this.hint.sspKPIInfo,type:"richad",viewableInfo:null===(e=this.hint.viewableInfoList)||void 0===e?void 0:e[0],viewableTrackingUrlList:null===(t=this.hint.viewableTrackingUrlList)||void 0===t?void 0:t[0],viewableUrl:this.hint.viewableUrl,vimpsMode:this.hint.vimpsMode,isAudit:this.hint.isAudit};this.uadfNotifyRendered(i)}}class pe{constructor(e,t){this.hint=e,this.uadfNotifyRendered=t}notifyRendered(){var e,t;const n={adProdSetCode:this.hint.adProdSetCode,measurableUrl:this.hint.measurableUrl,parentId:this.hint.parentId||"",requestId:this.hint.requestId,sspKPIInfo:this.hint.sspKPIInfo,type:"single_with_parent",viewableInfo:null===(e=this.hint.viewableInfoList)||void 0===e?void 0:e[0],viewableTrackingUrlList:null===(t=this.hint.viewableTrackingUrlList)||void 0===t?void 0:t[0],viewableUrl:this.hint.viewableUrl,vimpsMode:this.hint.vimpsMode,isAudit:this.hint.isAudit};this.uadfNotifyRendered(n)}}class me{constructor(e,t){this.hint=e,this.uadfNotifyRendered=t}notifyRendered(){var e,t;const n={adProdSetCode:this.hint.adProdSetCode,measurableUrl:this.hint.measurableUrl,requestId:this.hint.requestId,sspKPIInfo:this.hint.sspKPIInfo,type:"stream",viewableInfo:null===(e=this.hint.viewableInfoList)||void 0===e?void 0:e[0],viewableTrackingUrlList:null===(t=this.hint.viewableTrackingUrlList)||void 0===t?void 0:t[0],viewableUrl:this.hint.viewableUrl,vimpsMode:this.hint.vimpsMode,isAudit:this.hint.isAudit};this.uadfNotifyRendered(n)}}class ve{constructor(e,t){this.hint=e,this.uadfNotifyRendered=t}notifyRendered(){var e,t;const n={adNum:this.hint.adNum||0,adProdSetCode:this.hint.adProdSetCode,fetchNum:1,measurableUrl:this.hint.measurableUrl,requestId:this.hint.requestId,sspKPIInfo:this.hint.sspKPIInfo,type:"timeline",uniqueId:this.hint.parentId||"",viewableInfo:null===(e=this.hint.viewableInfoList)||void 0===e?void 0:e[0],viewableTrackingUrlList:null===(t=this.hint.viewableTrackingUrlList)||void 0===t?void 0:t[0],viewableUrl:this.hint.viewableUrl,vimpsMode:this.hint.vimpsMode,isAudit:this.hint.isAudit};this.uadfNotifyRendered(n)}}class ge{constructor(e){var n,i,r,s;switch(this.viewableHint=e,null!==(n=(r=this.viewableHint).viewableUrl)&&void 0!==n||(r.viewableUrl=""),null!==(i=(s=this.viewableHint).measurableUrl)&&void 0!==i||(s.measurableUrl=""),this.uadfNotifyRendered=window.YJ_UADF.YADSViewable.notifyRendered,this.viewableHint.viewableType){case"noAd":this.viewableNotifier=new Y(this.viewableHint);break;case"stream":this.viewableNotifier=new me(this.viewableHint,this.uadfNotifyRendered);break;case"timeline":this.viewableNotifier=new ve(this.viewableHint,this.uadfNotifyRendered);break;case"richAd":this.viewableNotifier=new fe(this.viewableHint,this.uadfNotifyRendered);break;case"frame":this.viewableNotifier=new t(this.viewableHint);break;default:this.viewableNotifier=this.getViewableNotifier()}}getViewableNotifier(){if("js_single"===this.viewableHint.outputType||"js_responsive"===this.viewableHint.outputType)return this.viewableHint.parentId?new pe(this.viewableHint,this.uadfNotifyRendered):new he(this.viewableHint,this.uadfNotifyRendered)}notifyRendered(){var e;null===(e=this.viewableNotifier)||void 0===e||e.notifyRendered()}}class we{constructor(e,t){this.ydaAds=e,this.ydaMetaInfo=t}render(){var e;const t=()=>{const e=this.insertProvisionalTarget();oe(this.ydaMetaInfo.callback,this.ydaMetaInfo.js_file_name,this.ydaMetaInfo.output_type,(()=>this.renderAfterLoaded(e)))};if(this.ydaMetaInfo.fetch_only){const n=ce(this.ydaMetaInfo.adprodset_code);return ae(this.ydaAds,this.ydaMetaInfo),void(null===(e=window.YJ_YADS.adCache)||void 0===e||e.adFetchCompleted(n,(e=>{const n=e.yads_parent_element;void 0!==n&&(this.ydaMetaInfo=de(this.ydaMetaInfo,Object.assign(Object.assign({},e),{yads_parent_element:n})),le(this.ydaMetaInfo)&&t())})))}t()}renderAfterLoaded(e){"82399_269466"===this.ydaMetaInfo.adprodset_code.split("-")[0]&&Re.removeDataYADSJSMinHeightAttribute("ssp_ydn_82399_269466");const t=Re.getFunctionObject(this.ydaMetaInfo.callback);Re.callUITemplate(t,this.ydaAds,this.ydaMetaInfo.positions,this.ydaMetaInfo.output_type,e||this.ydaMetaInfo.targetID,this.ydaMetaInfo.mixed_params),Z((()=>{this.beaconAfterRendered(e)}))}beaconAfterRendered(e){F(this.ydaMetaInfo.adprodset_code),this.insert3rdScripts(e),ee(this.ydaMetaInfo.imps_url),ee(this.ydaMetaInfo.tracking_url),ee(this.ydaMetaInfo.cookiesync_url),te(this.ydaMetaInfo.traffic_verify_tag),this.notifyRendered(e)}insertProvisionalTarget(){var e,t;const n=this.ydaMetaInfo.targetID,i=n&&document.getElementById(n),r=!!(null===(t=null===(e=null===window||void 0===window?void 0:window.YJ_YADS)||void 0===e?void 0:e.asyncFlags)||void 0===t?void 0:t[n]);if(i||r&&!Re.isInnerYadsIframe())return"";const s=Math.floor(999999999*Math.random()),o="yads_dummy_parent_".concat(s);return"js_single"===this.ydaMetaInfo.output_type?(document.write('<div id="'.concat(o,'"></div>')),o):(document.body.insertAdjacentHTML("beforeend",'<div id="'.concat(o,'"></div>')),o)}insert3rdScripts(e){if(e){let t=document.getElementById(e);return"js_frame"===this.ydaMetaInfo.output_type&&(t=(null==t?void 0:t.parentElement)||null),void ie(t,this.ydaMetaInfo.thirdPartyScriptUrlList)}if(1===this.ydaMetaInfo.pos_info.length){ie(this.ydaMetaInfo.pos_info[0].p_elem,this.ydaMetaInfo.pos_info[0].third_party_script_tag_url||[])}}notifyRendered(e){if("js_frame"===this.ydaMetaInfo.output_type){return void new ge({adProdSetCode:this.ydaMetaInfo.adprodset_code,measurableUrl:this.ydaMetaInfo.measurable_url,outputType:this.ydaMetaInfo.output_type,requestId:this.ydaMetaInfo.request_id,sspKPIInfo:this.ydaMetaInfo.sspKPIInfo,viewableInfoList:this.ydaMetaInfo.viewableInfoList,viewableTrackingUrlList:this.ydaMetaInfo.viewableTrackingUrlList,viewableType:"frame",viewableUrl:this.ydaMetaInfo.viewable_url,vimpsMode:this.ydaMetaInfo.measurable,isAudit:this.ydaMetaInfo.is_audit}).notifyRendered()}new ge({adProdSetCode:this.ydaMetaInfo.adprodset_code,measurableUrl:this.ydaMetaInfo.measurable_url,outputType:this.ydaMetaInfo.output_type,parentId:this.ydaMetaInfo.targetID||e,positions:this.ydaMetaInfo.positions,requestId:this.ydaMetaInfo.request_id,sspKPIInfo:this.ydaMetaInfo.sspKPIInfo,viewableInfoList:this.ydaMetaInfo.viewableInfoList,viewableTrackingUrlList:this.ydaMetaInfo.viewableTrackingUrlList,viewableType:"other",viewableUrl:this.ydaMetaInfo.viewable_url,vimpsMode:this.ydaMetaInfo.measurable,isAudit:this.ydaMetaInfo.is_audit}).notifyRendered()}isHandle(){return!0}}class ye{constructor(e,t){this.ydaAds=e,this.ydaMetaInfo=t}render(){Z((()=>{var e,t,n;if(this.ydaMetaInfo.noad_viewable&&(this.ydaMetaInfo.fetch_only?null===(e=window.YJ_YADS.adCache)||void 0===e||e.pushFuncAfterShowReady(ce(this.ydaMetaInfo.adprodset_code),this.notifyNoadViewable):this.notifyNoadViewable()),this.canPassback()){const e=ne(this.ydaMetaInfo.adprodset_code);return void(null===(t=null==e?void 0:e.passback)||void 0===t||t.call(e,{fetchOnly:this.ydaMetaInfo.fetch_only}))}const i=e=>{"string"==typeof e&&Re.executeCallback(e,[{reason:2}])};this.ydaMetaInfo.fetch_only?null===(n=window.YJ_YADS.adCache)||void 0===n||n.adFetchCompleted(ce(this.ydaMetaInfo.adprodset_code),(e=>i(e.yads_noad_callback))):i(this.ydaMetaInfo.noad_callback)}),{execFuncForcibly:!this.ydaMetaInfo.noad_viewable})}notifyNoadViewable(){var e;const t=null===(e=this.ydaMetaInfo.pos_info[0])||void 0===e?void 0:e.p_elem;new ge({adProdSetCode:this.ydaMetaInfo.adprodset_code,measurableUrl:this.ydaMetaInfo.measurable_url,outputType:this.ydaMetaInfo.output_type,parentId:t,requestId:this.ydaMetaInfo.request_id,sspKPIInfo:this.ydaMetaInfo.sspKPIInfo,viewableInfoList:this.ydaMetaInfo.viewableInfoList,viewableTrackingUrlList:this.ydaMetaInfo.viewableTrackingUrlList,viewableType:"noAd",viewableUrl:this.ydaMetaInfo.viewable_url,vimpsMode:this.ydaMetaInfo.measurable,isAudit:this.ydaMetaInfo.is_audit}).notifyRendered()}canPassback(){return"js_frame"===this.ydaMetaInfo.output_type||"js_responsive"===this.ydaMetaInfo.output_type}isHandle(){return this.ydaAds.every((e=>""==e))}}class be{constructor(e,t){this.ydaAds=e,this.ydaMetaInfo=t}render(){var e;const t=()=>{if(!se())throw new Error("RichAdRenderer has been invoked on a iframe");oe(this.ydaMetaInfo.callback,this.ydaMetaInfo.js_file_name,this.ydaMetaInfo.output_type,(()=>this.renderAfterLoaded()))};if(this.ydaMetaInfo.fetch_only){const n=ce(this.ydaMetaInfo.adprodset_code);return ae(this.ydaAds,this.ydaMetaInfo),void(null===(e=window.YJ_YADS.adCache)||void 0===e||e.adFetchCompleted(n,(e=>{const n=e.yads_parent_element;this.ydaMetaInfo=de(this.ydaMetaInfo,Object.assign(Object.assign({},e),{yads_parent_element:n})),le(this.ydaMetaInfo)&&t()})))}t()}renderAfterLoaded(){"82399_269466"===this.ydaMetaInfo.adprodset_code.split("-")[0]&&Re.removeDataYADSJSMinHeightAttribute("ssp_ydn_82399_269466");const e=Re.getFunctionObject(this.ydaMetaInfo.callback);Re.callUITemplate(e,this.ydaAds,this.ydaMetaInfo.positions,this.ydaMetaInfo.output_type,this.ydaMetaInfo.targetID,this.ydaMetaInfo.mixed_params),Z((()=>{this.beaconAfterRendered()}))}beaconAfterRendered(){F(this.ydaMetaInfo.adprodset_code),this.insert3rdScripts(this.ydaMetaInfo.targetID,this.ydaMetaInfo.thirdPartyScriptUrlList),ee(this.ydaMetaInfo.imps_url),ee(this.ydaMetaInfo.tracking_url),ee(this.ydaMetaInfo.cookiesync_url),te(this.ydaMetaInfo.traffic_verify_tag),this.notifyRenderedForRichAd(this.ydaMetaInfo.adprodset_code,this.ydaMetaInfo.measurable_url,this.ydaMetaInfo.output_type,this.ydaMetaInfo.targetID,this.ydaMetaInfo.request_id,this.ydaMetaInfo.sspKPIInfo,this.ydaMetaInfo.viewableInfoList,this.ydaMetaInfo.viewableTrackingUrlList,this.ydaMetaInfo.viewable_url,this.ydaMetaInfo.measurable,this.ydaMetaInfo.is_audit)}insert3rdScripts(e,t){let n=0;const i=()=>{var r,s;const o=(null===(r=document.getElementById("rma-pdv"))||void 0===r?void 0:r.querySelector("*[data-rma-imps]"))||(null===(s=document.getElementById(e))||void 0===s?void 0:s.querySelector("*[data-rma-imps]"));if(o||n>=5e3){ie((null==o?void 0:o.parentElement)||e,t)}else n+=100,setTimeout(i,100)};i()}notifyRenderedForRichAd(e,t,n,i,r,s,o,a,d,l,c){new ge({adProdSetCode:e,measurableUrl:t,outputType:n,parentId:i,requestId:r,sspKPIInfo:s,viewableInfoList:o,viewableTrackingUrlList:a,viewableType:"richAd",viewableUrl:d,vimpsMode:l,isAudit:c}).notifyRendered()}isHandle(){const e="string"==typeof this.ydaMetaInfo.js_file_name&&/^richad\//.test(this.ydaMetaInfo.js_file_name);return!this.ydaMetaInfo.s2s&&(this.ydaMetaInfo.richad||e)||this.ydaMetaInfo.s2s&&se()}}class _e{constructor(e,t){this.ydaAds=e,this.ydaMetaInfo=t}render(){var e;if(this.ydaMetaInfo.fetch_only)return void(null===(e=window.YJ_YADS.adCache)||void 0===e||e.destroy(ce(this.ydaMetaInfo.adprodset_code)));Re.getFunctionObject(this.ydaMetaInfo.callback)(this.ydaAds,this.ydaMetaInfo.positions,this.ydaMetaInfo.output_type,this.ydaMetaInfo.targetID,this.ydaMetaInfo.request_id,this.ydaMetaInfo.thirdPartyScriptUrlList,this.ydaMetaInfo.adprodset_code,this.ydaMetaInfo.mixed_params),Z((()=>{this.beaconAfterRendered()}))}beaconAfterRendered(){ee(this.ydaMetaInfo.imps_url),ee(this.ydaMetaInfo.tracking_url),ee(this.ydaMetaInfo.cookiesync_url),te(this.ydaMetaInfo.traffic_verify_tag),this.notifyRenderedForStream(this.ydaMetaInfo.adprodset_code,this.ydaMetaInfo.measurable_url,this.ydaMetaInfo.output_type,this.ydaMetaInfo.request_id,this.ydaMetaInfo.sspKPIInfo,this.ydaMetaInfo.viewableInfoList,this.ydaMetaInfo.viewableTrackingUrlList,this.ydaMetaInfo.viewable_url,this.ydaMetaInfo.measurable,this.ydaMetaInfo.is_audit)}notifyRenderedForStream(e,t,n,i,r,s,o,a,d,l){new ge({adProdSetCode:e,measurableUrl:t,outputType:n,requestId:i,sspKPIInfo:r,viewableInfoList:s,viewableTrackingUrlList:o,viewableType:"stream",viewableUrl:a,vimpsMode:d,isAudit:l}).notifyRendered()}isHandle(){return"YAHOO.JP.anemos.yads.stream.poolAds"===this.ydaMetaInfo.callback}}class Ie{constructor(e,t){this.ydaAds=e,this.ydaMetaInfo=t}render(){var e;if(this.ydaMetaInfo.fetch_only)return void(null===(e=window.YJ_YADS.adCache)||void 0===e||e.destroy(ce(this.ydaMetaInfo.adprodset_code)));Re.getFunctionObject(this.ydaMetaInfo.callback)(this.ydaAds,this.ydaMetaInfo.positions,this.ydaMetaInfo.output_type,this.ydaMetaInfo.targetID,this.ydaMetaInfo.request_id,this.ydaMetaInfo.thirdPartyScriptUrlList,this.ydaMetaInfo.adprodset_code),Z((()=>{this.beaconAfterRendered()}))}beaconAfterRendered(){ee(this.ydaMetaInfo.imps_url),ee(this.ydaMetaInfo.tracking_url),ee(this.ydaMetaInfo.cookiesync_url),te(this.ydaMetaInfo.traffic_verify_tag),this.notifyRenderedForTimeline(this.ydaAds.length,this.ydaMetaInfo.adprodset_code,this.ydaMetaInfo.measurable_url,this.ydaMetaInfo.output_type,this.ydaMetaInfo.targetID,this.ydaMetaInfo.request_id,this.ydaMetaInfo.sspKPIInfo,this.ydaMetaInfo.viewableInfoList,this.ydaMetaInfo.viewableTrackingUrlList,this.ydaMetaInfo.viewable_url,this.ydaMetaInfo.measurable,this.ydaMetaInfo.is_audit)}notifyRenderedForTimeline(e,t,n,i,r,s,o,a,d,l,c,u){new ge({adNum:e,adProdSetCode:t,measurableUrl:n,outputType:i,parentId:r,requestId:s,sspKPIInfo:o,viewableInfoList:a,viewableTrackingUrlList:d,viewableType:"timeline",viewableUrl:l,vimpsMode:c,isAudit:u}).notifyRendered()}isHandle(){return"yadsTimelinePoolAds"===this.ydaMetaInfo.callback||"window.YJ_YADS.yadsTimelineMulti.poolAds"===this.ydaMetaInfo.callback}}class Ae{constructor(e,t){if(!Array.isArray(e)||!t)return;const n=this.initYDAMetaInfo(t);this.callHooks(n.targetID);const i=new ye(e,n);if(i.isHandle())return void(this.renderer=i);if(!n.fetch_only&&!le(n))return;if(!n.callback||"string"!=typeof n.callback)return;const r=[Ie,_e,be,ue];for(const t of r){const i=new t(e,n);if(i.isHandle())return void(this.renderer=i)}const s=new we(e,n);this.renderer=s}initYDAMetaInfo(e){var t,n,i,r;"js_pframe"===e.output_type&&(e.output_type="js_frame"),e.imps_url||(e.imps_url=[]),e.cookiesync_url||(e.cookiesync_url=[]),e.viewable_url||(e.viewable_url=""),e.measurable_url||(e.measurable_url=""),e.noad_viewable=!0===e.noad_viewable,e.traffic_verify_tag||(e.traffic_verify_tag=""),e.mixed_params||(e.mixed_params=null),e.is_audit="1"===e.is_audit?"1":"0",e.thirdPartyScriptUrlList=(null===(n=null===(t=e.pos_info)||void 0===t?void 0:t[0])||void 0===n?void 0:n.third_party_script_tag_url)||[],e.positions=[],e.viewableInfoList=[],e.viewableTrackingUrlList=[],Array.isArray(e.pos_info)&&1==e.pos_info.length&&(e.positions.push(e.pos_info[0].p_elem),e.pos_info[0].viewable_info&&(e.viewableInfoList.push(e.pos_info[0].viewable_info),e.viewableTrackingUrlList.push(e.pos_info[0].viewable_tracking_url),e.pos_info[0].ssp_kpi_info&&(e.sspKPIInfo=e.pos_info[0].ssp_kpi_info))),e.positions[0]&&""!=e.positions[0]?e.targetID=e.positions[0]:e.positions=null;const s=e.adprodset_code.split("-")[0];if(null===(r=null===(i=window.YJ_YADS)||void 0===i?void 0:i.timelineChecker)||void 0===r?void 0:r.has(s)){const t=["60766_543045","60766_543046","60766_543052","60766_543053"];["60766_11161","84112_185264","98330_185265","84112_235161","98330_235274","84112_235275","84112_291992","84112_291994","84112_291995","98330_258749","104421_270659","86057_271834","67042_276973","67042_284833","67042_284835","67042_284836","67042_284837","67042_284838","67042_284839","67042_284840","67042_284841","67042_284842","67042_284843","67042_284844","67042_284845","67042_284846","67042_284847","67042_284848","67042_284849","67042_284850","67042_284851","22033_314472","67042_557911","67042_557925","67042_557926","67042_585165","67042_677063","67042_677065","84112_235273","98330_235285","84112_235283","84112_291996","84112_291997","84112_291998","98330_258750","38353_270660","16429_271842","67043_276976","67042_284853","67042_284855","67042_284857","67042_284858","67042_284859","67042_284861","67042_284863","67042_284864","67042_284865","67042_284866","67042_284867","67042_284868","67042_284869","67042_284870","67042_284872","67042_284873","67042_284875","67042_284876","22033_314480","67042_557912","67042_557928","67042_557930","67042_585167","67042_677064","67042_677066"].includes(s)&&(e.callback="yadsTimelinePoolAds",e.js_file_name=""),t.includes(s)&&(e.callback="window.YJ_YADS.yadsTimelineMulti.poolAds",e.js_file_name="")}return e}render(){var e;null===(e=this.renderer)||void 0===e||e.render()}callHooks(e){if(!e)return;const t=document.getElementById(e);if(!t)return;const n=t;if(n.renderAdHooks)for(;n.renderAdHooks.length>0;){const e=n.renderAdHooks.shift();try{e()}catch(e){}}}}class Se{constructor(){this.managers={},this.poolAds=this.poolAds.bind(this)}dispatch(e,t){var n,i;this.setManager(e);const r=e.getManagerId();null===(n=this.managers[r])||void 0===n||n.registerInsertId(t),null===(i=this.managers[r])||void 0===i||i.insert()}setManager(e){const t=e.getManagerId();this.managers[t]||(this.managers[t]=e)}fetchManager(e){for(const t in this.managers)if(t.includes(e))return this.managers[t]}adprodsetCodeToDsName(e){if(!e)return"";const t=e.split("-");return 3===t.length?t[0]:""}poolAds(e,t,n,i,r,s,o){const a=this.adprodsetCodeToDsName(o),d=this.fetchManager(a);null==d||d.poolAds(e,s,r)}}class Oe{static stringifyMessage(e){return"resizeFrame"===e.cmd?e.cmd+","+e.width+","+e.height:""}static passback(){var e;if(!Re.isInnerYadsIframe())return;const t=new _(window.YJ_YADS,"deliverProduct").fetchOnIframe();null===(e=null==t?void 0:t.passback)||void 0===e||e.call(t)}static adDone(){r.adDone()}}const Ee={NO_DISPLAYABLE_AD:1,ERROR_ON_DISPLAY:2};class Me{bind(){var t;!function(){void 0===window.YJ_YADS&&(window.YJ_YADS={});window.YAHOO=window.YAHOO||{},window.YAHOO.JP=window.YAHOO.JP||{},window.YAHOO.JP.anemos=window.YAHOO.JP.anemos||{},window.YAHOO.JP.anemos.yads=window.YAHOO.JP.anemos.yads||{},window.YJ_YADS.XUSE=window.YJ_YADS.XUSE||{},window.YAHOO.JP.anemos.yads.ydn=window.YAHOO.JP.anemos.yads.ydn||{},window.YAHOO.JP.anemos.yads.ydn.position=window.YAHOO.JP.anemos.yads.ydn.position||{},window.YAHOO.JP.anemos.yads.ydn.position.SQB=window.YAHOO.JP.anemos.yads.ydn.position.SQB||{}}(),this.deliverProductRepository=new _(window.YJ_YADS,"deliverProduct"),this.runOnlyOneTimeOnSameContext(),window.gAdController=Oe,window.yadsDispatchDeliverProduct=this.yadsDispatchDeliverProduct(),window.yadsRenderAd_v2=this.renderYDAHelper,window.YJ_YADS.XUSE&&(window.YJ_YADS.XUSE.passback=this.passbackFromXUSE),window.YJ_YADS.passback=Oe.passback,window.YJ_YADS.adDone=Oe.adDone,window.YJ_YADS.addDocumentViewInListener=z,window.YJ_YADS.addDocumentViewOutListener=K,X(),window.YJ_YADS.visibilitychangeListenFlag||(document.addEventListener(q,G,!1),window.YJ_YADS.visibilitychangeListenFlag=!0),window.YJ_YADS.innerFuncs=Re,window.yadsInnerFuncs=Re,window.YJ_YADS.pvTs=window.YJ_YADS.pvTs||Date.now(),window.YJ_YADS.observeFrame||(window.YJ_YADS.observeFrame=e,null===(t=window.YJ_YADS.observeFrame)||void 0===t||t.listen()),window.YJ_YADS.setViewableOffset=this.setViewableOffset,A(),window.YJ_YADS.tasks=window.YJ_YADS.tasks||[],window.YJ_YADS.yadsTimelineMulti=window.YJ_YADS.yadsTimelineMulti||new Se,window.YAHOO.JP.anemos.yads.ydn.position.SQB.renderAd||(window.YAHOO.JP.anemos.yads.ydn.position.SQB.renderAd=I.y),window.YJ_YADS.NO_AD_EVENT_CODES=Ee}yadsDispatchDeliverProduct(){return e=>{const t=new E;try{const t=new b(e);this.deliverProductRepository.store(e.dsCode,t),t.dispatch({startProductIndex:window.YJ_YADS.start_prod_num})}catch(e){t.error(new f(e))}}}renderYDAHelper(e,t){const n=new E;try{new Ae(e,t).render(),Re.isInnerYadsIframe()?window.parent.postMessage({cmd:"logReferrer",requestID:t.request_id},"*"):U.logReferrer({cmd:"logReferrer",requestID:t.request_id})}catch(e){n.error(new f(e))}}runOnlyOneTimeOnSameContext(){window.YJ_YADS.onetime||(window.YJ_YADS.onetime=!0,(new U).listen())}passbackFromXUSE(e){var t;const n=new _(window.YJ_YADS,"deliverProduct").fetch(e);null===(t=null==n?void 0:n.passback)||void 0===t||t.call(n)}setViewableOffset(e){var t;if("object"==typeof e&&null!==e&&(null===(t=window.YJ_UADF)||void 0===t?void 0:t.YADSViewable)){const t=(new Date).getTime();window.YJ_UADF.YADSViewable.notifyViewableOffsetEvent(e,t)}}}const ke=function(e){const t=document.createElement(e.nodeName);for(let n=0;n<e.attributes.length;n++){const i=e.attributes.item(n);i&&t.setAttribute(i.name,i.value)}return t};var Te;!function(e){e.getBoundingClientRect="getBoundingClientRect",e.IntersectionObserver="IntersectionObserver",e.NOTAVAILABLE="NOTAVAILABLE"}(Te||(Te={}));const Re={ViewableMethod:Te,getFunctionObject(e){if(!e)return null;const t=e.split("."),n=t.length;let i=window;for(let e=0;e<n;e++)if(!(i=i[t[e]]))return null;return"function"==typeof i?i:null},executeCallback(e,t){const n=this.getFunctionObject(e);n&&n.apply(this,t)},loadScript(e,t,n){function i(e){t&&(e.onload=function(){t()})}if(n){const t=document.createElement("SCRIPT");t.src=e,t.type="text/javascript",i(t);const n=document.getElementsByTagName("head");if(n.length>0)n[0].appendChild(t);else{const e=document.getElementsByTagName("script")[0];if(!e||!e.parentNode)return;e.parentNode.appendChild(t)}}else{const t="yads_preloaded_js_".concat(Math.floor(999999999*Math.random()));document.write('<script id="'.concat(t,'" type="text/javascript" src="').concat(e,'"><\/script>'));i(document.getElementById(t))}},insertTag(e,t){const n=t&&document.getElementById(t);n?n.insertAdjacentHTML("beforeend",e):document.write(e)},insertScriptTag(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!e)return;const n=t&&document.getElementById(t);if(n){const t=document.createElement("script");t.type="text/javascript",t.src=e,n.appendChild(t)}else document.write('<script type="text/javascript" src="'.concat(e,"\"></scr' + 'ipt>"))},findViewableTargetElements(e){let t=function(e){const t="data-ydntxt-item";let n=[];if(e.querySelectorAll){const i=e.querySelectorAll("["+t+"]");n=Array.from(i)}else{const i=e.getElementsByTagName("*");for(const e of i)e.hasAttribute(t)&&n.push(e)}let i=[];if(n.length>0){for(const e of n){const n=e.getAttribute(t)||"",r=parseInt(n,10);!isNaN(r)&&r>0&&(i[r-1]=e)}i.length!==n.length&&(i=n)}return i}(e);return t.length>0?t:(t=function(e){function t(e){return/^https?:\/\/im\.c\.yimg\.jp/.test(e)}const n=[],i=e.getElementsByTagName("a");for(const e of i){if(r=e.href,!/^https?:\/\/rd\.ane\.yahoo\.co\.jp\/rd\?/.test(r))continue;const i=e.getElementsByTagName("img")[0];if(i&&t(i.src)){const t=function(e){const t=e.getBoundingClientRect();return(t.right-t.left)*(t.bottom-t.top)};t(e)>t(i)?n.push(e):n.push(i)}else n.push(e)}var r;return n}(e),t.length>0?t:function(e){const t=e.getElementsByTagName("iframe");return Array.from(t).filter((e=>{return t=e.src,/^https?:\/\/(yads\.yahoo\.co\.jp|yads\.c\.yimg\.jp)\//.test(t);var t}))}(e))},isInnerYadsIframe(){const e=document.createElement("a");return e.href=window.location.href,window.parent!=window&&("s.yimg.jp"===e.hostname||"i.yimg.jp"===e.hostname)&&/yads-iframe\.html$/.test(e.pathname)},isSameOrigin(){let e=window;for(;window.top!==e;){e=e.parent;try{e.document.URL}catch(e){return!1}}return!0},parseQuery(e){const t={},n=e.split("?");if(2!=n.length)return t;const i=n[1].split("&");for(const e of i){const n=e.split("=");1==n.length?t[n[0]]="":t[n[0]]=window.decodeURIComponent(n[1])}return t},appendHtml:function e(t,n){if(!t)return;const i="<html><head></head><body>".concat(n,"</body></html>");let r=null;try{r=(new DOMParser).parseFromString(i,"text/html")}catch(e){return}!function t(n,i,r){if(!i||i.length<=r||!n)return;const s=i.item(r).cloneNode(!0);if("script"===s.nodeName.toLowerCase()){const e=ke(s);if(s.src&&!s.onload)return e.onload=function(){t(n,i,r+1)},void n.appendChild(e);e.text=s.text,n.appendChild(e)}else if("noscript"==s.nodeName.toLowerCase());else if(1==s.nodeType){const t=ke(s);n.appendChild(t),e(t,s.innerHTML)}else n.appendChild(s);t(n,i,r+1)}(t,r.body.childNodes,0)},removeAllChildNodes(e){const t=document.getElementById(e);if(t)for(;t.firstChild;)t.removeChild(t.firstChild)},removePCBPElement(){var e,t,n,i,r,s,o,a;const d=document.querySelectorAll('[data-rma-tbp="1"]');for(const e of d)e.remove();(null===(i=null===(n=null===(t=null===(e=window.YAHOO)||void 0===e?void 0:e.JP)||void 0===t?void 0:t.rma)||void 0===n?void 0:n.smartplayer)||void 0===i?void 0:i.render)&&delete window.YAHOO.JP.rma.smartplayer.render,(null===(a=null===(o=null===(s=null===(r=window.YAHOO)||void 0===r?void 0:r.JP)||void 0===s?void 0:s.rma)||void 0===o?void 0:o.bannerad)||void 0===a?void 0:a.render)&&delete window.YAHOO.JP.rma.bannerad.render,this.removeAllChildNodes("ssp_ydn_82399_269466")},addPCBPMinHeight(){const e=document.getElementById("ssp_ydn_82399_269466");e&&(e.style.minHeight="240px",e.setAttribute("data-yadsjs-min-height","1"))},removeDataYADSJSMinHeightAttribute(e){const t=document.getElementById(e);(null==t?void 0:t.getAttribute("data-yadsjs-min-height"))&&(t.style.minHeight="",t.removeAttribute("data-yadsjs-min-height"))},callUITemplate(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;if(!e.callbackVersion)return void(null===s?e(t,n,i,r):e(t,n,i,r,s));((t,n)=>{var i;if(!n)return;const r=document.getElementById(n);if(!r)return;this.removeAllChildNodes(n);const s=e(t,n);r.insertAdjacentHTML("beforeend",s.html),null===(i=s.callbacks)||void 0===i||i.forEach((e=>e(t,n)))})(t,r)},sendNoAdEvent(e){let{domId:t,code:n,message:i}=e;const r=document.getElementById(t);null!==r&&r.dispatchEvent(new CustomEvent("noAd",{detail:{code:Ee[n],message:i}}))}};function Ce(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-6;1<t||t<=Math.random()||function(e){if(!window.URL||!window.URLSearchParams)return;const t=new URL("https://yads.yjtag.yahoo.co.jp/b"),n=new URLSearchParams({autodark:e?"1":"0"});t.search=n.toString(),document.createElement("img").src=t.toString()}(function(e){var t;const n="".concat(e,"-auto-dark"),i='<div id="'.concat(n,'" style="display: none; background-color: canvas; color-scheme: light"></div>');null===(t=document.querySelector("#".concat(e)))||void 0===t||t.insertAdjacentHTML("beforeend",i);const r=document.querySelector("#".concat(n));if(r)return"rgb(255, 255, 255)"!==window.getComputedStyle(r).backgroundColor;return!1}(e))}function Pe(){const e=function(){var e,t;const n=null===(e=null===window||void 0===window?void 0:window.screen)||void 0===e?void 0:e.height,i=null===(t=null===window||void 0===window?void 0:window.screen)||void 0===t?void 0:t.width,r=null===window||void 0===window?void 0:window.devicePixelRatio;if(n&&i&&r)return{h:n,w:i,r}}();var t;e&&(t=e,new S({project:"ms_sp_client",dataset:"yads_info",samplingRate:1e-5}).send(t))}const De={yads_ad_ds:"string",yads_parent_element:"string"};class xe{constructor(){this.adCacheMap={}}isReady(e){var t;return!0===(null===(t=this.adCacheMap[e])||void 0===t?void 0:t.ready)}create(e){return!this.exists(e)&&(this.adCacheMap[e]={ready:!1,isDeleted:!1,funcsAfterShowReady:[],suspendShowTask:{exists:!1}},!0)}isAvailable(e){return"js_responsive"===e}exists(e){return!!this.adCacheMap[e]&&!1===this.adCacheMap[e].isDeleted}pushFuncAfterShowReady(e,t){var n;try{return void 0!==this.adCacheMap[e]&&!(null===(n=this.adCacheMap[e])||void 0===n?void 0:n.isDeleted)&&(this.adCacheMap[e].funcsAfterShowReady.push(t),!0)}catch(e){return(new E).error(e),!1}}runFuncsAfterReady(e){var t,n,i;try{if(null===(t=this.adCacheMap[e])||void 0===t?void 0:t.suspendShowTask.exists)for(const t of null!==(i=null===(n=this.adCacheMap[e])||void 0===n?void 0:n.funcsAfterShowReady)&&void 0!==i?i:[])t(this.adCacheMap[e].suspendShowTask.yadsAsyncParameter);return!0}catch(e){return(new E).error(e),!1}}adFetchCompleted(e,t){try{return!(!this.exists(e)||!this.adCacheMap[e]||this.isReady(e))&&(this.adCacheMap[e].funcsAfterShowReady.push(t),this.adCacheMap[e].suspendShowTask.exists?(this.runFuncsAfterReady(e),this.adCacheMap[e].isDeleted=!0,!0):(this.adCacheMap[e].ready=!0,!0))}catch(e){return(new E).error(e),!1}}show(e,t,n){try{return this.exists(e)&&this.adCacheMap[e]?(this.adCacheMap[e].suspendShowTask={exists:!0,yadsAsyncParameter:t,destroyCallback:n},this.isReady(e)&&(this.runFuncsAfterReady(e),this.adCacheMap[e].isDeleted=!0),!0):(n(),!1)}catch(e){return(new E).error(e),!1}}destroy(e){try{return!!this.adCacheMap[e]&&(this.adCacheMap[e].ready=!1,this.adCacheMap[e].isDeleted=!0,this.adCacheMap[e].suspendShowTask.exists&&this.adCacheMap[e].suspendShowTask.destroyCallback(),!0)}catch(e){return(new E).error(e),!1}}}const Ye=e=>{const t=t=>{e.cookie=(e=>e.domain?`${e.key}=${e.value}; path=${e.path}; expires=${e.expires.toUTCString()}; domain=${e.domain}`:`${e.key}=${e.value}; path=${e.path}; expires=${e.expires.toUTCString()};`)(t)},n=t=>{const n=e.cookie.split(/;\s*/).find((e=>{const[n,i]=e.split("=");return n===t}));if(!n)return"";const[,i]=n.split("=");return decodeURIComponent(i)};return{set:t,getValue:n,setEtLDPlusOne:i=>{const r=e.location.hostname;if(!Fe(r))return{type:"invalid-hostname"};const s=Le(r).some((r=>{const s=e.cookie,o=((e,t)=>({key:e.key,value:e.value,path:e.path,expires:e.expires,domain:t}))(i,r);t(o);return s!==e.cookie||o.value===n(o.key)}));return s?{type:"success"}:{type:"fail"}}}},Le=e=>{const t=e.split(".");if(4===t.length&&t[3].match(/^[0-9]*$/))return[];const n=[];for(let e=t.length-2;e>=0;e--)n.push(t.slice(e).join("."));return n},Fe=e=>{const t=e.split(".");return 4!==t.length||!t[3].match(/^[0-9]*$/)},Ve="_yjsu_yjad",je=e=>{return`${t=e.timestamp,Math.floor(t.getTime()/1e3)}.${e.uuid}`;var t},Ue=e=>{const[t,n]=e.split(".");return{key:Ve,timestamp:new Date(1e3*parseInt(t)),uuid:n}},Ne=()=>{const e=new Uint8Array(16);window.crypto.getRandomValues(e),e[6]=15&e[6]|64,e[8]=63&e[8]|128;const t=[...e].map((e=>`0${e.toString(16)}`.slice(-2))).join("");return[t.slice(0,8),t.slice(8,12),t.slice(12,16),t.slice(16,20),t.slice(20,32)].join("-")},He=()=>({key:Ve,timestamp:new Date,uuid:Ne()}),Be=(e,t)=>({key:Ve,path:"/",domain:t,expires:(e=>{const t=new Date(e.getTime());return t.setFullYear(t.getFullYear()+1),t})(e.timestamp),value:je(e)}),qe=e=>({key:Ve,value:je(e)}),Je=({cookieSuid:e,localStorageSuid:t})=>{if(We(e))return{type:"valid",siteUserId:Ue(e)};if(We(t)){const e=Ue(t);return ze(e.timestamp)?{type:"invalid"}:{type:"valid",siteUserId:e}}return{type:"invalid"}},We=e=>(e=>{if(!e)return!1;const t=e.split(".");if(2!==t.length)return!1;return/^\d{10,}$/.test(t[0])&&(n=t[1],/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(n));var n})(e),ze=e=>{const t=Date.now(),n=new Date(e.getTime());return n.setDate(n.getDate()+90),n.getTime()<=t};function Ke(){const e=function(){var e,t;const n=Ye(document).getValue(Ve);let i;try{i=null!==(t=null===(e=null===localStorage||void 0===localStorage?void 0:localStorage.getItem)||void 0===e?void 0:e.call(localStorage,Ve))&&void 0!==t?t:""}catch(e){i=""}const r=Je({cookieSuid:n,localStorageSuid:i});return"valid"===r.type?r.siteUserId.uuid:null}();return e||function(){var e;const t=He(),n=Be(t);Ye(document).setEtLDPlusOne(n);const i=qe(t);try{null===(e=null===localStorage||void 0===localStorage?void 0:localStorage.setItem)||void 0===e||e.call(localStorage,i.key,i.value)}catch(e){}return t.uuid}()}class $e{constructor(){var e;this.userInput={},this.PARAMETER_LIST=[{name:"s",tagName:"yads_ad_ds",init:""},{name:"fr_id",init:this.getFrId()},{name:"p_elem",tagName:"yads_parent_element",init:""},{name:"noad_cb",tagName:"yads_noad_callback",init:""},{name:"bucket_id",tagName:"yads_bucket_id",init:""},{name:"type",tagName:"yads_type_tag",init:"",max:256},{name:"u",init:this.getLocation()},{name:"debug",tagName:"yads_ad_debug",init:""},{name:"autoplay_set",tagName:"yads_video_autoplay_set",init:""},{name:"pv_ts",init:null!==(e=window.YJ_YADS.pvTs)&&void 0!==e?e:""},{name:"pcat_id",tagName:"yads_placement_category_id",init:""},{name:"shannon_id",tagName:"yads_shannon_id",init:""},{name:"search_keyword",init:"",tagName:"yads_search_word_kw"},{name:"seq",tagName:"yads_request_seq",init:""},{name:"cu",init:this.getCanonicalURL()},{name:"suid",tagName:"yads_is_issue_suid",init:""},{name:"fetch_only",tagName:"fetch_only",init:""},{name:"async",tagName:"async",init:""}],this.initialized=!1,this.PARAMETER_NUM=this.PARAMETER_LIST.length,this.params=[],this.initialized=!1,this.userInput={}}getVal(e,t){const n=e.init;if(void 0===e.tagName)return n;const i=t[e.tagName];if(null==i)return n;if("string"==typeof i){const t=void 0!==e.max?e.max:i.length;return i.substring(0,t)}return i}init(e){if(this.initialized)return;if(void 0===e)return;let t=e;try{["art17ct","art17t1","art17t2"].some((t=>{var n;return null===(n=null==e?void 0:e.yads_type_tag)||void 0===n?void 0:n.includes(t)}))&&["30357_208277","48264_274217","48264_274127","86813_284715","86813_284714","99604_135693","26744_15363","20806_10381","54879_45284","71913_258678","91302_196830","57876_31261","92617_605855"].some((t=>(null==e?void 0:e.yads_ad_ds)===t))&&(t=Object.assign({},e),t.yads_type_tag=t.yads_type_tag?function(e){var t,n;try{const i=document.referrer,r=new URL(i),s=null===(n=null===(t=null===performance||void 0===performance?void 0:performance.getEntriesByType)||void 0===t?void 0:t.call(performance,"navigation"))||void 0===n?void 0:n[0];if("news.yahoo.co.jp"===r.hostname&&r.pathname.includes("pickup")&&"navigate"===(null==s?void 0:s.type))return e+"_newspickupnavigate"}catch(t){return(new E).error(new f(t)),e}return e}(t.yads_type_tag):t.yads_type_tag,t.yads_type_tag=t.yads_type_tag?function(e){var t,n;try{if(V(document))return e+"_prerendering";if(j(null===(n=null===(t=null===performance||void 0===performance?void 0:performance.getEntriesByType)||void 0===t?void 0:t.call(performance,"navigation"))||void 0===n?void 0:n[0]))return e+"_semi_prerendering"}catch(t){return(new E).error(new f(t)),e}return e}(t.yads_type_tag):t.yads_type_tag)}catch(e){(new E).error(new f(e))}this.userInput=t;for(let e=0;e<this.PARAMETER_NUM;e++){const n=this.PARAMETER_LIST[e],i=this.getVal(n,t);this.params.push({name:n.name,val:i})}this.initialized=!0,this.setParam("suid",!1===t.yads_is_issue_suid?"":Ke())}setParam(e,t){if(this.initialized)for(let n=0;n<this.PARAMETER_NUM;n++)this.params[n].name===e&&(this.params[n].val=t)}getParamByName(e){if(!this.initialized)return null;for(let t=0;t<this.PARAMETER_NUM;t++)if(this.params[t].name===e)return this.params[t];return null}getAllParams(){return this.initialized?this.params:null}getQueryString(){if(!this.initialized)return"";const e=[];for(let t=0;t<this.PARAMETER_NUM;t++){const n=this.params[t];""!==n.val&&e.push(n.name+"="+window.encodeURIComponent(n.val))}return e.join("&")}clearUserInput(){if(void 0!==this.userInput)for(let e=0;e<this.PARAMETER_NUM;e++){const t=this.PARAMETER_LIST[e];void 0!==t.tagName&&(this.userInput[t.tagName]=void 0)}}encodeURL(e){return new URL(e).href}getLocation(){let e=window.location.href;if(window.parent!=window){const t=document.referrer;""!==t&&"about:"!==t&&"about:blank"!==t&&(e=t)}return this.encodeURL(e)}getCanonicalURL(){const e=function(){const e=document.getElementsByTagName("link");for(const t of e)if("string"==typeof t.rel&&"canonical"===t.rel.toLowerCase()&&t.href)return t.href;return""}();return e?this.encodeURL(e):""}getFrId(){const e=Math.floor(1e7*Math.random());return void 0!==window.YJ_YADS.yads_sequence_num?"yads_".concat(e,"-").concat(window.YJ_YADS.yads_sequence_num):"yads_".concat(e,"-0")}}const Ge=async function(e){let{yadsAsyncParameter:t,fetchOnly:n}=e;var i;const r=new E,s=new $e,o=t;n&&(o.fetch_only="1",o.yads_parent_element="prefetch_yads_parent_element"),s.init(o);const a="https://yads.yjtag.yahoo.co.jp/v2/tag?".concat(s.getQueryString());let d;try{const e={method:"GET",credentials:"include",mode:"cors",referrerPolicy:"origin"};window.isSecureContext&&(e.browsingTopics=!0);const t=await fetch(a,e),n=await t.json();d=n}catch(e){d={responseType:"noad",data:{noAdCallback:t.yads_noad_callback,reason:2}}}try{!function(e){if(!(null==e?void 0:e.data)||!["dispatch","error","noad"].includes(null==e?void 0:e.responseType))throw Error("type of value isn't JsonTagResponseType ")}(d)}catch(e){r.error(e)}"error"!==d.responseType&&void 0===d.data.noAdCallback&&(d.data.noAdCallback=t.yads_noad_callback),!n||"error"!==d.responseType&&"noad"!==d.responseType?Z((()=>{var e,i;switch("dispatch"!==d.responseType&&Re.sendNoAdEvent({domId:null!==(e=t.yads_parent_element)&&void 0!==e?e:"",code:"NO_DISPLAYABLE_AD",message:"No displayable Ad"}),d.responseType){case"noad":Re.executeCallback(null!==(i=d.data.noAdCallback)&&void 0!==i?i:"",[{reason:d.data.reason}]);break;case"dispatch":window.yadsDispatchDeliverProduct(Object.assign(Object.assign({},d.data),{fetchOnly:n}))}}),{execFuncForcibly:"30357_208277"===t.yads_ad_ds}):t.yads_ad_ds&&(null===(i=window.YJ_YADS.adCache)||void 0===i||i.destroy(t.yads_ad_ds))};function Qe(e){const t=new E;e.async=1,Z((()=>{var n,i,r,s,o;try{if("number"!=typeof window.YJ_YADS.yads_sequence_num?window.YJ_YADS.yads_sequence_num=0:window.YJ_YADS.yads_sequence_num++,o=e,!Object.keys(De).every((e=>o[e])))return;!function(e){var t;window.YJ_YADS||(window.YJ_YADS={}),(null===(t=window.YJ_YADS)||void 0===t?void 0:t.asyncFlags)||(window.YJ_YADS.asyncFlags={}),window.YJ_YADS.asyncFlags[e]=!0}(e.yads_parent_element),Re.removeAllChildNodes(e.yads_parent_element),"82399_269466"===e.yads_ad_ds&&(Re.addPCBPMinHeight(),Re.removePCBPElement()),Ce(e.yads_parent_element),Pe(),function(e){var t,n,i,r,s;try{if(void 0===window.YJ_YADS.yadsFirstPerformanceInfo){const o=null===(n=null===(t=null===performance||void 0===performance?void 0:performance.getEntriesByType)||void 0===t?void 0:t.call(performance,"navigation"))||void 0===n?void 0:n[0];let a=null!==(i=null==o?void 0:o.type)&&void 0!==i?i:"null",d=null!==(r=null===performance||void 0===performance?void 0:performance.timeOrigin)&&void 0!==r?r:0;V(document)?document.addEventListener("prerenderingchange",(()=>{window.YJ_YADS&&(window.YJ_YADS.yadsFirstPerformanceInfo={firstNavigationType:"prerender",firstpageViewTiming:(new Date).getTime(),typeTag:e})}),{once:!0}):void 0!==o&&j(o)&&(a="semi-prerender",d+=null!==(s=null==o?void 0:o.activationStart)&&void 0!==s?s:0),window.YJ_YADS.yadsFirstPerformanceInfo={firstNavigationType:a,firstpageViewTiming:d,typeTag:e}}}catch(e){(new E).error(new f(e))}}(e.yads_type_tag);const t=()=>{if(void 0!==e.yads_parent_element){document.getElementById(e.yads_parent_element)&&Ge({yadsAsyncParameter:e})}};if(null!==(n=(s=window.YJ_YADS).adCache)&&void 0!==n||(s.adCache=new xe),window.YJ_YADS.adCache.exists(e.yads_ad_ds))return void(null===(i=window.YJ_YADS.adCache)||void 0===i||i.show(e.yads_ad_ds,e,t));t()}catch(n){Re.sendNoAdEvent({domId:null!==(r=e.yads_parent_element)&&void 0!==r?r:"",code:"NO_DISPLAYABLE_AD",message:"No displayable Ad"}),t.error(new f(n))}}),{execFuncForcibly:"30357_208277"===e.yads_ad_ds||"48264_274217"===e.yads_ad_ds||"48264_274127"===e.yads_ad_ds})}function Xe(e,t){if(e)if(t){const n=document.createElement("script");n.type="text/javascript",n.src=e,t.appendChild(n)}else document.write('<script type="text/javascript" src="'+e+'"><\/script>')}!function(e,t,n){var i;if(null===(i=window.YJ_YADS)||void 0===i?void 0:i.loadedStreamConf)return;window.YJ_YADS=window.YJ_YADS||{},window.YJ_YADS.loadedStreamConf=!0,n.conf=[{params:{yads_ad_ds:"60766_11161"},group:[{name:"st_all"}]},{params:{yads_ad_ds:"84112_185264"},group:[{name:"st_geinou"}]},{params:{yads_ad_ds:"98330_185265"},group:[{name:"st_sports"}]},{params:{yads_ad_ds:"84112_212809"},group:[{name:"st_sklt"}]},{params:{yads_ad_ds:""},group:[{name:"st_sklt1"}]},{params:{yads_ad_ds:""},group:[{name:"st_sklt2"}]},{params:{yads_ad_ds:""},group:[{name:"st_sklt3"}]},{params:{yads_ad_ds:"98330_258967"},group:[{name:"st_follow"}]},{params:{yads_ad_ds:""},group:[{name:"st_buzz"}]},{params:{yads_ad_ds:""},group:[{name:"st_topics"}]},{params:{yads_ad_ds:""},group:[{name:"st_extra"}]},{params:{yads_ad_ds:""},group:[{name:"st_fashion"}]},{params:{yads_ad_ds:""},group:[{name:"st_animal"}]},{params:{yads_ad_ds:""},group:[{name:"st_biz"}]},{params:{yads_ad_ds:""},group:[{name:"st_gourmet"}]},{params:{yads_ad_ds:""},group:[{name:"st_it"}]},{params:{yads_ad_ds:""},group:[{name:"st_beauty"}]},{params:{yads_ad_ds:""},group:[{name:"st_trip"}]},{params:{yads_ad_ds:""},group:[{name:"st_cinema"}]},{params:{yads_ad_ds:""},group:[{name:"st_comics"}]},{params:{yads_ad_ds:""},group:[{name:"st_love"}]},{params:{yads_ad_ds:""},group:[{name:"st_music"}]},{params:{yads_ad_ds:""},group:[{name:"st_car"}]},{params:{yads_ad_ds:""},group:[{name:"st_recipe"}]},{params:{yads_ad_ds:""},group:[{name:"st_game"}]},{params:{yads_ad_ds:""},group:[{name:"st_baseball"}]},{params:{yads_ad_ds:""},group:[{name:"st_soccer"}]},{params:{yads_ad_ds:""},group:[{name:"st_healthcare"}]},{params:{yads_ad_ds:""},group:[{name:"st_anime"}]},{params:{yads_ad_ds:""},group:[{name:"st_local"}]},{params:{yads_ad_ds:""},group:[{name:"st_life"}]},{params:{yads_ad_ds:""},group:[{name:"st_money"}]},{params:{yads_ad_ds:""},group:[{name:"st_drama"}]},{params:{yads_ad_ds:""},group:[{name:"st_childcare"}]},{params:{yads_ad_ds:""},group:[{name:"st_golf"}]},{params:{yads_ad_ds:""},group:[{name:"st_outdoor"}]}],n.conf=n.conf.map((e=>(e.params.yads_request_seq=1,e))),n.dsMap={ios:{st_geinou:"84112_235161",st_sports:"98330_235274",st_sklt:"84112_235275",st_sklt1:"84112_291992",st_sklt2:"84112_291994",st_sklt3:"84112_291995",st_follow:"98330_258749",st_buzz:"104421_270659",st_topics:"86057_271834",st_extra:"67042_276973",st_fashion:"67042_284833",st_animal:"67042_284835",st_biz:"67042_284836",st_gourmet:"67042_284837",st_it:"67042_284838",st_beauty:"67042_284839",st_trip:"67042_284840",st_cinema:"67042_284841",st_comics:"67042_284842",st_love:"67042_284843",st_music:"67042_284844",st_car:"67042_284845",st_recipe:"67042_284846",st_game:"67042_284847",st_baseball:"67042_284848",st_soccer:"67042_284849",st_healthcare:"67042_284850",st_anime:"67042_284851",st_local:"22033_314472",st_life:"67042_557911",st_money:"67042_557925",st_drama:"67042_557926",st_childcare:"67042_585165",st_golf:"67042_677063",st_outdoor:"67042_677065"},android:{st_geinou:"84112_235273",st_sports:"98330_235285",st_sklt:"84112_235283",st_sklt1:"84112_291996",st_sklt2:"84112_291997",st_sklt3:"84112_291998",st_follow:"98330_258750",st_buzz:"38353_270660",st_topics:"16429_271842",st_extra:"67043_276976",st_fashion:"67042_284853",st_animal:"67042_284855",st_biz:"67042_284857",st_gourmet:"67042_284858",st_it:"67042_284859",st_beauty:"67042_284861",st_trip:"67042_284863",st_cinema:"67042_284864",st_comics:"67042_284865",st_love:"67042_284866",st_music:"67042_284867",st_car:"67042_284868",st_recipe:"67042_284869",st_game:"67042_284870",st_baseball:"67042_284872",st_soccer:"67042_284873",st_healthcare:"67042_284875",st_anime:"67042_284876",st_local:"22033_314480",st_life:"67042_557912",st_money:"67042_557928",st_drama:"67042_557930",st_childcare:"67042_585167",st_golf:"67042_677064",st_outdoor:"67042_677066"}},n.multiReqDsMap={ios:{st_all:["60766_543045","60766_543046"]},android:{st_all:["60766_543052","60766_543053"]}};const r="yads-async-target-ad";n.makeAdUniqueId=function(e,t){let n="";window.yads_pv_timestamp&&(n=window.yads_pv_timestamp);return[r,n,e,String(t+1)].join("-")};const s=0,o=1,a=2;n.renderStaticPositionAd=function(e,t,i,r){n.makeAdHtml(e,"st_stb1",(e=>{const t=document.getElementById(r);if(!e||0===e.length||!t)return;const n=e[0];t.innerHTML=n.htmls;for(const e of n.callbacks)e()}))},n.makeAdHtml=function(e,t,i){let r="";window.yads_pv_timestamp&&(r=window.yads_pv_timestamp),n.makeUltraVariableAdHtml(e,r,t,i)};n.makeUltraVariableAdHtml=function(e,t,i,r){const d=[];let l=-1;const c=function(r,s,o){var a;const c=null===(a=window.YJ_YADS.innerFuncs)||void 0===a?void 0:a.getFunctionObject(e[r].script.callback);if(!c)return!1;e[r].ytop_data_ylk=function(e,n,r){const s={pvts:t,rsec:"ydn-ad",slk:i,pos:e+1,streamid:i,reqid:n,tabName:i,mpos:0};return r?s.mpos=l:delete s.mpos,s}(r,s,o);const u=n.makeAdUniqueId(i,r);let h={};if(c.callbackVersion){const t=c([e[r]],u);(function(e){var t;return null!=e&&(null===(t=null==e?void 0:e.callbacks)||void 0===t?void 0:t.map((e=>"function"==typeof e)))})(t)&&(h={htmls:[t.html],callbacks:t.callbacks.map((t=>()=>{t([e[r]],u)}))})}else h=c([e[r]],null,null,u,{returnHtml:!0});return d.push(h),!0},u=function(t){var n;if(t>=e.length)return void r(d);const i=function(e){switch(e.ad_main_type){case"responsive":return o;case"video":return a;default:return s}}(e[t]),h=String(e[0].yadsAdRequestId);e[t].script=function(e){var t;if("object"!=typeof e||null===e)return{};const n=null===(t=null==e?void 0:e.creative_options)||void 0===t?void 0:t.script;return void 0===n||void 0===(null==n?void 0:n.js_file)||void 0===(null==n?void 0:n.callback)?e.script:n}(e[t]);const f=i===a;if(f&&l++,c(t,h,f))u(t+1);else{const i="https://s.yimg.jp/images/listing/tool/yads/"+e[t].script.js_file;null===(n=window.YJ_YADS.innerFuncs)||void 0===n||n.loadScript(i,(()=>{c(t,h,f),u(t+1)}),!0)}};u(0)}}(window,document,(window.YAHOO=window.YAHOO||{},window.YAHOO.JP=window.YAHOO.JP||{},window.YAHOO.JP.anemos=window.YAHOO.JP.anemos||{},window.YAHOO.JP.anemos.yads=window.YAHOO.JP.anemos.yads||{},window.YAHOO.JP.anemos.yads.stream=window.YAHOO.JP.anemos.yads.stream||{},window.YAHOO.JP.anemos.yads.stream)),function(e,t,n){var i;if(null===(i=window.YJ_YADS)||void 0===i?void 0:i.loadedStreamLib)return;window.YJ_YADS=window.YJ_YADS||{},window.YJ_YADS.loadedStreamLib=!0;const r="yads-async-target-",s="yads_stream",o=function(e){for(let t=0,i=n.conf.length;t<i;t++){const i=n.conf[t];if(i.group)for(let t=0,n=i.group.length;t<n;t++)if(i.group[t].name===e)return i}return n.conf[0]},a=function(e){return o(e).requested},d=function(e){const t=o(e);if(!t.group||!t.group.length)return null;for(let n=0,i=t.group.length;n<i;n++)if(t.group[n].name===e)return t.group[n];return null},l=function(e){return"st_all"===e},c=function(e,t,i){var r;if("ios"!==i&&"android"!==i)return null===(r=null==e?void 0:e.params)||void 0===r?void 0:r.yads_ad_ds;if(!l(t))return n.dsMap[i][t];return n.multiReqDsMap[i][t][a(t)?1:0]},u=function(e){const t=r+e.params.yads_ad_ds;if(document.getElementById(t))return;const n=document.createElement("ins");n.id=t,n.className="yads-async-target";const i=document.getElementsByTagName("script")[0];i&&i.parentNode&&i.parentNode.appendChild(n),e.params.yads_parent_element=t},h=function(e,t){for(const t of e.group)if(!l(t.name))return!0;for(const e in n.multiReqDsMap)for(const i in n.multiReqDsMap[e])if(n.multiReqDsMap[e][i][0]===t)return!0;return!1};n.getAdsData=function(e,t,i,r,h,f,p){var m,v;if(!n.conf)return;const g=null!==(m=null!=f?f:window.miffy_yads_bucket_id)&&void 0!==m?m:"",w=null!==(v=null!=p?p:window.miffy_yads_type_tag)&&void 0!==v?v:"",y=d(e);null===y?function(e,t,n){const i=o(e);i.group||(i.group=[]),i.group.push({startPosition:t,interval:n,name:e})}(e,t,i):(y.startPosition=t,y.interval=i);const b=o(e);if(b.isRequestBlocked)window.setTimeout(n.getAdsData,200,e,t,i,r,h);else{if(a(e)){if(n.attachAds(e,b.params.yads_ad_ds,t,i),!l(e)||!function(e){var t,n,i;const r=null===(t=document.getElementsByClassName(s))||void 0===t?void 0:t.length,a=null===(i=null===(n=o(e))||void 0===n?void 0:n.ads)||void 0===i?void 0:i.length;return r&&a&&r>a}(e))return;if(window.yadsRequestAsync)return b.params.yads_ad_ds=c(b,e,h),u(b),b.isRequestBlocked=!0,window.yadsRequestAsync(b.params),void b.params.yads_request_seq++}b.params.yads_ad_ds=c(b,e,h),b.requested=!0,b.params.yads_ad_ds&&(b.params.yads_bucket_id=g,b.params.yads_type_tag=w,b.params.yads_video_autoplay_set=String(r),0!==r&&1!==r||(b.params.yads_video_autoplay_set=String(r)),window.yadsRequestAsync&&(u(b),window.yadsRequestAsync(b.params),b.isRequestBlocked=!0))}},n.poolAds=function(e,t,i,s,o,a,d){let l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;var c,u;if(!e[0])return;e[0].yadsAdRequestId=o;const f=s.replace(r,"");if(!f)return;const p=function(e){for(let t=0,i=n.conf.length;t<i;t++)if(n.conf[t].params&&n.conf[t].params.yads_ad_ds===e)return n.conf[t];return null}(f);if(!p)return;h(p,f)&&(p.firstAdsLength=e.length);const m=function(e,t){if(null===e||"object"!=typeof e)return{};if(null!==t&&"object"==typeof t)return{start_position:t.start_position,interval:t.interval,insert_criteo_rank:t.insert_criteo_rank};if(void 0===(null==e?void 0:e.creative_options))return{start_position:e.start_position,interval:e.interval,insert_criteo_rank:e.insert_criteo_rank};const n=null==e?void 0:e.creative_options;return void 0===(null==n?void 0:n.start_position)||void 0===(null==n?void 0:n.interval)?{start_position:e.start_position,interval:e.interval,insert_criteo_rank:e.insert_criteo_rank}:{start_position:n.start_position,interval:n.interval,insert_criteo_rank:n.insert_criteo_rank}}(e[0],l);p.ads=null!==(c=p.ads)&&void 0!==c?c:[],p.ads=p.ads.concat(e),p.defaultStartIndex=m.start_position,p.defaultInterval=m.interval,p.scriptUrls=null!=a?a:[],p.ydnIndex=null!==(u=p.ydnIndex)&&void 0!==u?u:0;for(let e=0,t=p.group.length;e<t;e++)n.attachAds(p.group[e].name,f);p.isRequestBlocked=!1},n.attachAds=function(e,t,i,r){var a;const l=o(e),c=d(e);c&&0!==(null===(a=l.ads)||void 0===a?void 0:a.length)&&n.makeAdHtml&&n.makeAdHtml(l.ads,e,(n=>{var a,d;const u=null!==(a=null!=i?i:c.startPosition)&&void 0!==a?a:l.defaultStartIndex,f=null!==(d=null!=r?r:c.interval)&&void 0!==d?d:l.defaultInterval;if(0===n.length||!u||!f||!document.getElementById(e))return;const p=document.getElementById(e);!function(e,t,n,i,r){const s=o(r);let a,d=0;for(let r=0,o=e.length;r<o;r++){if(d=parseInt(t,10)-1+parseInt(n,10)*r,a=i[d],!a)continue;if(a.firstElementChild)continue;if(!e[r])continue;const o=e[r];a.innerHTML=o.htmls;for(const e of o.callbacks)e();Xe(s.scriptUrls[s.ydnIndex],a),s.ydnIndex<s.scriptUrls.length-1?s.ydnIndex++:s.ydnIndex=0}}(n,u,f,p&&p.getElementsByClassName(s),e);try{const n=h(l,t)?0:l.firstAdsLength;window.YJ_UADF.YADSViewable.notifyStreamAttached(t,e,n)}catch(e){return}}))}}(window,document,(window.YAHOO=window.YAHOO||{},window.YAHOO.JP=window.YAHOO.JP||{},window.YAHOO.JP.anemos=window.YAHOO.JP.anemos||{},window.YAHOO.JP.anemos.yads=window.YAHOO.JP.anemos.yads||{},window.YAHOO.JP.anemos.yads.stream=window.YAHOO.JP.anemos.yads.stream||{},window.YAHOO.JP.anemos.yads.stream));const Ze=function(e){var t;const{rank:n,requestId:i,yads_cl_name:r,mRank:s}=e,o={pvts:null!==(t=window.yads_pv_timestamp)&&void 0!==t?t:"",rsec:"ydn-ad",slk:r,pos:n,streamid:r,reqid:i,tabName:r};return void 0!==s&&(o.mpos=s),o},et=function(e,t){return"video"===(null==e?void 0:e.ad_main_type)?{isVideo:!0,mAdRank:t+1}:{isVideo:!1,mAdRank:t}};class tt{constructor(e){var t,n,i;this.params=e||{},this.isAdFetched=!1,this.insertReservationIds=[],this.adHtmls=[],this.usedAdNum=0,this.scriptUrls=[],this.ads=[],this.init(),(null===(t=window.YJ_YADS)||void 0===t?void 0:t.timelineChecker)||(window.YJ_YADS.timelineChecker=new Set),null===(i=null===(n=window.YJ_YADS)||void 0===n?void 0:n.timelineChecker)||void 0===i||i.add(e.yads_ad_ds)}init(){if(!this.params.yads_ad_ds)return;window.yadsTimelineManagerList||(window.yadsTimelineManagerList={});const e="yads-timeline-"+this.params.yads_ad_ds+"-"+Math.floor(1e7*Math.random());this.uniqueId=e,window.yadsTimelineManagerList[e]=this,this.fetch()}fetch(){if(!window.yadsRequestAsync)return;const e=document.createElement("ins");e.id=this.uniqueId,(document.head||document.body).appendChild(e),this.params.yads_parent_element=this.uniqueId;const t=String(this.params.yads_video_autoplay_set);window.yadsRequestAsync(Object.assign(Object.assign({},this.params),{yads_video_autoplay_set:t}))}hasMoreAds(){return this.adHtmls.length>0}insertAd(e){if(e){if(!document.getElementById(e))return-1;this.insertReservationIds.push(e)}if(!this.isAdFetched)return 0;if(0===this.adHtmls.length)return 0;for(;this.adHtmls.length>0&&this.insertReservationIds.length>0;){const e=this.insertReservationIds.shift()||"",t=document.getElementById(e);if(!t)continue;const n=this.adHtmls.shift(),i=this.ads.shift();if(n){t.innerHTML=n.htmls;for(const t of n.callbacks)t([i],e);this.usedAdNum+=1,this.notifyForVImps(t,this.usedAdNum)}const r=this.scriptUrls.shift();this.insertScriptTag(r,t)}return 1}insertScriptTag(e,t){if(e)if(t){const n=document.createElement("script");n.type="text/javascript",n.src=e,t.appendChild(n)}else document.write('<script type="text/javascript" src="'+e+'"><\/script>')}notifyForVImps(e,t){var n;const i=null===(n=window.YJ_YADS.innerFuncs)||void 0===n?void 0:n.findViewableTargetElements(e);if(!i||1!==i.length)return;const r=i[0],s=this.uniqueId,o=this.params.yads_ad_ds;window.YJ_UADF.YADSViewable.notifyTimelineAttached(s,o,1,t,r)}}window.YadsTimelineManager=tt;const nt=e=>{var t;if("object"!=typeof e||null===e)return{};const n=null===(t=null==e?void 0:e.creative_options)||void 0===t?void 0:t.script;return void 0===n||void 0===(null==n?void 0:n.js_file)||void 0===(null==n?void 0:n.callback)?e.script:n},it=(e,t,n,i,r,s)=>{var o;const a=null===(o=window.YJ_YADS.innerFuncs)||void 0===o?void 0:o.getFunctionObject(nt(t[n]).callback);if(!a)return!1;const d=r+"-"+n;if(void 0!==e.params.yads_cl_name){const r=[{rank:n+1,requestId:s,yads_cl_name:e.params.yads_cl_name}];i.isVideo&&(r[0].mRank=i.mAdRank),t[n].ytop_data_ylk=Ze(...r)}let l={};if(a.callbackVersion){const e=a([t[n]],d);(function(e){var t;return null!=e&&(null===(t=null==e?void 0:e.callbacks)||void 0===t?void 0:t.map((e=>"function"==typeof e)))})(e)&&(l={htmls:[e.html],callbacks:e.callbacks.map((e=>(t,n)=>{e(t,n)}))})}else l=a([t[n]],null,null,d,{returnHtml:!0});return e.adHtmls.push(l),e.ads.push(t[n]),!0},rt=(e,t,n,i,r,s,o)=>{var a;if(n>=r)return e.isAdFetched=!0,void e.insertAd.call(e);const d=et(t[n],i.mAdRank);if(it(e,t,n,d,s,o))rt(e,t,n+1,d,r,s,o);else{const i="https://s.yimg.jp/images/listing/tool/yads/"+nt(t[n]).js_file;null===(a=window.YJ_YADS.innerFuncs)||void 0===a||a.loadScript(i,(()=>{it(e,t,n,d,s,o),rt(e,t,n+1,d,r,s,o)}),!0)}};window.yadsTimelinePoolAds=function(e,t,n,i,r,s){if(!window.yadsTimelineManagerList||!window.yadsTimelineManagerList[i])return void console.warn("cannot find yadsTimelineManagerList, check Adframe settings, uniqueId: ".concat(i));const o=window.yadsTimelineManagerList[i];if(o.scriptUrls=s||[],!Array.isArray(e))return;const a=e.length;rt(o,e,0,et(void 0,0),a,i,r)};class st{constructor(){this.managers={}}dispatch(e){if(!e.yads_ad_ds)return void console.error("[YJ_YADS] TypeError: yads_ad_ds are required");const t=this.fetchManager(e);e.yads_insert_target&&t.insertAd(e.yads_insert_target)}fetchManager(e){const t=this.managers[e.yads_ad_ds];if(t)return t;const n=new tt({yads_ad_ds:e.yads_ad_ds,yads_type_tag:e.yads_type_tag,yads_video_autoplay_set:e.yads_video_autoplay_set,yads_shannon_id:e.yads_shannon_id,yads_cl_name:e.yads_cl_name,yads_bucket_id:e.yads_bucket_id});return this.managers[e.yads_ad_ds]=n,n}}class ot{constructor(e){var t,n,i;this.sequenceAdRank=0,this.sequenceMovieAdRank=0,this.validateParameter(e),null!==(t=(i=window.YJ_YADS).timelineChecker)&&void 0!==t||(i.timelineChecker=new Set);for(const t of e.yads_ad_ds_list.map((e=>e.ds)))null===(n=window.YJ_YADS.timelineChecker)||void 0===n||n.add(t);if(this.managerId="yads-timeline-"+e.yads_ad_ds_list.map((e=>e.ds)).join("-"),this.dsManagers=e.yads_ad_ds_list.map((e=>({ds:e.ds,reqTimes:e.reqTimes,curReq:0}))),this.currentDsIndex=0,this.isFetching=!1,this.registeredInsertIds=[],this.adObjs=[],this.thirdPartyScriptUrls=[],this.usedAdNum=0,this.yadsClName=e.yads_cl_name,this.sequenceAdRank=0,this.sequenceMovieAdRank=0,!document.getElementById(this.managerId)){const e=document.createElement("ins");e.id=this.managerId,(document.head||document.body).appendChild(e)}const r={yads_ad_ds:"",yads_parent_element:this.managerId,yads_request_seq:1},s=Object.assign({},e);delete s.yads_ad_ds_list,delete s.yads_insert_target,delete s.yads_dispatch_style,this.reqParam=Object.assign(Object.assign({},r),s)}registerInsertId(e){this.registeredInsertIds.push(e)}getManagerId(){return this.managerId}insert(){if(!this.isFetching)for(;this.registeredInsertIds.length>0;){if(0===this.adObjs.length)return this.fetch(),void(this.isFetching=!0);const e=this.registeredInsertIds.shift()||"",t=document.getElementById(e);if(!t)continue;const n=this.adObjs.shift();n&&(t.insertAdjacentHTML("afterbegin",n.adHtml),n.callbacks.forEach((t=>t([n.originalAd],e))),this.usedAdNum++,this.notifyForVimps(t,this.usedAdNum));const i=this.thirdPartyScriptUrls.shift()||"";Re.insertScriptTag(i,e)}}fetch(){const e=this.dsManagers[this.currentDsIndex];e&&(this.reqParam.yads_ad_ds=e.ds,e.curReq++,this.reqParam.yads_request_seq=e.curReq,window.YJ_YADS.tasks.push(this.reqParam),e.curReq>=e.reqTimes&&this.currentDsIndex++)}poolAds(e,t,n){this.thirdPartyScriptUrls=this.thirdPartyScriptUrls.concat(t),this.setAdObjToManagerSync(e,0,n)}notifyForVimps(e,t){const n=Re.findViewableTargetElements(e);1===(null==n?void 0:n.length)&&window.YJ_UADF.YADSViewable.notifyTimelineAttached(this.managerId,this.reqParam.yads_ad_ds||"",1,t,n[0])}getScriptProperty(e){var t;const n=null===(t=null==e?void 0:e.creative_options)||void 0===t?void 0:t.script;return null!=(null==n?void 0:n.js_file)||null!=(null==n?void 0:n.callback)?n:null==e?void 0:e.script}setAdObjToManagerSync(e,t,n,i){var r,s;if(t===e.length)return this.isFetching=!1,void this.insert();this.sequenceAdRank++;const o=et(e[t],null!==(r=this.sequenceMovieAdRank)&&void 0!==r?r:0);if(this.sequenceMovieAdRank=o.mAdRank,this.trySetAdObj(e[t],t,o,n))this.setAdObjToManagerSync(e,t+1,n);else{const i=null===(s=this.getScriptProperty(e[t]))||void 0===s?void 0:s.js_file,r="https://s.yimg.jp/images/listing/tool/yads/".concat(i);Re.loadScript(r,(()=>{this.trySetAdObj(e[t],t,o,n),this.setAdObjToManagerSync(e,t+1,n)}),!0)}}trySetAdObj(e,t,n,i){var r,s;const o=Re.getFunctionObject(null===(r=this.getScriptProperty(e))||void 0===r?void 0:r.callback);if(!o)return!1;const a="".concat(this.getManagerId(),"-").concat(this.usedAdNum+t),d=e;if(this.yadsClName){const e=[{rank:this.sequenceAdRank,requestId:i,yads_cl_name:this.yadsClName}];n.isVideo&&(e[0].mRank=n.mAdRank),d.ytop_data_ylk=Ze(...e)}let l;if(o.callbackVersion){const t=o([e],a);l={adHtml:t.html,originalAd:d,callbacks:null===(s=t.callbacks)||void 0===s?void 0:s.map((e=>(t,n)=>{e(t,n)}))}}else{const e=o([d],null,null,a,{returnHtml:!0});l={adHtml:e.htmls[0],originalAd:d,callbacks:e.callbacks}}return this.adObjs.push(l),!0}validateParameter(e){e.yads_ad_ds_list&&Array.isArray(e.yads_ad_ds_list)||console.error("[YJ_YADS] TypeError: yads_ad_ds_list is required"),e.yads_ad_ds_list.forEach((e=>{e.ds&&"string"==typeof e.ds||console.error("[YJ_YADS] TypeError: yads_ad_ds_list.ds is required"),e.reqTimes&&"number"==typeof e.reqTimes||console.error("[YJ_YADS] TypeError: yads_ad_ds_list.reqTimes is required")})),e.yads_insert_target||console.error("[YJ_YADS] TypeError: yads_insert_target is required")}}class at{constructor(){window.YJ_YADS=window.YJ_YADS||{},window.YJ_YADS.tasks=window.YJ_YADS.tasks||[],at.yadsTimeline=new st}static get getInstance(){return this.instance||(this.instance=new at),this.instance}observe(){var e=this;if(!Array.isArray(window.YJ_YADS.tasks))return void console.error("[YJ_YADS] TypeError: Cannot handle this data type: ".concat(window.YJ_YADS.tasks));const t="push";if(Object.getOwnPropertyDescriptor(window.YJ_YADS.tasks,t))return;let n;for(Object.defineProperty(window.YJ_YADS.tasks,t,{value:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.forEach((t=>{e.dispatch(t)})),0}});void 0!==(n=window.YJ_YADS.tasks.shift());)this.dispatch(n)}dispatch(e){if("object"==typeof(t=e)&&null!==t)switch(e.yads_dispatch_type){case"set_viewable_offset":this.setViewableOffset(e);break;case"prefetch":this.preFetchAd(e);break;default:this.render(e)}var t}render(e){var t,n,i;"timeline"===(null==(i=e)?void 0:i.yads_dispatch_style)&&void 0!==(null==i?void 0:i.yads_ad_ds)?at.yadsTimeline.dispatch(e):(e=>"timelineMulti"===(null==e?void 0:e.yads_dispatch_style)&&void 0!==(null==e?void 0:e.yads_ad_ds_list)&&void 0!==(null==e?void 0:e.yads_insert_target))(e)?null===(t=window.YJ_YADS.yadsTimelineMulti)||void 0===t||t.dispatch(new ot(e),e.yads_insert_target):(e=>"stream"===(null==e?void 0:e.yads_dispatch_style)&&void 0!==(null==e?void 0:e.yads_group_name)&&void 0!==(null==e?void 0:e.yads_os_name))(e)?(n=e,YAHOO.JP.anemos.yads.stream.getAdsData(n.yads_group_name,1,1,n.yads_video_autoplay_set,n.yads_os_name,n.yads_bucket_id,n.yads_type_tag)):(e=>"s2s"===(null==e?void 0:e.yads_dispatch_style)&&void 0!==(null==e?void 0:e.renderer))(e)?e.renderer():(e=>void 0!==(null==e?void 0:e.yads_ad_ds)&&void 0!==(null==e?void 0:e.yads_parent_element))(e)&&Qe(e)}setViewableOffset(e){var t,n;if(void 0!==(null==(n=e)?void 0:n.top)&&"number"!=typeof n.top||void 0!==(null==n?void 0:n.right)&&"number"!=typeof n.right||void 0!==(null==n?void 0:n.bottom)&&"number"!=typeof n.bottom||void 0!==(null==n?void 0:n.left)&&"number"!=typeof n.left)return;const{top:i,right:r,bottom:s,left:o}=e,a={};if(void 0!==i&&(a.top=i),void 0!==r&&(a.right=r),void 0!==s&&(a.bottom=s),void 0!==o&&(a.left=o),null===(t=window.YJ_UADF)||void 0===t?void 0:t.YADSViewable){const e=(new Date).getTime();window.YJ_UADF.YADSViewable.notifyViewableOffsetEvent(a,e)}}preFetchAd(e){var t;void 0!==(null==(t=e)?void 0:t.yads_ad_ds)&&function(e){const t=new E;Z((()=>{var n,i;try{if("number"!=typeof window.YJ_YADS.yads_sequence_num?window.YJ_YADS.yads_sequence_num=0:window.YJ_YADS.yads_sequence_num++,!e.yads_ad_ds)return;if(null!==(n=(i=window.YJ_YADS).adCache)&&void 0!==n||(i.adCache=new xe),window.YJ_YADS.adCache.exists(e.yads_ad_ds))return;window.YJ_YADS.adCache.create(e.yads_ad_ds),Ge({yadsAsyncParameter:e,fetchOnly:!0})}catch(e){t.error(new f(e))}}))}(e)}}class dt{constructor(){this.viewableCallbacks={"view-in":null,"view-out":null},this.isViewedIn=!1,dt.isSupported("viewable-callback")&&window.addEventListener("message",this.handleViewableCallbacks.bind(this),!1)}static isSupported(e){if("viewable-callback"===e){let e=!1;try{e=window!==window.top}catch(t){e=!0}return e}return!1}setViewInCallback(e){this.viewableCallbacks["view-in"]=e,this.isViewedIn&&e()}setViewOutCallback(e){this.viewableCallbacks["view-out"]=e,this.isViewedIn||e()}static setViewCallbackElement(e){const t=e.getBoundingClientRect();window.parent.postMessage({cmd:"frameUpdateCallbackElement",top:Math.round(t.top),right:Math.round(t.right),bottom:Math.round(t.bottom),left:Math.round(t.left)},"*")}handleViewableCallbacks(e){let t,n,i=!1;if(null!==e.data&&"object"==typeof e.data)t=e.data.cmd,n=e.data.eventType;else{if("string"!=typeof e.data)return;{i=!0;const r=e.data.split(",");t=r[0],n=r[1]}}if("vimpsMessage"!==t&&"viewStateChanged"!==t)return;i&&(new E).deprecatedPostMessage(e);["view-in","view-out"].includes(n)&&("view-in"===n?(this.isViewedIn=!0,this.viewableCallbacks["view-in"]&&this.viewableCallbacks["view-in"]()):"view-out"===n&&(this.isViewedIn=!1,this.viewableCallbacks["view-out"]&&this.viewableCallbacks["view-out"]()))}}class lt{constructor(e){this.finder=e}find(e,t){const n=t.getElementById(e);return n?this.finder.find(n):[]}}class ct{find(e){const t=[];return e.querySelectorAll("*[data-rma-viewable]").forEach((e=>t.push(e))),t}}class ut{find(e){const t=e.querySelectorAll("*[data-ydntxt-item]");return Array.from(t)}}class ht{find(e){const t=[];return e.querySelectorAll(".yads_stream [data-ydntxt-item]").forEach((e=>t.push(e))),t}}var ft,pt;!function(e){e[e.DONE=0]="DONE",e[e.AGAIN=1]="AGAIN",e[e.FAIL=2]="FAIL"}(ft||(ft={}));class mt{constructor(){this.intervalMillisec=100,this.defaultMaxExecutions=1800,this.commandQueue=[]}push(e,t){if(e.execute()===ft.AGAIN){const n=(null==t?void 0:t.maxExecutions)||this.defaultMaxExecutions;this.commandQueue.push({command:e,maxExecutions:n,executionCount:1}),this.timerId||(this.timerId=setInterval((()=>{this.onInterval()}),this.intervalMillisec))}}onInterval(){this.commandQueue=this.commandQueue.filter((e=>{if(e.executionCount==e.maxExecutions)return!1;return(()=>{try{return e.command.execute()}catch(e){return ft.FAIL}})()===ft.AGAIN&&(e.executionCount++,!0)})),0===this.commandQueue.length&&this.timerId&&(clearInterval(this.timerId),this.timerId=void 0)}}function vt(e,t){const n=[],i=Math.min(e.length,t.length);return e.forEach(((e,r)=>{r<i&&n.push([e,t[r]])})),n}class gt{constructor(e,t,n,i){this.commandQueue=e,this.adElementFinder=t,this.targetFactory=n,this.monitor=i}notifyRendered(e){this.commandQueue.push(new wt(this.adElementFinder,this.targetFactory,this.monitor,e))}}class wt{constructor(e,t,n,i){this.adElementFinder=e,this.targetFactory=t,this.monitor=n,this.hint=i}execute(){var e;const t=null===(e=this.hint.docWriteCaller)||void 0===e?void 0:e.parentElement;if(!t)return ft.FAIL;if(!this.hint.viewableInfo||0===this.hint.viewableInfo.length)return ft.FAIL;const n=this.adElementFinder.find(t);if(0===n.length)return ft.AGAIN;const i=vt(n,this.hint.viewableInfo);i.forEach(((e,t)=>{let[n,i]=e;const r=(()=>{var e;return this.hint.viewableTrackingUrlList&&null!==(e=this.hint.viewableTrackingUrlList[t])&&void 0!==e?e:[]})(),s=this.targetFactory.createVimpsTarget(n,i,this.hint.viewableUrl,this.hint.isAudit,this.hint.adProdSetCode,{viewableTrackingUrlList:r,sspKPIInfo:this.hint.sspKPIInfo,rankFrom1:t+1});this.monitor.register(n,[s])}));return i.length===this.hint.viewableInfo.length?ft.DONE:ft.AGAIN}}function yt(e,t){if(!e||!t)return null;const n=e.document.querySelectorAll("iframe");for(const e of n)try{if(e.contentWindow===t)return e;const n=yt(e.contentWindow,t);if(n)return n}catch(e){}return null}function bt(e){return 0!==e}!function(e){e[e.NonMeasurable=0]="NonMeasurable",e[e.Measurable=1]="Measurable"}(pt||(pt={}));class _t{constructor(e,t,n,i,r,s){this.mimpsBeaconSender=e,this.singleWithParent=t,this.docWrite=n,this.stream=i,this.timeline=r,this.richad=s}notifyRendered(e){var t,n;if(bt(e.vimpsMode))switch(this.mimpsBeaconSender.sendMeasurableBeacon(e.measurableUrl,null!==(n=e.viewableInfo)&&void 0!==n?n:[],pt.Measurable,e.adProdSetCode),e.type){case"single_with_parent":this.singleWithParent.notifyRendered(e);break;case"doc_write":this.docWrite.notifyRendered(e);break;case"stream":this.stream.notifyRendered(e);break;case"timeline":this.timeline.notifyRendered(e);break;case"richad":this.richad.notifyRendered(e)}else this.mimpsBeaconSender.sendMeasurableBeacon(e.measurableUrl,null!==(t=e.viewableInfo)&&void 0!==t?t:[],pt.NonMeasurable,e.adProdSetCode)}}const It=20,At=["timer","intersection","setViewableOffset","updateRect","viewin","viewout","viewcontinue","viewable","viewablediff"],St=["outline","centerpoint","id","timer","target"];class Ot{constructor(e){this.wrapped=e,this.limit=It,this.events=[]}notifyRendered(e){this.events.push(Object.assign({time:(new Date).getTime()},e)),this.events.length>this.limit&&this.events.shift(),this.wrapped.notifyRendered(e)}getHistory(){return this.events}}class Et{constructor(e){this.limit=It,this.wrapped=e,this.events=[]}notifyStreamAttached(e,t,n){const i={dsCode:e,parentId:t,startIndex:n,done:!1};this.events.push(Object.assign({time:(new Date).getTime()},i)),this.events.length>this.limit&&this.events.shift(),this.wrapped.notifyStreamAttached(e,t,n)}getHistory(){return this.events}}class Mt{constructor(e){this.limit=It,this.wrapped=e,this.events=[]}notifyTimelineAttached(e,t,n,i,r){const s={uniqId:e,rank:i,adElem:r,done:!1};this.events.push(Object.assign({time:(new Date).getTime()},s)),this.events.length>this.limit&&this.events.shift(),this.wrapped.notifyTimelineAttached(e,t,n,i,r)}getHistory(){return this.events}}class kt{constructor(e){this.reforObject=void 0,"undefined"!=typeof WeakRef?this.reforObject=new WeakRef(e):this.reforObject=e}deref(){return"undefined"!=typeof WeakRef&&this.reforObject instanceof WeakRef?this.reforObject.deref():this.reforObject}}class Tt{constructor(e,t,n,i){this.commandQueue=e,this.adElementFinderById=t,this.targetFactory=n,this.monitor=i}notifyRendered(e){e.parentIdList.forEach((t=>{this.commandQueue.push(new Rt(this.adElementFinderById,this.targetFactory,this.monitor,t,e))}))}}class Rt{constructor(e,t,n,i,r){this.adElementFinderById=e,this.targetFactory=t,this.monitor=n,this.parentId=i,this.hint=r}execute(){if(!this.hint.viewableInfo||0===this.hint.viewableInfo.length)return ft.FAIL;const e=this.adElementFinderById.find(this.parentId,document);if(0===e.length)return ft.AGAIN;const t=vt(e,this.hint.viewableInfo);t.forEach(((e,t)=>{let[n,i]=e;const r=this.hint.adProdSetCode,s=(()=>{var e;return this.hint.viewableTrackingUrlList&&null!==(e=this.hint.viewableTrackingUrlList[t])&&void 0!==e?e:[]})(),o=new kt(n),a=this.targetFactory.createVimpsTarget(n,i,this.hint.viewableUrl,this.hint.isAudit,r,{viewableTrackingUrlList:s,makeVimpsAdditionalParams:()=>{const e=new URLSearchParams,t=o.deref();if(!t)return e;const n=t.getAttribute("data-rma-mainshrink");n&&e.append("mainshrink",n);const i=t.getAttribute("data-rma-sidehide");return i&&e.append("sidehide",i),e},sspKPIInfo:this.hint.sspKPIInfo,rankFrom1:t+1});this.monitor.register(n,[a])}));return t.length===this.hint.viewableInfo.length?ft.DONE:ft.AGAIN}}class Ct{constructor(e,t,n,i){this.commandQueue=e,this.adElementFinderById=t,this.targetFactory=n,this.monitor=i}notifyRendered(e){this.commandQueue.push(new Pt(this.adElementFinderById,this.targetFactory,this.monitor,e))}}class Pt{constructor(e,t,n,i){this.adElementFinderById=e,this.targetFactory=t,this.monitor=n,this.hint=i}execute(){if(!this.hint.viewableInfo||0===this.hint.viewableInfo.length)return ft.FAIL;const e=this.findAds();if(0===e.length)return ft.AGAIN;const t=vt(e,this.hint.viewableInfo);t.forEach(((e,t)=>{let[n,i]=e;const r=(()=>{var e;return this.hint.viewableTrackingUrlList&&null!==(e=this.hint.viewableTrackingUrlList[t])&&void 0!==e?e:[]})(),s=this.targetFactory.createVimpsTarget(n,i,this.hint.viewableUrl,this.hint.isAudit,this.hint.adProdSetCode,{viewableTrackingUrlList:r,sspKPIInfo:this.hint.sspKPIInfo,rankFrom1:t+1});this.monitor.register(n,[s])}));return t.length===this.hint.viewableInfo.length?ft.DONE:ft.AGAIN}findAds(){return this.adElementFinderById.find(this.hint.parentId,document)}}class Dt{constructor(e,t,n,i){this.document=e,this.adElementFinder=t,this.targetFactory=n,this.monitor=i,this.streamViewableInfoStore=new Map,this.streamAttachedStore=new Map}notifyRendered(e){var t;const n=ce(e.adProdSetCode),i=[];e.viewableInfo&&(e.viewableInfo.forEach(((t,n)=>{i.push({adprodsetCode:e.adProdSetCode,requestId:e.requestId,viewableInfo:t,viewableUrl:e.viewableUrl,viewableTrackingUrlList:(()=>{var t;return e.viewableTrackingUrlList&&null!==(t=e.viewableTrackingUrlList[n])&&void 0!==t?t:[]})(),isAudit:e.isAudit,sspKPIInfo:e.sspKPIInfo})})),this.streamViewableInfoStore.has(n)?null===(t=this.streamViewableInfoStore.get(n))||void 0===t||t.push(...i):this.streamViewableInfoStore.set(n,i),this.integrate(n))}notifyStreamAttached(e,t){var n;const i={dsCode:e,parentId:t,startIndex:arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,done:!1};this.streamAttachedStore.has(e)?null===(n=this.streamAttachedStore.get(e))||void 0===n||n.push(i):this.streamAttachedStore.set(e,[i]),this.integrate(e)}integrate(e){const t=this.streamAttachedStore.get(e);if(!t)return;const n=this.streamViewableInfoStore.get(e);if(!n)return;t.forEach((e=>{const t=this.document.getElementById(e.parentId);if(!t)return;const i=this.adElementFinder.find(t).slice(e.startIndex);if(0===i.length)return;const r=vt(i,n);this.register(r);const s=r.length;e.done=s===i.length}));const i=t.filter((e=>!e.done));this.streamAttachedStore.set(e,i)}register(e){e.forEach(((e,t)=>{let[n,i]=e;const r=this.targetFactory.createVimpsTarget(n,i.viewableInfo,i.viewableUrl,i.isAudit,i.adprodsetCode,{viewableTrackingUrlList:i.viewableTrackingUrlList,sspKPIInfo:i.sspKPIInfo,rankFrom1:t+1});this.monitor.register(n,[r])}))}}class xt{constructor(e,t){this.targetFactory=e,this.monitor=t,this.timelineViewableInfoStore=new Map,this.timelineAttachedStore=new Map}notifyRendered(e){var t;const n=e.uniqueId,i=[];Array.from({length:e.adNum}).forEach(((t,n)=>{const r=(()=>{var t;return e.viewableInfo&&null!==(t=e.viewableInfo[n])&&void 0!==t?t:""})(),s=(()=>{var t;return e.viewableTrackingUrlList&&null!==(t=e.viewableTrackingUrlList[n])&&void 0!==t?t:[]})();i.push({adprodsetCode:e.adProdSetCode,requestId:e.requestId,viewableInfo:r,viewableUrl:e.viewableUrl,viewableTrackingUrlList:s,isAudit:e.isAudit,sspKPIInfo:e.sspKPIInfo})})),this.timelineViewableInfoStore.has(n)?null===(t=this.timelineViewableInfoStore.get(n))||void 0===t||t.push(...i):this.timelineViewableInfoStore.set(n,i),this.integrate(n)}notifyTimelineAttached(e,t,n,i,r){var s;const o={uniqId:e,rank:i,adElem:r,done:!1};this.timelineAttachedStore.has(e)?null===(s=this.timelineAttachedStore.get(e))||void 0===s||s.push(o):this.timelineAttachedStore.set(e,[o]),this.integrate(e)}integrate(e){const t=this.timelineAttachedStore.get(e);if(!t)return;const n=this.timelineViewableInfoStore.get(e);if(!n)return;t.forEach((e=>{const t=n[e.rank-1];t&&(this.register(e,t),e.done=!0)}));const i=t.filter((e=>!e.done));this.timelineAttachedStore.set(e,i)}register(e,t){const n=e.adElem,i=this.targetFactory.createVimpsTarget(n,t.viewableInfo,t.viewableUrl,t.isAudit,t.adprodsetCode,{viewableTrackingUrlList:t.viewableTrackingUrlList,sspKPIInfo:t.sspKPIInfo,rankFrom1:e.rank});this.monitor.register(n,[i])}}class Yt{constructor(e){this.base=e,this.commandQueue=new mt,this.streamHandler=this.buildStreamHandler(e),this.timelineHandler=this.buildTimelineHandler(e)}buildStreamAttachedHandler(){return new Et(this.streamHandler)}buildTimelineAttachedHandler(){return new Mt(this.timelineHandler)}buildRenderedEventHandler(){const e=new ut;return new Ot(new _t(this.base.mimpsSender,new Ct(this.commandQueue,new lt(e),this.base.vimpsTargetFactory,this.base.monitor),new gt(this.commandQueue,e,this.base.vimpsTargetFactory,this.base.monitor),this.streamHandler,this.timelineHandler,new Tt(this.commandQueue,new lt(new ct),this.base.vimpsTargetFactory,this.base.monitor)))}buildStreamHandler(e){return new Dt(document,new ht,e.vimpsTargetFactory,e.monitor)}buildTimelineHandler(e){return new xt(e.vimpsTargetFactory,e.monitor)}}class Lt{constructor(e){this.monitor=e}notifyViewableOffsetEvent(e,t){this.monitor.setViewableOffset(e,t)}}class Ft{constructor(e){this.wrapped=e,this.limit=It,this.events=[]}notifyViewableOffsetEvent(e,t){this.events.push(Object.assign({time:t},e)),this.events.length>this.limit&&this.events.shift(),this.wrapped.notifyViewableOffsetEvent(e,t)}getHistory(){return this.events}}class Vt{constructor(e){this.base=e,this.viewableOffsetEventHandler=new Lt(this.base.monitor)}buildViewableOffsetEventHandler(){return new Ft(this.viewableOffsetEventHandler)}}class jt{constructor(e){this.requestInit=e}async sendBeacon(e){try{await fetch(e,this.requestInit)}catch(t){document.createElement("img").src=e}}}class Ut{constructor(){}async sendBeacon(e){fetch(e,{mode:"no-cors",priority:"low"}).catch((t=>{document.createElement("img").src=e;(new E).error(new f(t))}))}}class Nt{constructor(){const e={priority:"low"};window.isSecureContext&&(e.browsingTopics=!0),this.sender=new jt(e)}async sendBeacon(e){await this.sender.sendBeacon(e)}}class Ht{constructor(){const e={priority:"low"};window.isSecureContext&&(e.credentials="include",e.browsingTopics=!0,e.attributionReporting={eventSourceEligible:!0,triggerEligible:!1}),this.sender=new jt(e)}async sendBeacon(e){await this.sender.sendBeacon(e)}}class Bt{constructor(){this.sender=new jt({priority:"low"})}async sendBeacon(e){await this.sender.sendBeacon(e)}}function qt(){return Math.floor(1e9*Math.random()).toString(32)}class Jt{constructor(e,t,n){this.beaconNum=0,this.sender=e,this.pvId=t,this.timeSrc=n,this.startTime=n.getTime()}sendMeasurableBeacon(e,t,n,i){if(!e||0===t.length)return;const r=[t[0]];t.slice(1).forEach((e=>{const t=r[r.length-1];(null==t?void 0:t.length)+e.length>8e3?r.push(e):r[r.length-1]+="&"+e})),r.forEach((t=>{t.length>0&&this.send(e,t,n)}))}send(e,t,n){const i=new URLSearchParams;i.append("rs","yads_vb"),i.append("bt","5"),i.append("pv",this.pvId),i.append("rand",qt()),i.append("seq",(++this.beaconNum).toString()),i.append("et",(this.timeSrc.getTime()-this.startTime).toString()),i.append("vi",t),i.append("measurable",n===pt.Measurable?"1":"0");const r=new URL(e);r.search=i.toString()+"&EOQ",this.sender.sendBeacon(r.toString())}}class Wt{constructor(e,t){this.sender=e,this.resendProtector=t}sendMeasurableBeacon(e,t,n,i){const r=t.filter((e=>!this.resendProtector.isSentViewableInfo(e,"measurable")));0!==r.length&&(this.resendProtector.clear(i),this.sender.sendMeasurableBeacon(e,r,n,i),r.forEach((e=>this.resendProtector.recordSending(i,e,"measurable"))))}}const zt="yads_vimps";var Kt;!function(e){e[e.NONE=0]="NONE",e[e.MEASURABLE_SENT_BIT=1]="MEASURABLE_SENT_BIT",e[e.VIEWABLE_SENT_BIT=2]="VIEWABLE_SENT_BIT",e[e.VIEWINTIME_SENT_BIT=4]="VIEWINTIME_SENT_BIT",e[e.VIEWABLEDIFF_SENT_BIT=8]="VIEWABLEDIFF_SENT_BIT"}(Kt||(Kt={}));class $t{constructor(e){this.store=JSON.parse(e)}static loadFromStorage(e){try{const t=e.getItem(zt)||"{}";return new $t(t)}catch(e){return new $t("{}")}}flush(e){try{e.setItem(zt,JSON.stringify(this.store))}catch(e){return}}isSentViewableInfo(e,t){const n=this.shorten(e);for(const e of Object.values(this.store))if(Object.prototype.hasOwnProperty.call(e,n))switch(t){case"measurable":return!!(e[n]&Kt.MEASURABLE_SENT_BIT);case"viewable":return!!(e[n]&Kt.VIEWABLE_SENT_BIT);case"viewintime":return!!(e[n]&Kt.VIEWINTIME_SENT_BIT);case"viewablediff":return!!(e[n]&Kt.VIEWABLEDIFF_SENT_BIT)}return!1}recordSending(e,t,n){this.store[e]||(this.store[e]={});const i=this.shorten(t);switch(n){case"measurable":this.store[e][i]|=Kt.MEASURABLE_SENT_BIT;break;case"viewable":this.store[e][i]|=Kt.VIEWABLE_SENT_BIT;break;case"viewintime":this.store[e][i]|=Kt.VIEWINTIME_SENT_BIT;break;case"viewablediff":this.store[e][i]|=Kt.VIEWABLEDIFF_SENT_BIT}}clear(e){this.store[e]={}}shorten(e){return e.slice(0,64)}}class Gt{getItem(e){return"{}"}setItem(e,t){}}class Qt{constructor(e){this.storage=e}recordSending(e,t,n){const i=$t.loadFromStorage(this.storage);i.recordSending(e,t,n),i.flush(this.storage)}isSentViewableInfo(e,t){return $t.loadFromStorage(this.storage).isSentViewableInfo(e,t)}clear(e){const t=$t.loadFromStorage(this.storage);t.clear(e),t.flush(this.storage)}}class Xt{constructor(e,t,n){this.beaconNum=0,this.sender=e,this.pvId=t,this.timeSrc=n,this.startTime=n.getTime()}sendViewableBeacon(e,t,n,i,r){const s=new E,o={ds_name:ce(i),adprodset_code:i,location:location.href,vimps_type:"old"};if(s.viewablediff(o),!e)return;const a=new URLSearchParams;a.append("rs","yads_vb"),a.append("bt","2"),a.append("pv",this.pvId),a.append("rand",qt()),a.append("seq",(++this.beaconNum).toString()),a.append("et",(this.timeSrc.getTime()-this.startTime).toString()),null==r||r.forEach(((e,t)=>{a.append(t,e)})),a.append("audit",n.toString()),a.append("vi",t);const d=new URL(e);d.search=a.toString(),d.search+="&EOQ",this.sender.sendBeacon(d.toString())}}class Zt{sendViewableDiffBeacon(e,t,n){const i=new E,r={ds_name:n.dsCode,adprodset_code:t,location:location.href,vimps_type:"new"};i.viewablediff(r)}}class en{constructor(e,t){this.sender=e,this.resendProtector=t}sendViewableBeacon(e,t,n,i,r){this.resendProtector.isSentViewableInfo(t,"viewable")||(this.sender.sendViewableBeacon(e,t,n,i,r),this.resendProtector.recordSending(i,t,"viewable"))}}class tn{constructor(e,t){this.sender=e,this.resendProtector=t}sendViewableDiffBeacon(e,t,n){this.resendProtector.isSentViewableInfo(e,"viewablediff")||(this.sender.sendViewableDiffBeacon(e,t,n),this.resendProtector.recordSending(t,e,"viewablediff"))}}class nn{constructor(e){this.sender=e}sendViewInTimeBeacon(e,t,n){if(!n.url)return;const i=new URLSearchParams;i.append("tk",n.tk),i.append("p",n.p),i.append("d",n.d),i.append("ds_code",n.ds_code),i.append("request_id",n.request_id),i.append("bid_request_id",n.bid_request_id),i.append("bid_response_id",n.bid_response_id),i.append("rank",n.rankFrom1.toString()),i.append("viewinms",Math.floor(n.viewInTimeMS).toFixed(0));const r=new URL(n.url);r.search=i.toString(),this.sender.sendBeacon(r.toString())}}class rn{constructor(e,t){this.sender=e,this.resendProtector=t}sendViewInTimeBeacon(e,t,n){this.resendProtector.isSentViewableInfo(e,"viewintime")||(this.sender.sendViewInTimeBeacon(e,t,n),this.resendProtector.recordSending(t,e,"viewintime"))}}n(439),n(3084);class sn{constructor(e){this.registry=void 0,"undefined"!=typeof FinalizationRegistry&&(this.registry=new FinalizationRegistry(e))}register(){var e;return null===(e=this.registry)||void 0===e?void 0:e.register(...arguments)}unregister(){var e;return null===(e=this.registry)||void 0===e?void 0:e.unregister(...arguments)}}class on{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];const t=Array.from(e).map((e=>{let[t,n]=e;return{key:t,value:n,weakRef:new kt(t)}}));this.refToWeakObjectMap=new Map(t.map((e=>[e.weakRef,e.value]))),this.weakKeyToRefMap=new WeakMap(t.map((e=>[e.key,e.weakRef]))),this.finalizer=new sn((e=>{this.refToWeakObjectMap.has(e)&&this.refToWeakObjectMap.delete(e)}));for(const e of t.values())this.finalizer.register(e.key,e.weakRef)}get(e){const t=this.weakKeyToRefMap.get(e);if(void 0!==t)return this.refToWeakObjectMap.get(t)}has(e){return this.weakKeyToRefMap.has(e)}set(e,t){this.delete(e);const n=new kt(e);this.refToWeakObjectMap.set(n,t),this.weakKeyToRefMap.set(e,n),this.finalizer.register(e,n)}delete(e){const t=this.weakKeyToRefMap.get(e);t&&(this.refToWeakObjectMap.delete(t),this.weakKeyToRefMap.delete(e),this.finalizer.unregister(e))}keys(){return Array.from(this.refToWeakObjectMap.keys()).filter((e=>void 0!==e.deref()))}values(){return Array.from(this.refToWeakObjectMap.entries()).filter((e=>{let[t,n]=e;return void 0!==t.deref()})).map((e=>{let[,t]=e;return t}))}entries(){return Array.from(this.refToWeakObjectMap.entries()).filter((e=>{let[t]=e;return void 0!==t.deref()}))}}class an{constructor(e,t){this.lowResIntersectionObserver=e,this.highResIntersectionObserver=t,e.addCallback(((e,t)=>this.onInterSectionEvents(e,t))),t.addCallback(((e,t)=>this.onInterSectionEvents(e,t))),this.targets=new on,this.viewableOffset={top:0,right:0,bottom:0,left:0}}register(e,t){if(0===t.length)return;const n=this.mergeWithCurrentTargets(e,t);this.targets.set(e,n),this.observeByIntersectionObserver(e)}mergeWithCurrentTargets(e,t){const n=this.targets.get(e)||[],i=t.filter((e=>!(null==n?void 0:n.some((t=>e.equals(t))))));return[...n,...i]}observeByIntersectionObserver(e){this.lowResIntersectionObserver.unobserve(e),this.highResIntersectionObserver.unobserve(e);const t=this.targets.get(e);if(!t)return;t.some((e=>e.hasSubRect()))?this.highResIntersectionObserver.observe(e):this.lowResIntersectionObserver.observe(e)}setViewableOffset(e,t){if(!e)return;this.assignViewableOffset(this.viewableOffset,e);const n=this.targets.values();n&&(null==n||n.forEach((e=>{null==e||e.forEach((e=>e.setViewableOffset(this.viewableOffset,t)))})))}updateRect(e,t,n,i){var r;if(0===n.length)return;const s=null===(r=this.targets.get(e))||void 0===r?void 0:r.filter((e=>t(e)));(null==s?void 0:s.length)===n.length&&(null==s||s.forEach(((e,t)=>e.updateRect(n[t],i))),this.observeByIntersectionObserver(e))}onInterSectionEvents(e,t){e.forEach((e=>{const n=this.targets.get(e.target);null==n||n.forEach((n=>n.onInterSectionEvent(e,t)))}))}onResize(e){e.forEach((e=>{const t=e.target;this.observeByIntersectionObserver(t)}))}onTimer(e){for(const t of this.targets.values())for(const n of t)n.onTimer(e)}changeDebugMode(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const t of this.targets.values())for(const i of n.values())for(const n of t)n.changeDebugMode(e,i)}assignViewableOffset(e,t){return Object.keys(t).forEach((n=>{["top","right","bottom","left"].includes(n)&&(e[n]=t[n])})),e}getViewableOffset(){return this.viewableOffset}dump(e){return Array.from(this.targets.entries()).flatMap((e=>{let[t,n]=e;return n.map((e=>[t,e]))})).filter((t=>{let[,n]=t;return!e||n.getId()===e})).map((e=>{let[t,n]=e;const i=At.map((e=>n.getHistory(e))).flat().sort(((e,t)=>e.time-t.time));return{elementRef:t,target:n,history:i}})).reduce(((e,t)=>{const n=t.target.getId();return e[n]||(e[n]=[]),e[n].push(t),e}),{})}}class dn{isOccluded(e,t){if(!!e.getAttribute("data-ydnnoad"))return{hitElem:null,isOccluded:!1,reason:["skipped"],occludedCheckPoints:[],obstructionElems:[]};const n=[];for(const i of ln(e,t)){const t=this.isOccludedAt(e,i.x,i.y);if(!t.isOccluded)return t;n.push(t)}return{isOccluded:!0,reason:n[0].reason,hitElem:n[0].hitElem,occludedCheckPoints:[],obstructionElems:[]}}isOccludedMultipleCheckPoints(e,t){if(!!e.getAttribute("data-ydnnoad"))return{hitElem:null,isOccluded:!1,reason:["skipped"],occludedCheckPoints:[],obstructionElems:[]};const n=[],i=[],r=[];let s=!0;for(const i of ln(e,t)){const t=this.isOccludedAt(e,i.x,i.y);s=s&&t.isOccluded,t.isOccluded&&n.push(t)}if(!s){let s=0;for(const[o,a]of function(e,t){const n=cn(e,t),i=n.left+n.width/2,r=n.top+n.height/2,s=new DOMPointReadOnly(Math.floor((n.x+i)/2),Math.floor((n.y+r)/2)),o=new DOMPointReadOnly(Math.floor((n.x+i)/2),Math.floor((n.y+n.height+r)/2)),a=new DOMPointReadOnly(Math.floor((n.x+n.width+i)/2),Math.floor((n.y+r)/2)),d=new DOMPointReadOnly(Math.floor((n.x+n.width+i)/2),Math.floor((n.y+n.height+r)/2));return new Map([["upperLeftPoint",s],["lowerLeftPoint",o],["upperRightPoint",a],["lowerRightPoint",d]])}(e,t)){const t=this.isOccludedAt(e,a.x,a.y);if(t.isOccluded?(i.push(o),null!==t.hitElem&&r.push(t.hitElem),n.push(t)):s++,s>=2)return t}}return{isOccluded:!0,reason:n[0].reason,hitElem:n[0].hitElem,occludedCheckPoints:i,obstructionElems:r}}isOccludedAt(e,t,n){const i=e.ownerDocument.defaultView,r=this.isOccludedAtLocalViewport(i,e,t,n);if(r.isOccluded)return r;const s=this.isOccludedAtAncestorViewports(i,t,n);return s.isOccluded?s:{hitElem:null,isOccluded:!1,reason:[...r.reason,...s.reason],occludedCheckPoints:[],obstructionElems:[]}}isOccludedAtLocalViewport(e,t,n,i){const r=this.getElementFromPointThroughShadowDOM(e.document,n,i);return r?r===t?{isOccluded:!1,reason:["HitAd"],hitElem:r,occludedCheckPoints:[],obstructionElems:[]}:this.isDescendantOf(r,t)?{isOccluded:!1,reason:["HitAdComponent"],hitElem:r,occludedCheckPoints:[],obstructionElems:[]}:"inline"===e.getComputedStyle(t).getPropertyValue("display")&&this.isDescendantOf(t,r,3)?{isOccluded:!1,reason:["HitAdContainer"],hitElem:r,occludedCheckPoints:[],obstructionElems:[]}:{isOccluded:!0,reason:["HitOccluderAtLocalViewport"],hitElem:r,occludedCheckPoints:[],obstructionElems:[]}:{hitElem:null,isOccluded:!1,reason:["unknown"],occludedCheckPoints:[],obstructionElems:[]}}isDescendantOf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=e.parentNode;return null!==r&&(r===t||!(0<=n&&i>=n)&&this.isDescendantOf(r,t,n,i+1))}isOccludedAtAncestorViewports(e,t,n){if(e===e.parent)return{hitElem:null,isOccluded:!1,reason:[],occludedCheckPoints:[],obstructionElems:[]};for(;e!==e.parent;){const i=e.frameElement;if(!i)return{hitElem:null,isOccluded:!1,reason:["UnknownByCrossOrigin"],occludedCheckPoints:[],obstructionElems:[]};const r=this.isOccludedAtParentViewport(e.parent,i,t,n);if(r.isOccluded)return r;e=e.parent}return{hitElem:null,isOccluded:!1,reason:["NoOccluder"],occludedCheckPoints:[],obstructionElems:[]}}getElementFromPointThroughShadowDOM(e,t,n){let i=0,r=e.elementFromPoint(t,n);for(;null!==r&&null!==r.shadowRoot&&i<5;)r=r.shadowRoot.elementFromPoint(t,n),i++;return r}isOccludedAtParentViewport(e,t,n,i){const r=t.getBoundingClientRect(),s=this.getElementFromPointThroughShadowDOM(e.document,r.x+n,r.y+i);return t!==s?{isOccluded:!0,reason:["HitOccluderAtParentViewport"],hitElem:s,occludedCheckPoints:[],obstructionElems:[]}:{isOccluded:!1,reason:["HitFrameElement"],hitElem:s,occludedCheckPoints:[],obstructionElems:[]}}}function ln(e,t){const n=cn(e,t);return n.height%2==0?n.width%2==0?[new DOMPointReadOnly(n.left+n.width/2-1,n.top+n.height/2-1),new DOMPointReadOnly(n.left+n.width/2,n.top+n.height/2)]:[new DOMPointReadOnly(n.left+Math.floor(n.width/2),n.top+n.height/2-1),new DOMPointReadOnly(n.left+Math.floor(n.width/2),n.top+n.height/2)]:n.width%2==0?[new DOMPointReadOnly(n.left+n.width/2-1,n.top+Math.floor(n.height/2)),new DOMPointReadOnly(n.left+n.width/2,n.top+Math.floor(n.height/2))]:[new DOMPointReadOnly(n.left+Math.floor(n.width/2),n.top+Math.floor(n.height/2))]}function cn(e,t){const n=e.getBoundingClientRect();if(!t)return n;const i=(()=>{if(t.x+t.width<=n.width)return t.width;{const e=n.width-t.x;return e>0?e:0}})(),r=(()=>{if(t.y+t.height<=n.height)return t.height;{const e=n.height-t.y;return e>0?e:0}})();return new DOMRectReadOnly(n.x+t.x,n.y+t.y,i,r)}class un{constructor(e,t,n,i,r,s){let o=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this.viewableInfo=e,this.adprodsetCode=t,this.sspKPIInfo=n,this.rankFrom1=i,this.viewInTimeBeaconSender=r,this.timeSrc=s,this.debug=o,this.totalViewInTimeMS=0,this.lastViewInTimeMS=-1}initEventListener(e){e.addEventListener("viewin",this),e.addEventListener("viewout",this),document.addEventListener("visibilitychange",(e=>{this.handleVisibilityChange(e)}))}handleEvent(e){"viewin"==e.type?this.handleViewIn():"viewout"==e.type&&this.handleViewOut()}handleViewIn(){this.updateStateOnViewIn()}handleViewOut(){this.updateStateOnViewOut()}handleVisibilityChange(e){this.writeDebug("document.visibilityState=".concat(document.visibilityState)),"visible"!==document.visibilityState&&(this.updateStateOnViewOut(),this.totalViewInTimeMS<=0||this.viewInTimeBeaconSender.sendViewInTimeBeacon(this.viewableInfo,this.adprodsetCode,Object.assign(Object.assign({},this.sspKPIInfo),{rankFrom1:this.rankFrom1,viewInTimeMS:this.totalViewInTimeMS})))}updateStateOnViewIn(){const e=this.timeSrc.getTime();this.writeDebug("updateStateOnViewIn: nowMS=".concat(e)),this.lastViewInTimeMS=e,this.writeDebug("after")}updateStateOnViewOut(){const e=this.timeSrc.getTime();if(this.writeDebug("updateStateOnViewOut: now=".concat(e)),this.lastViewInTimeMS>=0){const t=e-this.lastViewInTimeMS;t>0&&(this.totalViewInTimeMS+=t),this.lastViewInTimeMS=-1,this.writeDebug("deltaMS=".concat(t))}else this.writeDebug("after")}writeDebug(e){if(!this.debug)return;console.debug(e+": "+this.getDebugString())}getDebugString(){return"lastViewInTimeMS=".concat(this.lastViewInTimeMS,", totalViewInTimeMS=").concat(this.totalViewInTimeMS)}}class hn{constructor(e,t){this.viewInTimeBeaconSender=e,this.timeSrc=t}setupViewInTimeHandler(e,t,n,i){var r;if(!(null==i?void 0:i.sspKPIInfo))return;new un(t,n,null==i?void 0:i.sspKPIInfo,null!==(r=null==i?void 0:i.rankFrom1)&&void 0!==r?r:1,this.viewInTimeBeaconSender,this.timeSrc).initEventListener(e)}}class fn{constructor(e,t,n,i,r){this.elementRef=t,this.settings=i,this.subRect=r,this.debugOutlineElements=function(e,t){const n=bn(e);n.dataset.uadf="outline",n.style.position="fixed",n.style.zIndex=yn.toString(),n.style.outlineWidth=t/2+"px";const i=n.cloneNode(),r=n.cloneNode(),s=n.cloneNode();return[n,i,r,s]}(n,i.thickness),e.addEventListener("viewable",(()=>this.viewableFired=!0)),e.addEventListener("viewin",(()=>this.viewIn=!0)),e.addEventListener("viewout",(()=>this.viewIn=!1)),this.enabled=this.viewableFired=this.viewIn=!1}enable(){if(this.enabled)return;this.enabled=!0,this.debugOutlineElements.forEach((e=>{document.body.contains(e)||document.body.appendChild(e)}));const e=()=>{const t=this.elementRef.deref();if(!this.enabled||!t)return;const n=void 0===this.subRect,i=this.settings.forMovie&&n,r=cn(t,this.subRect);if(0===r.width||0===r.height||i)return[0,1,2,3].forEach((e=>{this.debugOutlineElements[e].style.display="none"})),void(this.enabled=!1);const s=this.settings.offset||0;Object.values({debug_outline_top:{top:r.top-s,left:r.left,width:r.width,height:0},debug_outline_right:{top:r.top,left:r.right+s,width:0,height:r.height},debug_outline_bottom:{top:r.bottom+s,left:r.left,width:r.width,height:0},debug_outline_left:{top:r.top,left:r.left-s,width:0,height:r.height}}).forEach(((e,t)=>{let{top:i,left:r,width:s,height:o}=e;const a=this.debugOutlineElements[t];a.style.top=i+"px",a.style.left=r+"px",a.style.width=s+"px",a.style.height=o+"px",a.style.display="block";const d=pn(this.viewableFired,this.viewIn,this.settings);this.settings.forMovie?n||(a.style.outlineStyle="dotted",a.style.outlineColor=d):(a.style.outlineStyle="solid",a.style.outlineColor=d)})),window.requestAnimationFrame(e)};window.requestAnimationFrame(e)}disable(){this.debugOutlineElements.forEach((e=>e.remove())),this.enabled=!1}toggle(){this.enabled?this.disable():this.enable()}updateRect(e){this.subRect=e}}function pn(e,t,n){const i=n.viewableColor;if(i&&e)return i;const r=n.viewinColor,s=n.viewoutColor;if(t){if(r)return r}else if(s)return s;return n.defaultColor}class mn{constructor(e,t,n,i,r){this.elementRef=t,this.settings=i,this.subRect=r,this.debugCenterElement=function(e){const t=bn(e);return t.dataset.uadf="center",t.style.width="5px",t.style.height="5px",t.style.zIndex=yn.toString(),t.style.position="fixed",t}(n),e.addEventListener("viewable",(()=>this.viewableFired=!0)),e.addEventListener("viewin",(()=>this.viewIn=!0)),e.addEventListener("viewout",(()=>this.viewIn=!1)),this.enabled=this.viewableFired=this.viewIn=!1}enable(){if(this.enabled)return;this.enabled=!0,document.body.contains(this.debugCenterElement)||document.body.appendChild(this.debugCenterElement);const e=()=>{const t=this.elementRef.deref();if(!this.enabled||!t)return;const n=void 0===this.subRect,i=this.settings.forMovie&&n,r=cn(t,this.subRect);if(0===r.width||0===r.height||i)return void(this.debugCenterElement.style.display="none");this.debugCenterElement.style.display="block";const s=ln(t,this.subRect);this.debugCenterElement.style.backgroundColor=pn(this.viewableFired,this.viewIn,this.settings),this.debugCenterElement.style.top=s[0].y+2+"px",this.debugCenterElement.style.left=s[0].x+2+"px",window.requestAnimationFrame(e)};window.requestAnimationFrame(e)}disable(){this.debugCenterElement.remove(),this.enabled=!1}toggle(){this.enabled?this.disable():this.enable()}updateRect(e){this.subRect=e}}class vn{constructor(e,t,n){this.elementRef=e,this.subRect=n,this.debugDSElement=function(e){const t=bn(e);return t.textContent=e,t.dataset.uadfDsLabel=e,t.style.padding="3px",t.style.color="#ffffff",t.style.fontSize="12px",t.style.lineHeight="12px",t.style.backgroundColor="#696969",t.style.position="fixed",t.style.zIndex=yn.toString(),t}(t),this.enabled=!1}enable(){if(this.enabled)return;this.enabled=!0,document.body.contains(this.debugDSElement)||window.document.body.appendChild(this.debugDSElement);const e=()=>{const t=this.elementRef.deref();if(!this.enabled||!t)return;const n=cn(t,this.subRect);if(0===n.width||0===n.height)return void(this.debugDSElement.style.display="none");const i=this.debugDSElement.getBoundingClientRect();this.debugDSElement.style.display="block",this.debugDSElement.style.top=n.top+"px",this.debugDSElement.style.left=n.left+n.width/2-i.width/2+"px",window.requestAnimationFrame(e)};window.requestAnimationFrame(e)}disable(){this.debugDSElement.remove(),this.enabled=!1}toggle(){this.enabled?this.disable():this.enable()}updateRect(e){this.subRect=e}}class gn{constructor(e){this.eventTarget=e,this.debugEvents=At.filter((e=>"timer"!==e&&"viewcontinue"!==e)),this.enabled=!1}enable(){this.enabled||(this.enabled=!0,this.debugEvents.forEach((e=>{this.eventTarget.addEventListener(e,An)})))}disable(){this.enabled=!1,this.debugEvents.forEach((e=>{this.eventTarget.removeEventListener(e,An)}))}toggle(){this.enabled?this.disable():this.enable()}updateRect(e){}}class wn{constructor(e){this.eventTarget=e,this.enabled=!1}enable(){this.enabled||(this.enabled=!0,this.eventTarget.addEventListener("timer",An))}disable(){this.enabled=!1,this.eventTarget.removeEventListener("timer",An)}toggle(){this.enabled?this.disable():this.enable()}updateRect(e){}}const yn=2147483647;function bn(e){const t=document.createElement("div");return t.dataset.targetId=e,t.style.margin="0px",t.style.padding="0px",t.style.border="0px",t}class _n{constructor(e,t,n,i,r){this.eventTarget=e,this.elementRef=t,this.settings=i,this.subRect=r,this.tools={outline:new fn(e,t,n,i,r),centerpoint:new mn(e,t,n,i,r),id:new vn(t,n,r),timer:new wn(e),target:new gn(e)},this.historyEventListeners={timer:new In,intersection:new In,setViewableOffset:new In,updateRect:new In,viewin:new In,viewout:new In,viewcontinue:new In,viewable:new In,viewablediff:new In},Object.entries(this.historyEventListeners).forEach((t=>{let[n,i]=t;return e.addEventListener(n,i)}))}getHistory(e){return this.historyEventListeners[e].getHistory()}updateRect(e){this.subRect=e,Object.entries(this.tools).forEach((t=>{let[n,i]=t;i.updateRect(e)}))}changeDebugMode(e,t){var n;if(!(null===(n=this.settings.dropFeatures)||void 0===n?void 0:n.includes(t)))switch(e){case"enable":this.tools[t].enable();break;case"disable":this.tools[t].disable();break;case"toggle":this.tools[t].toggle()}}}class In{get limit(){return this._limit}constructor(){this._limit=It,this.events=[]}handleEvent(e){const t=e.target;this.events.push(Object.assign({type:e.type,time:(new Date).getTime()},t.getDebugInfo())),this.events.length>this.limit&&this.events.shift()}getHistory(){return this.events}}function An(e){console.info(e)}class Sn{constructor(){this.eventListeners={viewin:[],viewout:[],viewcontinue:[],viewable:[],timer:[],intersection:[],setViewableOffset:[],updateRect:[],viewablediff:[]}}dispatchEvent(e){this.eventListeners[e.type].forEach((t=>{"handleEvent"in t?t.handleEvent(e):t(e)}))}addEventListener(e,t){this.eventListeners[e].push(t)}removeEventListener(e,t){this.eventListeners[e]=this.eventListeners[e].filter((e=>e!==t))}}var On=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n};class En extends Sn{constructor(e,t,n,i,r,s,o){super(),this.elementRef=e,this.id=t,this.viewInDetector=n,this.viewInDetectorMultipleCheckPoints=i,this.viewStateMachine=r,this.ViewStateMachinForCheckViewableDiff=s,this.clonedIntersectionObserverEntryOmitTarget=null,this.subRect=o.subRect,this.userData=o.userData,this.viewStateMachine.setCallback((e=>{"viewable"===e?(this.viewableFired||this.dispatchEvent({type:"viewable",target:this}),this.viewableFired=!0):this.dispatchEvent({type:e,target:this})})),this.viewableFired=!1,this.ViewStateMachinForCheckViewableDiff.setCallback((e=>{this.dispatchEvent({type:e,target:this})})),this.debugHelper=new _n(this,e,t,o.debugSettings,o.subRect)}onInterSectionEvent(e,t){const n=function(e){return{time:e.time,rootBounds:e.rootBounds,boundingClientRect:e.boundingClientRect,intersectionRect:e.intersectionRect,isIntersecting:e.isIntersecting,intersectionRatio:e.intersectionRatio,target:e.target}}(e),{target:i}=n,r=On(n,["target"]);this.clonedIntersectionObserverEntryOmitTarget=r,this.onPolling(t),this.dispatchEvent({type:"intersection",target:this})}updateRect(e,t){this.subRect=e,this.debugHelper.updateRect(e),this.onPolling(t),this.dispatchEvent({type:"updateRect",target:this})}setViewableOffset(e,t){this.viewableOffset=e,this.onPolling(t),this.dispatchEvent({type:"setViewableOffset",target:this})}hasSubRect(){return!!this.subRect}onTimer(e){this.onPolling(e),this.dispatchEvent({type:"timer",target:this})}equals(e){if(!(e instanceof En))return!1;const t=e;return this.elementRef.deref()===t.elementRef.deref()&&this.id===t.id&&this.subRect===t.subRect}onPolling(e){if(!this.clonedIntersectionObserverEntryOmitTarget)return;const t=this.elementRef.deref(),n=void 0!==t&&this.viewInDetector.isViewIn(t,this.clonedIntersectionObserverEntryOmitTarget,this.viewableOffset,this.subRect),i=void 0!==t&&this.viewInDetectorMultipleCheckPoints.isViewInMultipleCheckPoints(t,this.clonedIntersectionObserverEntryOmitTarget,this.viewableOffset,this.subRect);this.viewStateMachine.advanceState(n,e),this.ViewStateMachinForCheckViewableDiff.advanceState(i,e)}getId(){return this.id}changeDebugMode(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];n.forEach((t=>this.debugHelper.changeDebugMode(e,t)))}getHistory(e){return this.debugHelper.getHistory(e)}getDebugInfo(){return{elementRef:this.elementRef,id:this.id,viewInDetector:this.viewInDetector.getDebugInfo(),intersectionObserverEntryOmitTarget:this.clonedIntersectionObserverEntryOmitTarget,subRect:this.subRect,viewableFired:this.viewableFired,userData:this.userData}}}class Mn{constructor(){this.VIEWED_TIME_CONDITION=1e3,this.lastViewedStart=-1,this.currentViewedTime=0,this.callback=e=>{},this.state="viewout"}advanceState(e,t){switch(this.state){case"viewin":e?this.handleViewContinue(t):(this.handleViewOut(t),this.state="viewout");break;case"viewout":e&&(this.handleViewIn(t),this.state="viewin")}}setCallback(e){this.callback=e}handleViewIn(e){this.lastViewedStart=e,this.currentViewedTime=0,this.callback("viewin")}handleViewContinue(e){this.callback("viewcontinue"),this.currentViewedTime=e-this.lastViewedStart,this.currentViewedTime>=this.VIEWED_TIME_CONDITION&&this.callback("viewable")}handleViewOut(e){this.currentViewedTime=e-this.lastViewedStart,this.currentViewedTime>=this.VIEWED_TIME_CONDITION&&this.callback("viewable"),this.lastViewedStart=-1,this.currentViewedTime=0,this.callback("viewout")}}class kn{constructor(){this.VIEWED_TIME_CONDITION=1e3,this.lastViewedStart=-1,this.currentViewedTime=0,this.callback=e=>{},this.state="viewout"}advanceState(e,t){switch(this.state){case"viewin":e?this.handleViewContinue(t):(this.handleViewOut(t),this.state="viewout");break;case"viewout":e&&(this.handleViewIn(t),this.state="viewin")}}setCallback(e){this.callback=e}handleViewIn(e){this.lastViewedStart=e,this.currentViewedTime=0,this.callback("viewin")}handleViewContinue(e){this.callback("viewcontinue"),this.currentViewedTime=e-this.lastViewedStart,this.currentViewedTime>=this.VIEWED_TIME_CONDITION&&this.callback("viewablediff")}handleViewOut(e){this.currentViewedTime=e-this.lastViewedStart,this.currentViewedTime>=this.VIEWED_TIME_CONDITION&&this.callback("viewablediff"),this.lastViewedStart=-1,this.currentViewedTime=0,this.callback("viewout")}}class Tn{getDebugInfo(){var e;const t=null===(e=this.lastOcclusionResult)||void 0===e?void 0:e.hitElem;return this.lastOcclusionResult&&(this.lastOcclusionResult.hitElem=null),{lastIsHidden:this.lastIsHidden,lastOcclusionResult:Object.assign(Object.assign({},this.lastOcclusionResult),{hitElem:t})}}constructor(e){this.occlusionChecker=e,this.VIEWED_AREA_CONDITION=.5,this.lastIsHidden=null,this.lastOcclusionResult=null}isViewIn(e,t,n,i){if(!t.intersectionRatio)return!1;if(i){const e=new DOMRectReadOnly(i.x+t.boundingClientRect.x,i.y+t.boundingClientRect.y,i.width,i.height),n=this.calcIntersection(e,t.intersectionRect);if(n.width*n.height/(e.width*e.height)<this.VIEWED_AREA_CONDITION)return!1}else if(this.isInitialViewableOffset(n)){if(t.intersectionRatio<this.VIEWED_AREA_CONDITION)return!1}else{const i=e.getBoundingClientRect(),r=this.calcIntersectionWithViewableOffset(i,t.rootBounds,n);if(r.width*r.height/(i.width*i.height)<this.VIEWED_AREA_CONDITION)return!1}return this.lastIsHidden=this.isHidden(e),!this.lastIsHidden&&(this.lastOcclusionResult=this.occlusionChecker.isOccluded(e,i),!this.lastOcclusionResult.isOccluded)}isHidden(e){return"hidden"===window.getComputedStyle(e).visibility||document.hidden}calcIntersection(e,t){const n=Math.max(e.left,t.left),i=Math.max(e.top,t.top),r=Math.min(e.right,t.right),s=Math.min(e.bottom,t.bottom);return n>=r||i>=s?new DOMRectReadOnly(0,0,0,0):new DOMRectReadOnly(n,i,r-n,s-i)}calcIntersectionWithViewableOffset(e,t,n){var i,r,s,o,a,d;const l=null!==(i=null==t?void 0:t.width)&&void 0!==i?i:0,c=null!==(r=null==t?void 0:t.height)&&void 0!==r?r:0,u=null!==(s=null==n?void 0:n.top)&&void 0!==s?s:0,h=null!==(o=null==n?void 0:n.right)&&void 0!==o?o:0,f=null!==(a=null==n?void 0:n.bottom)&&void 0!==a?a:0,p=null!==(d=null==n?void 0:n.left)&&void 0!==d?d:0,m=Math.max(e.left,p),v=Math.max(e.top,u),g=Math.min(e.right,l-h),w=Math.min(e.bottom,c-f);return m>=g||v>=w?new DOMRectReadOnly(0,0,0,0):new DOMRectReadOnly(m,v,g-m,w-v)}isInitialViewableOffset(e){var t,n,i,r;const s=null!==(t=null==e?void 0:e.top)&&void 0!==t?t:0,o=null!==(n=null==e?void 0:e.right)&&void 0!==n?n:0,a=null!==(i=null==e?void 0:e.bottom)&&void 0!==i?i:0,d=null!==(r=null==e?void 0:e.left)&&void 0!==r?r:0;return 0===s&&0===o&&0===a&&0===d}}class Rn{getDebugInfo(){var e;const t=null===(e=this.lastOcclusionResult)||void 0===e?void 0:e.hitElem;return this.lastOcclusionResult&&(this.lastOcclusionResult.hitElem=null),{lastIsHidden:this.lastIsHidden,lastOcclusionResult:Object.assign(Object.assign({},this.lastOcclusionResult),{hitElem:t})}}getLastOccludedCheckPoints(){let e=[];return this.lastOcclusionResult&&(e=this.lastOcclusionResult.occludedCheckPoints),e}getLastObstructionElems(){let e=[];return this.lastOcclusionResult&&(e=this.lastOcclusionResult.obstructionElems),e}constructor(e){this.occlusionChecker=e,this.VIEWED_AREA_CONDITION=.5,this.lastIsHidden=null,this.lastOcclusionResult=null}isViewInMultipleCheckPoints(e,t,n,i){if(!t.intersectionRatio)return!1;if(i){const e=new DOMRectReadOnly(i.x+t.boundingClientRect.x,i.y+t.boundingClientRect.y,i.width,i.height),n=this.calcIntersection(e,t.intersectionRect);if(n.width*n.height/(e.width*e.height)<this.VIEWED_AREA_CONDITION)return!1}else if(this.isInitialViewableOffset(n)){if(t.intersectionRatio<this.VIEWED_AREA_CONDITION)return!1}else{const i=e.getBoundingClientRect(),r=this.calcIntersectionWithViewableOffset(i,t.rootBounds,n);if(r.width*r.height/(i.width*i.height)<this.VIEWED_AREA_CONDITION)return!1}return this.lastIsHidden=this.isHidden(e),!this.lastIsHidden&&(this.lastOcclusionResult=this.occlusionChecker.isOccludedMultipleCheckPoints(e,i),!this.lastOcclusionResult.isOccluded)}isHidden(e){return"hidden"===window.getComputedStyle(e).visibility||document.hidden}calcIntersection(e,t){const n=Math.max(e.left,t.left),i=Math.max(e.top,t.top),r=Math.min(e.right,t.right),s=Math.min(e.bottom,t.bottom);return n>=r||i>=s?new DOMRectReadOnly(0,0,0,0):new DOMRectReadOnly(n,i,r-n,s-i)}calcIntersectionWithViewableOffset(e,t,n){var i,r,s,o,a,d;const l=null!==(i=null==t?void 0:t.width)&&void 0!==i?i:0,c=null!==(r=null==t?void 0:t.height)&&void 0!==r?r:0,u=null!==(s=null==n?void 0:n.top)&&void 0!==s?s:0,h=null!==(o=null==n?void 0:n.right)&&void 0!==o?o:0,f=null!==(a=null==n?void 0:n.bottom)&&void 0!==a?a:0,p=null!==(d=null==n?void 0:n.left)&&void 0!==d?d:0,m=Math.max(e.left,p),v=Math.max(e.top,u),g=Math.min(e.right,l-h),w=Math.min(e.bottom,c-f);return m>=g||v>=w?new DOMRectReadOnly(0,0,0,0):new DOMRectReadOnly(m,v,g-m,w-v)}isInitialViewableOffset(e){var t,n,i,r;const s=null!==(t=null==e?void 0:e.top)&&void 0!==t?t:0,o=null!==(n=null==e?void 0:e.right)&&void 0!==n?n:0,a=null!==(i=null==e?void 0:e.bottom)&&void 0!==i?i:0,d=null!==(r=null==e?void 0:e.left)&&void 0!==r?r:0;return 0===s&&0===o&&0===a&&0===d}}class Cn{constructor(e){this.occlusionChecker=e}createViewMessagePushTarget(e,t){const n=new kt(e),i=new Pn(n,ce(t)+"(ViewPushTarget)",new Tn(this.occlusionChecker),new Rn(this.occlusionChecker),new Mn,new kn,{userData:{patternCode:t},debugSettings:{dropFeatures:["id"],thickness:4,offset:3,forMovie:!0,viewinColor:"blue",viewoutColor:"red",defaultColor:"red"}});return i.initViewableViewInViewOutEventListener(),i.changeDebugMode("disable","id"),i}}class Pn extends En{constructor(e,t,n,i,r,s,o){super(e,t,n,i,r,s,o),this.loadedFrameRef=e}initViewableViewInViewOutEventListener(){this.addEventListener("viewin",(()=>this.sendNotification("view-in",this.loadedFrameRef.deref()))),this.addEventListener("viewout",(()=>this.sendNotification("view-out",this.loadedFrameRef.deref()))),this.addEventListener("viewable",(()=>this.sendNotification("viewable",this.loadedFrameRef.deref())))}sendNotification(e,t){const n=null==t?void 0:t.contentWindow;if(!n||!n.postMessage)return;const i={cmd:"viewStateChanged",eventType:e};n.postMessage(i,"*")}equals(e){return!!super.equals(e)&&e instanceof Pn}}class Dn{constructor(e,t,n,i,r){this.vimpsBeaconSender=e,this.viewableDiffBeaconSender=t,this.viewThroughBeaconSender=n,this.occlusionChecker=i,this.viewInTimeHandlerFactory=r}createVimpsTarget(e,t,n,i,r,s){const o=new kt(e),a=new Rn(this.occlusionChecker),d=new xn(o,ce(r),new Tn(this.occlusionChecker),a,new Mn,new kn,{subRect:null==s?void 0:s.subRect,userData:{viewableInfo:t,adprodsetCode:r},debugSettings:{thickness:6,viewableColor:"green",defaultColor:"red"}},t,i,r,this.vimpsBeaconSender,this.viewableDiffBeaconSender,this.viewThroughBeaconSender);return d.initViewableEventListener(t,n,a,s),this.viewInTimeHandlerFactory&&this.viewInTimeHandlerFactory.setupViewInTimeHandler(d,t,r,s),d}}class xn extends En{constructor(e,t,n,i,r,s,o,a,d,l,c,u,h){super(e,t,n,i,r,s,o),this.viewableInfo=a,this.audit=d,this.adprodsetCode=l,this.vimpsBeaconSender=c,this.viewableDiffBeaconSender=u,this.viewThroughBeaconSender=h}initViewableEventListener(e,t,n,i){this.addEventListener("viewable",(()=>{const n=(null==i?void 0:i.makeVimpsAdditionalParams)?i.makeVimpsAdditionalParams():new URLSearchParams;this.vimpsBeaconSender.sendViewableBeacon(t,e,this.audit,this.adprodsetCode,n),this.sendViewThroughConversionBeacon(null==i?void 0:i.viewableTrackingUrlList)})),this.addEventListener("viewablediff",(()=>{this.viewableDiffBeaconSender.sendViewableDiffBeacon(e,this.adprodsetCode,{dsCode:ce(this.adprodsetCode)})}))}sendViewThroughConversionBeacon(e){null==e||e.forEach((e=>{this.viewThroughBeaconSender.sendBeacon(e)}))}equals(e){if(!super.equals(e))return!1;if(!(e instanceof xn))return!1;const t=e;return this.viewableInfo===t.viewableInfo&&this.adprodsetCode===t.adprodsetCode}}n(9403);class Yn{constructor(e){this.callbacks=[],this.observer=new IntersectionObserver((e=>{this.callbacks.forEach((t=>t(e,(new Date).getTime())))}),e)}observe(e){this.observer.observe(e)}unobserve(e){this.observer.unobserve(e)}addCallback(e){this.callbacks.push(e)}}class Ln{constructor(){const e=qt();this.timeSrc={getTime:()=>(new Date).getTime()},this.monitor=this.buildMonitor();const t=this.buildResendProtector();this.mimpsSender=this.buildMimpsSender(e,this.timeSrc,t),this.vimpsSender=this.buildVimpsSender(e,this.timeSrc,t);const n=new Zt;this.viewableDiffSender=new tn(n,t);const i=this.buildViewInTimeSender(t),r=new hn(i,this.timeSrc);[this.vimpsTargetFactory,this.viewMessagePushTargetFactory]=this.buildFactory(this.vimpsSender,this.viewableDiffSender,r)}buildMonitor(){const e=[...new Array(101)].map(((e,t)=>t/100)),t=new Yn({threshold:[.5]}),n=new Yn({threshold:e});return new an(t,n)}buildResendProtector(){const e=function(){try{return!!(window.sessionStorage&&window.sessionStorage.getItem&&window.sessionStorage.setItem)}catch(e){return!1}}()?window.sessionStorage:new Gt;return new Qt(e)}buildMimpsSender(e,t,n){return new Wt(new Jt(new Nt,e,t),n)}buildVimpsSender(e,t,n){const i=new Xt(new Ht,e,t);return new en(i,n)}buildViewInTimeSender(e){const t=new nn(new Bt);return new rn(t,e)}buildFactory(e,t,n){const i=new Ut,r=new dn;return[new Dn(e,t,i,r,n),new Cn(r)]}}function Fn(e){return e.split("|").map((e=>function(e){const t=e.split("/");if(t.length<4||t.length>6)return null;const n=jn(e);if(!n)return null;const i=t[4]&&0!==t[4].length?t[4]:null;if(!i)return null;const r=t[5]?function(e){try{return JSON.parse(decodeURIComponent(e))}catch(e){return[]}}(t[5]):[];return{top:n.top,right:n.right,bottom:n.bottom,left:n.left,viewableInfo:i,viewableTrackingUrlList:r}}(e))).filter((e=>!!e))}function Vn(e){if("string"==typeof e)try{const t=JSON.parse(decodeURIComponent(e));return function(e){if("object"==typeof e&&null!==e){const t=e;return"string"==typeof t.url&&"string"==typeof t.tk&&"string"==typeof t.p&&"string"==typeof t.d&&"string"==typeof t.ds_code&&"string"==typeof t.request_id&&"string"==typeof t.bid_request_id&&"string"==typeof t.bid_response_id}return!1}(t)?t:void 0}catch(e){return}}function jn(e){const t=e.split("/");if(t.length<4)return null;const n=parseInt(t[0],10),i=parseInt(t[1],10),r=parseInt(t[2],10),s=parseInt(t[3],10);return isNaN(n)||isNaN(i)||isNaN(r)||isNaN(s)?null:{top:n,right:i,bottom:r,left:s}}class Un{constructor(e,t){this.eventHandlers=e,this.timeSrc=t}handleEvent(e){let t=!1;const n="string"==typeof e.data?(t=!0,function(e){const t=e.split(",");if(t.length<1)return null;switch(t[0]){case"frameStarted":return t.length<3?null:{cmd:"frameStarted",vimpsMode:parseInt(t[1],10),patternCode:t[2]};case"frameLoaded":case"frameScrolled":{if(t.length<5)return null;const e=Fn(t[4]);return e?{cmd:t[0],vimpsMode:parseInt(t[1],10),adprodsetCode:t[2],requestId:t[3],adInfoList:e,measurableUrl:t[5],viewableUrl:t[6],sspKPIInfo:Vn(t[7]),isAudit:t[8]}:null}case"frameUpdateCallbackElement":{if(t.length<2)return null;const e=jn(t[1]);return e?{cmd:"frameUpdateCallbackElement",top:e.top,right:e.right,bottom:e.bottom,left:e.left}:null}default:return null}}(e.data)):null!==e.data&&"object"==typeof e.data?e.data:null;if(!n)return;t&&(new E).deprecatedPostMessage(e);const i=this.eventHandlers[n.cmd];i&&i.handle(n,e,this.timeSrc.getTime())}}function Nn(e,t,n){0===t.length&&(t=St.flat());const i=t.filter((e=>!St.includes(e)));if(i.length>0)throw new Error("invalid feature: ".concat(i," is not in [").concat(St,"]"));n.changeDebugMode(e,...t)}function Hn(e,t,n,i,r,s,o){const a={markAdsForDebug:e=>{Nn("enable",["outline","centerpoint"],t),e&&Nn("enable",["id"],t)},toggleDsDisplayForDebug:()=>{Nn("toggle",["id"],t)},enableDebug(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];Nn("enable",n,t)},disableDebug(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];Nn("disable",n,t)},toggleDebug(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];Nn("toggle",n,t)},dump:e=>({target:t.dump(e),messageEvent:{frameStarted:n.frameStarted.getHistory(),frameLoaded:n.frameLoaded.getHistory(),frameScrolled:n.frameScrolled.getHistory(),frameUpdateCallbackElement:n.frameUpdateCallbackElement.getHistory()},renderedEvent:{notifyRendered:i.getHistory(),notifyStreamAttached:r.getHistory(),notifyTimelineAttached:s.getHistory()},viewableOffsetEvent:{notifyViewableOffsetEvent:o.getHistory()},currentViewableOffset:t.getViewableOffset()})};return Object.assign(Object.assign({},e),a)}class Bn{constructor(e,t,n){this.factory=e,this.monitor=t,this.mimpsBeaconSender=n}handle(e,t,n){if("number"!=typeof e.vimpsMode)return;if(void 0===(i=e).adInfoList||void 0===i.measurableUrl||void 0===i.viewableUrl||void 0===i.isAudit)return;var i;if(!bt(e.vimpsMode)){const t=e.adInfoList.map((e=>e.viewableInfo));return void this.mimpsBeaconSender.sendMeasurableBeacon(e.measurableUrl,t,pt.NonMeasurable,e.adprodsetCode)}if(!t.source)return;const r=yt(window,t.source);if(!r)return;if("non_ydn"===e.requestId)return;const s=e.adInfoList.map(((t,n)=>{const i=t.viewableInfo;if(!i)return null;return this.factory.createVimpsTarget(r,i,e.viewableUrl,e.isAudit,e.adprodsetCode,{subRect:new DOMRectReadOnly(t.left,t.top,t.right-t.left,t.bottom-t.top),viewableTrackingUrlList:t.viewableTrackingUrlList,sspKPIInfo:e.sspKPIInfo,rankFrom1:n+1})}));this.monitor.register(r,s.filter((e=>null!=e)));const o=e.adInfoList.map((e=>e.viewableInfo));this.mimpsBeaconSender.sendMeasurableBeacon(e.measurableUrl,o,pt.Measurable,e.adprodsetCode)}}class qn{constructor(e){this.monitor=e}handle(e,t,n){if(!t.source)return;if(void 0===e.adInfoList)return;const i=yt(window,t.source);if(!i)return;const r=e.adInfoList.map((e=>new DOMRectReadOnly(e.left,e.top,e.right-e.left,e.bottom-e.top)));this.monitor.updateRect(i,(e=>e instanceof xn),r,n)}}class Jn{constructor(e,t){this.factory=e,this.monitor=t}handle(e,t,n){if("number"!=typeof e.vimpsMode)return;if(!bt(e.vimpsMode))return;const i=yt(window,t.source);if(!i)return;const r=this.factory.createViewMessagePushTarget(i,e.patternCode);this.monitor.register(i,[r])}}class Wn{constructor(e){this.monitor=e}handle(e,t,n){if(!t.source)return;const i=yt(window,t.source);if(!i)return;const r=new DOMRectReadOnly(e.left,e.top,e.right-e.left,e.bottom-e.top);this.monitor.updateRect(i,(e=>e instanceof Pn),[r],n)}}class zn{constructor(e){this.wrapped=e,this.limit=It,this.events=[]}handle(e,t,n){this.events.push(Object.assign({time:(new Date).getTime()},e)),this.events.length>this.limit&&this.events.shift(),this.wrapped.handle(e,t,n)}getHistory(){return this.events}}!function(){const e=window.YJ_UADF;if(e&&e.YADSViewable&&e.YADSViewable.initialized)return;const t=new Ln,n={frameStarted:new zn(new Jn((i=t).viewMessagePushTargetFactory,i.monitor)),frameLoaded:new zn(new Bn(i.vimpsTargetFactory,i.monitor,i.mimpsSender)),frameScrolled:new zn(new qn(i.monitor)),frameUpdateCallbackElement:new zn(new Wn(i.monitor))};var i;window.addEventListener("message",new Un(n,t.timeSrc),!1);const r=new Yt(t),s=r.buildStreamAttachedHandler(),o=r.buildTimelineAttachedHandler(),a=r.buildRenderedEventHandler(),d=new Vt(t).buildViewableOffsetEventHandler();setInterval((()=>{const e=new Date;t.monitor.onTimer(e.getTime())}),100);const l={initialized:!0,notifyRendered:a.notifyRendered.bind(a),notifyStreamAttached:s.notifyStreamAttached.bind(s),notifyTimelineAttached:o.notifyTimelineAttached.bind(o),notifyViewableOffsetEvent:d.notifyViewableOffsetEvent.bind(d)};window.YJ_UADF={YADSViewable:Hn(l,t.monitor,n,a,s,o,d)}}(),(new E).debug({fn:"async",version:"1.73.0"}),(new Me).bind(),function(){const e=new dt;window.YJ_YADS.isSupported=dt.isSupported,window.YJ_YADS.setViewInCallback=e.setViewInCallback.bind(e),window.YJ_YADS.setViewOutCallback=e.setViewOutCallback.bind(e),window.YJ_YADS.setViewCallbackElement=dt.setViewCallbackElement}(),window.yadsRequestAsync=Qe,at.getInstance.observe()})()})();
//# sourceMappingURL=yads-async.js.map